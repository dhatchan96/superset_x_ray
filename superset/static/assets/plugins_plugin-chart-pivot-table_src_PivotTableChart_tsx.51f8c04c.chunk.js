"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-pivot-table_src_PivotTableChart_tsx"],{

/***/ "./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/MinusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar MinusSquareOutlined = function MinusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\n\n/**![minus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMzY4YzQuNCAwIDgtMy42IDgtOHYtNDhjMC00LjQtMy42LTgtOC04SDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(MinusSquareOutlined);\nif (true) {\n  RefIcon.displayName = 'MinusSquareOutlined';\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RefIcon);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvTWludXNTcXVhcmVPdXRsaW5lZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zL2VzL2ljb25zL01pbnVzU3F1YXJlT3V0bGluZWQuanM/ODE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbi8vIEdFTkVSQVRFIEJZIC4vc2NyaXB0cy9nZW5lcmF0ZS50c1xuLy8gRE9OIE5PVCBFRElUIElUIE1BTlVBTExZXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNaW51c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL01pbnVzU3F1YXJlT3V0bGluZWRcIjtcbmltcG9ydCBBbnRkSWNvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9BbnRkSWNvblwiO1xudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSBmdW5jdGlvbiBNaW51c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFudGRJY29uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZixcbiAgICBpY29uOiBNaW51c1NxdWFyZU91dGxpbmVkU3ZnXG4gIH0pKTtcbn07XG5cbi8qKiFbbWludXMtc3F1YXJlXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEFpSUdobGFXZG9kRDBpTlRBaUlHWnBiR3c5SWlOallXTmhZMkVpSUhacFpYZENiM2c5SWpZMElEWTBJRGc1TmlBNE9UWWlJR1p2WTNWellXSnNaVDBpWm1Gc2MyVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStQSEJoZEdnZ1pEMGlUVE15T0NBMU5EUm9Nelk0WXpRdU5DQXdJRGd0TXk0MklEZ3RPSFl0TkRoak1DMDBMalF0TXk0MkxUZ3RPQzA0U0RNeU9HTXROQzQwSURBdE9DQXpMall0T0NBNGRqUTRZekFnTkM0MElETXVOaUE0SURnZ09Ib2lJQzgrUEhCaGRHZ2daRDBpVFRnNE1DQXhNVEpJTVRRMFl5MHhOeTQzSURBdE16SWdNVFF1TXkwek1pQXpNblkzTXpaak1DQXhOeTQzSURFMExqTWdNeklnTXpJZ016Sm9Oek0yWXpFM0xqY2dNQ0F6TWkweE5DNHpJRE15TFRNeVZqRTBOR013TFRFM0xqY3RNVFF1TXkwek1pMHpNaTB6TW5wdExUUXdJRGN5T0VneE9EUldNVGcwYURZMU5uWTJOVFo2SWlBdlBqd3ZjM1puUGc9PSkgKi9cbnZhciBSZWZJY29uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoTWludXNTcXVhcmVPdXRsaW5lZCk7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWZJY29uLmRpc3BsYXlOYW1lID0gJ01pbnVzU3F1YXJlT3V0bGluZWQnO1xufVxuZXhwb3J0IGRlZmF1bHQgUmVmSWNvbjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/PlusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\n\n/**![plus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMTUydjE1MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjU0NGgxNTJjNC40IDAgOC0zLjYgOC04di00OGMwLTQuNC0zLjYtOC04LThINTQ0VjMyOGMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh2MTUySDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(PlusSquareOutlined);\nif (true) {\n  RefIcon.displayName = 'PlusSquareOutlined';\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RefIcon);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzP2M0NjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG4vLyBHRU5FUkFURSBCWSAuL3NjcmlwdHMvZ2VuZXJhdGUudHNcbi8vIERPTiBOT1QgRURJVCBJVCBNQU5VQUxMWVxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUGx1c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL1BsdXNTcXVhcmVPdXRsaW5lZFwiO1xuaW1wb3J0IEFudGRJY29uIGZyb20gXCIuLi9jb21wb25lbnRzL0FudGRJY29uXCI7XG52YXIgUGx1c1NxdWFyZU91dGxpbmVkID0gZnVuY3Rpb24gUGx1c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFudGRJY29uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZixcbiAgICBpY29uOiBQbHVzU3F1YXJlT3V0bGluZWRTdmdcbiAgfSkpO1xufTtcblxuLyoqIVtwbHVzLXNxdWFyZV0oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTlRBaUlHaGxhV2RvZEQwaU5UQWlJR1pwYkd3OUlpTmpZV05oWTJFaUlIWnBaWGRDYjNnOUlqWTBJRFkwSURnNU5pQTRPVFlpSUdadlkzVnpZV0pzWlQwaVptRnNjMlVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEhCaGRHZ2daRDBpVFRNeU9DQTFORFJvTVRVeWRqRTFNbU13SURRdU5DQXpMallnT0NBNElEaG9ORGhqTkM0MElEQWdPQzB6TGpZZ09DMDRWalUwTkdneE5USmpOQzQwSURBZ09DMHpMallnT0MwNGRpMDBPR013TFRRdU5DMHpMall0T0MwNExUaElOVFEwVmpNeU9HTXdMVFF1TkMwekxqWXRPQzA0TFRob0xUUTRZeTAwTGpRZ01DMDRJRE11TmkwNElEaDJNVFV5U0RNeU9HTXROQzQwSURBdE9DQXpMall0T0NBNGRqUTRZekFnTkM0MElETXVOaUE0SURnZ09Ib2lJQzgrUEhCaGRHZ2daRDBpVFRnNE1DQXhNVEpJTVRRMFl5MHhOeTQzSURBdE16SWdNVFF1TXkwek1pQXpNblkzTXpaak1DQXhOeTQzSURFMExqTWdNeklnTXpJZ016Sm9Oek0yWXpFM0xqY2dNQ0F6TWkweE5DNHpJRE15TFRNeVZqRTBOR013TFRFM0xqY3RNVFF1TXkwek1pMHpNaTB6TW5wdExUUXdJRGN5T0VneE9EUldNVGcwYURZMU5uWTJOVFo2SWlBdlBqd3ZjM1puUGc9PSkgKi9cbnZhciBSZWZJY29uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoUGx1c1NxdWFyZU91dGxpbmVkKTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFJlZkljb24uZGlzcGxheU5hbWUgPSAnUGx1c1NxdWFyZU91dGxpbmVkJztcbn1cbmV4cG9ydCBkZWZhdWx0IFJlZkljb247Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx":
/*!******************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx ***!
  \******************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _TableRenderers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableRenderers */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\nclass PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  render() {\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer, { ...this.props });\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nPivotTable.propTypes = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.propTypes;\nPivotTable.defaultProps = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.defaultProps;const _default =\n\nPivotTable;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PivotTable, \"PivotTable\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\PivotTable.jsx\");reactHotLoader.register(_default, \"default\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\PivotTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9QaXZvdFRhYmxlLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvUGl2b3RUYWJsZS5qc3g/OWY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vVGFibGVSZW5kZXJlcnMnO1xyXG5cclxuY2xhc3MgUGl2b3RUYWJsZSBleHRlbmRzIFB1cmVDb21wb25lbnQge1xyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiA8VGFibGVSZW5kZXJlciB7Li4udGhpcy5wcm9wc30gLz47XHJcbiAgfVxyXG59XHJcblxyXG5QaXZvdFRhYmxlLnByb3BUeXBlcyA9IFRhYmxlUmVuZGVyZXIucHJvcFR5cGVzO1xyXG5QaXZvdFRhYmxlLmRlZmF1bHRQcm9wcyA9IFRhYmxlUmVuZGVyZXIuZGVmYXVsdFByb3BzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGl2b3RUYWJsZTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js":
/*!*************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js ***!
  \*************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Styles: () => (/* binding */ Styles)\n/* harmony export */ });\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-react.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.styled.div`\n  ${({ theme, isDashboardEditMode }) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.css)`\n    table.pvtTable {\n      position: ${isDashboardEditMode ? 'inherit' : 'relative'};\n      width: calc(100% - ${theme.gridUnit}px);\n      font-size: ${theme.typography.sizes.s}px;\n      text-align: left;\n      margin: ${theme.gridUnit}px;\n      border-collapse: separate;\n      font-family: ${theme.typography.families.sansSerif};\n      line-height: 1.4;\n    }\n\n    table thead {\n      position: ${isDashboardEditMode ? 'inherit' : 'sticky'};\n      top: 0;\n    }\n\n    table tbody tr {\n      font-feature-settings: 'tnum' 1;\n    }\n\n    table.pvtTable thead tr th,\n    table.pvtTable tbody tr th {\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      font-size: ${theme.typography.sizes.s}px;\n      padding: ${theme.gridUnit}px;\n      font-weight: ${theme.typography.weights.normal};\n    }\n\n    table.pvtTable tbody tr.pvtRowTotals {\n      position: ${isDashboardEditMode ? 'inherit' : 'sticky'};\n      bottom: 0;\n    }\n\n    table.pvtTable thead tr:last-of-type th,\n    table.pvtTable thead tr:first-of-type th.pvtTotalLabel,\n    table.pvtTable thead tr:nth-last-of-type(2) th.pvtColLabel,\n    table.pvtTable thead th.pvtSubtotalLabel,\n    table.pvtTable tbody tr:last-of-type th,\n    table.pvtTable tbody tr:last-of-type td {\n      border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      ~ th.pvtColLabel,\n    table.pvtTable tbody tr:first-of-type th,\n    table.pvtTable tbody tr:first-of-type td {\n      border-top: none;\n    }\n\n    table.pvtTable tbody tr td:last-of-type,\n    table.pvtTable thead tr th:last-of-type:not(.pvtSubtotalLabel) {\n      border-right: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      + .pvtTotalLabel {\n      border-right: none;\n    }\n\n    table.pvtTable tr th.active {\n      background-color: ${theme.colors.primary.light3};\n    }\n\n    table.pvtTable .pvtTotalLabel {\n      text-align: right;\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable .pvtSubtotalLabel {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td {\n      color: ${theme.colors.primary.dark2};\n      padding: ${theme.gridUnit}px;\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      vertical-align: top;\n      text-align: right;\n    }\n\n    table.pvtTable tbody tr th.pvtRowLabel {\n      vertical-align: baseline;\n    }\n\n    .pvtTotal,\n    .pvtGrandTotal {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td.pvtRowTotal {\n      vertical-align: middle;\n    }\n\n    .toggle-wrapper {\n      white-space: nowrap;\n    }\n\n    .toggle-wrapper > .toggle-val {\n      white-space: normal;\n    }\n\n    .toggle {\n      padding-right: ${theme.gridUnit}px;\n      cursor: pointer;\n    }\n\n    .hoverable:hover {\n      background-color: ${theme.colors.primary.light4};\n      cursor: pointer;\n    }\n  `}\n`;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\Styles.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanM/MDhhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgY3NzLCBzdHlsZWQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdmBcclxuICAkeyh7IHRoZW1lLCBpc0Rhc2hib2FyZEVkaXRNb2RlIH0pID0+IGNzc2BcclxuICAgIHRhYmxlLnB2dFRhYmxlIHtcclxuICAgICAgcG9zaXRpb246ICR7aXNEYXNoYm9hcmRFZGl0TW9kZSA/ICdpbmhlcml0JyA6ICdyZWxhdGl2ZSd9O1xyXG4gICAgICB3aWR0aDogY2FsYygxMDAlIC0gJHt0aGVtZS5ncmlkVW5pdH1weCk7XHJcbiAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XHJcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgIG1hcmdpbjogJHt0aGVtZS5ncmlkVW5pdH1weDtcclxuICAgICAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcclxuICAgICAgZm9udC1mYW1pbHk6ICR7dGhlbWUudHlwb2dyYXBoeS5mYW1pbGllcy5zYW5zU2VyaWZ9O1xyXG4gICAgICBsaW5lLWhlaWdodDogMS40O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlIHRoZWFkIHtcclxuICAgICAgcG9zaXRpb246ICR7aXNEYXNoYm9hcmRFZGl0TW9kZSA/ICdpbmhlcml0JyA6ICdzdGlja3knfTtcclxuICAgICAgdG9wOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlIHRib2R5IHRyIHtcclxuICAgICAgZm9udC1mZWF0dXJlLXNldHRpbmdzOiAndG51bScgMTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0aGVhZCB0ciB0aCxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyIHRoIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0NX07XHJcbiAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICAgICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMuc31weDtcclxuICAgICAgcGFkZGluZzogJHt0aGVtZS5ncmlkVW5pdH1weDtcclxuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUudHlwb2dyYXBoeS53ZWlnaHRzLm5vcm1hbH07XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIucHZ0Um93VG90YWxzIHtcclxuICAgICAgcG9zaXRpb246ICR7aXNEYXNoYm9hcmRFZGl0TW9kZSA/ICdpbmhlcml0JyA6ICdzdGlja3knfTtcclxuICAgICAgYm90dG9tOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyOmxhc3Qtb2YtdHlwZSB0aCxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyOmZpcnN0LW9mLXR5cGUgdGgucHZ0VG90YWxMYWJlbCxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyOm50aC1sYXN0LW9mLXR5cGUoMikgdGgucHZ0Q29sTGFiZWwsXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0aGVhZCB0aC5wdnRTdWJ0b3RhbExhYmVsLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6bGFzdC1vZi10eXBlIHRoLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6bGFzdC1vZi10eXBlIHRkIHtcclxuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlXHJcbiAgICAgIHRoZWFkXHJcbiAgICAgIHRyOmxhc3Qtb2YtdHlwZTpub3QoOm9ubHktY2hpbGQpXHJcbiAgICAgIHRoLnB2dEF4aXNMYWJlbFxyXG4gICAgICB+IHRoLnB2dENvbExhYmVsLFxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6Zmlyc3Qtb2YtdHlwZSB0aCxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyOmZpcnN0LW9mLXR5cGUgdGQge1xyXG4gICAgICBib3JkZXItdG9wOiBub25lO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyIHRkOmxhc3Qtb2YtdHlwZSxcclxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyIHRoOmxhc3Qtb2YtdHlwZTpub3QoLnB2dFN1YnRvdGFsTGFiZWwpIHtcclxuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0Mn07XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGVcclxuICAgICAgdGhlYWRcclxuICAgICAgdHI6bGFzdC1vZi10eXBlOm5vdCg6b25seS1jaGlsZClcclxuICAgICAgdGgucHZ0QXhpc0xhYmVsXHJcbiAgICAgICsgLnB2dFRvdGFsTGFiZWwge1xyXG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdHIgdGguYWN0aXZlIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeS5saWdodDN9O1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLnB2dFRhYmxlIC5wdnRUb3RhbExhYmVsIHtcclxuICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSAucHZ0U3VidG90YWxMYWJlbCB7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0ZCB7XHJcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LmRhcmsyfTtcclxuICAgICAgcGFkZGluZzogJHt0aGVtZS5ncmlkVW5pdH1weDtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0NX07XHJcbiAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcclxuICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGgucHZ0Um93TGFiZWwge1xyXG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLnB2dFRvdGFsLFxyXG4gICAgLnB2dEdyYW5kVG90YWwge1xyXG4gICAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGQucHZ0Um93VG90YWwge1xyXG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgfVxyXG5cclxuICAgIC50b2dnbGUtd3JhcHBlciB7XHJcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLnRvZ2dsZS13cmFwcGVyID4gLnRvZ2dsZS12YWwge1xyXG4gICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xyXG4gICAgfVxyXG5cclxuICAgIC50b2dnbGUge1xyXG4gICAgICBwYWRkaW5nLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0fXB4O1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLmhvdmVyYWJsZTpob3ZlciB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkubGlnaHQ0fTtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgfVxyXG4gIGB9XHJcbmA7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx":
/*!**********************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx ***!
  \**********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableRenderer: () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/html.tsx\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _Styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Styles */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\n\n\nconst parseLabel = (value) => {\n  if (typeof value === 'string') {\n    if (value === 'metric') return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('metric');\n    return value;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  return String(value);\n};\n\nfunction displayHeaderCell(\nneedToggle,\nArrowIcon,\nonArrowClick,\nvalue,\nnamesMapping,\nallowRenderHtml)\n{\n  const name = namesMapping[value] || value;\n  const parsedLabel = parseLabel(name);\n  const labelContent =\n  allowRenderHtml && typeof parsedLabel === 'string' ?\n  (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.safeHtmlSpan)(parsedLabel) :\n  parsedLabel;\n  return needToggle ?\n  (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", { className: \"toggle-wrapper\", children: [\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", {\n      role: \"button\",\n      tabIndex: \"0\",\n      className: \"toggle\",\n      onClick: onArrowClick, children:\n\n      ArrowIcon }\n    ),\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"toggle-val\", children: labelContent })] }\n  ) :\n\n  labelContent;\n\n}\n\nclass TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n\n    // We need state to record which entries are collapsed and which aren't.\n    // This is an object with flat-keys indicating if the corresponding rows\n    // should be collapsed.\n    this.state = { collapsedRows: {}, collapsedCols: {} };\n\n    this.clickHeaderHandler = this.clickHeaderHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  getBasePivotSettings() {\n    // One-time extraction of pivot settings that we'll use throughout the render.\n\n    const { props } = this;\n    const colAttrs = props.cols;\n    const rowAttrs = props.rows;\n\n    const tableOptions = {\n      rowTotals: true,\n      colTotals: true,\n      ...props.tableOptions\n    };\n    const rowTotals = tableOptions.rowTotals || colAttrs.length === 0;\n    const colTotals = tableOptions.colTotals || rowAttrs.length === 0;\n\n    const namesMapping = props.namesMapping || {};\n    const subtotalOptions = {\n      arrowCollapsed: '\\u25B2',\n      arrowExpanded: '\\u25BC',\n      ...props.subtotalOptions\n    };\n\n    const colSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.colSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.colSubtotalDisplay\n    };\n\n    const rowSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.rowSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.rowSubtotalDisplay\n    };\n\n    const pivotData = new _utilities__WEBPACK_IMPORTED_MODULE_4__.PivotData(props, {\n      rowEnabled: rowSubtotalDisplay.enabled,\n      colEnabled: colSubtotalDisplay.enabled,\n      rowPartialOnTop: rowSubtotalDisplay.displayOnTop,\n      colPartialOnTop: colSubtotalDisplay.displayOnTop\n    });\n    const rowKeys = pivotData.getRowKeys();\n    const colKeys = pivotData.getColKeys();\n\n    // Also pre-calculate all the callbacks for cells, etc... This is nice to have to\n    // avoid re-calculations of the call-backs on cell expansions, etc...\n    const cellCallbacks = {};\n    const rowTotalCallbacks = {};\n    const colTotalCallbacks = {};\n    let grandTotalCallback = null;\n    if (tableOptions.clickCallback) {\n      rowKeys.forEach((rowKey) => {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(rowKey);\n        if (!(flatRowKey in cellCallbacks)) {\n          cellCallbacks[flatRowKey] = {};\n        }\n        colKeys.forEach((colKey) => {\n          cellCallbacks[flatRowKey][(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            colKey\n          );\n        });\n      });\n\n      // Add in totals as well.\n      if (rowTotals) {\n        rowKeys.forEach((rowKey) => {\n          rowTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(rowKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            []\n          );\n        });\n      }\n      if (colTotals) {\n        colKeys.forEach((colKey) => {\n          colTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            [],\n            colKey\n          );\n        });\n      }\n      if (rowTotals && colTotals) {\n        grandTotalCallback = this.clickHandler(pivotData, [], []);\n      }\n    }\n\n    return {\n      pivotData,\n      colAttrs,\n      rowAttrs,\n      colKeys,\n      rowKeys,\n      rowTotals,\n      colTotals,\n      arrowCollapsed: subtotalOptions.arrowCollapsed,\n      arrowExpanded: subtotalOptions.arrowExpanded,\n      colSubtotalDisplay,\n      rowSubtotalDisplay,\n      cellCallbacks,\n      rowTotalCallbacks,\n      colTotalCallbacks,\n      grandTotalCallback,\n      namesMapping,\n      allowRenderHtml: props.allowRenderHtml\n    };\n  }\n\n  clickHandler(pivotData, rowValues, colValues) {\n    const colAttrs = this.props.cols;\n    const rowAttrs = this.props.rows;\n    const value = pivotData.getAggregator(rowValues, colValues).value();\n    const filters = {};\n    const colLimit = Math.min(colAttrs.length, colValues.length);\n    for (let i = 0; i < colLimit; i += 1) {\n      const attr = colAttrs[i];\n      if (colValues[i] !== null) {\n        filters[attr] = colValues[i];\n      }\n    }\n    const rowLimit = Math.min(rowAttrs.length, rowValues.length);\n    for (let i = 0; i < rowLimit; i += 1) {\n      const attr = rowAttrs[i];\n      if (rowValues[i] !== null) {\n        filters[attr] = rowValues[i];\n      }\n    }\n    return (e) =>\n    this.props.tableOptions.clickCallback(e, value, filters, pivotData);\n  }\n\n  clickHeaderHandler(\n  pivotData,\n  values,\n  attrs,\n  attrIdx,\n  callback,\n  isSubtotal = false,\n  isGrandTotal = false)\n  {\n    const filters = {};\n    for (let i = 0; i <= attrIdx; i += 1) {\n      const attr = attrs[i];\n      filters[attr] = values[i];\n    }\n    return (e) =>\n    callback(\n      e,\n      values[attrIdx],\n      filters,\n      pivotData,\n      isSubtotal,\n      isGrandTotal\n    );\n  }\n\n  collapseAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Collapse an entire attribute.\n      e.stopPropagation();\n      const keyLen = attrIdx + 1;\n      const collapsed = allKeys.filter((k) => k.length === keyLen).map(_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey);\n\n      const updates = {};\n      collapsed.forEach((k) => {\n        updates[k] = true;\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates }\n        }));\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates }\n        }));\n      }\n    };\n  }\n\n  expandAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Expand an entire attribute. This implicitly implies expanding all of the\n      // parents as well. It's a bit inefficient but ah well...\n      e.stopPropagation();\n      const updates = {};\n      allKeys.forEach((k) => {\n        for (let i = 0; i <= attrIdx; i += 1) {\n          updates[(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(k.slice(0, i + 1))] = false;\n        }\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates }\n        }));\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates }\n        }));\n      }\n    };\n  }\n\n  toggleRowKey(flatRowKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedRows: {\n          ...state.collapsedRows,\n          [flatRowKey]: !state.collapsedRows[flatRowKey]\n        }\n      }));\n    };\n  }\n\n  toggleColKey(flatColKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedCols: {\n          ...state.collapsedCols,\n          [flatColKey]: !state.collapsedCols[flatColKey]\n        }\n      }));\n    };\n  }\n\n  calcAttrSpans(attrArr, numAttrs) {\n    // Given an array of attribute values (i.e. each element is another array with\n    // the value at every level), compute the spans for every attribute value at\n    // every level. The return value is a nested array of the same shape. It has\n    // -1's for repeated values and the span number otherwise.\n\n    const spans = [];\n    // Index of the last new value\n    const li = Array(numAttrs).map(() => 0);\n    let lv = Array(numAttrs).map(() => null);\n    for (let i = 0; i < attrArr.length; i += 1) {\n      // Keep increasing span values as long as the last keys are the same. For\n      // the rest, record spans of 1. Update the indices too.\n      const cv = attrArr[i];\n      const ent = [];\n      let depth = 0;\n      const limit = Math.min(lv.length, cv.length);\n      while (depth < limit && lv[depth] === cv[depth]) {\n        ent.push(-1);\n        spans[li[depth]][depth] += 1;\n        depth += 1;\n      }\n      while (depth < cv.length) {\n        li[depth] = i;\n        ent.push(1);\n        depth += 1;\n      }\n      spans.push(ent);\n      lv = cv;\n    }\n    return spans;\n  }\n\n  renderColHeaderRow(attrName, attrIdx, pivotSettings) {\n    // Render a single row in the column header at the top of the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      colKeys,\n      visibleColKeys,\n      colAttrSpans,\n      rowTotals,\n      arrowExpanded,\n      arrowCollapsed,\n      colSubtotalDisplay,\n      maxColVisible,\n      pivotData,\n      namesMapping,\n      allowRenderHtml\n    } = pivotSettings;\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      dateFormatters\n    } = this.props.tableOptions;\n\n    const spaceCell =\n    attrIdx === 0 && rowAttrs.length !== 0 ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n\n      colSpan: rowAttrs.length,\n      rowSpan: colAttrs.length,\n      \"aria-hidden\": \"true\" }, \"padding\"\n    ) :\n    null;\n\n    const needToggle =\n    colSubtotalDisplay.enabled && attrIdx !== colAttrs.length - 1;\n    let arrowClickHandle = null;\n    let subArrow = null;\n    if (needToggle) {\n      arrowClickHandle =\n      attrIdx + 1 < maxColVisible ?\n      this.collapseAttr(false, attrIdx, colKeys) :\n      this.expandAttr(false, attrIdx, colKeys);\n      subArrow = attrIdx + 1 < maxColVisible ? arrowExpanded : arrowCollapsed;\n    }\n    const attrNameCell =\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", { className: \"pvtAxisLabel\", children:\n      displayHeaderCell(\n        needToggle,\n        subArrow,\n        arrowClickHandle,\n        attrName,\n        namesMapping,\n        allowRenderHtml\n      ) }, \"label\"\n    );\n\n\n    const attrValueCells = [];\n    const rowIncrSpan = rowAttrs.length !== 0 ? 1 : 0;\n    // Iterate through columns. Jump over duplicate values.\n    let i = 0;\n    while (i < visibleColKeys.length) {\n      let handleContextMenu;\n      const colKey = visibleColKeys[i];\n      const colSpan = attrIdx < colKey.length ? colAttrSpans[i][attrIdx] : 1;\n      let colLabelClass = 'pvtColLabel';\n      if (attrIdx < colKey.length) {\n        if (!omittedHighlightHeaderGroups.includes(colAttrs[attrIdx])) {\n          if (highlightHeaderCellsOnHover) {\n            colLabelClass += ' hoverable';\n          }\n          handleContextMenu = (e) =>\n          this.props.onContextMenu(e, colKey, undefined, {\n            [attrName]: colKey[attrIdx]\n          });\n        }\n        if (\n        highlightedHeaderCells &&\n        Array.isArray(highlightedHeaderCells[colAttrs[attrIdx]]) &&\n        highlightedHeaderCells[colAttrs[attrIdx]].includes(colKey[attrIdx]))\n        {\n          colLabelClass += ' active';\n        }\n\n        const rowSpan = 1 + (attrIdx === colAttrs.length - 1 ? rowIncrSpan : 0);\n        const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey.slice(0, attrIdx + 1));\n        const onArrowClick = needToggle ? this.toggleColKey(flatColKey) : null;\n\n        const headerCellFormattedValue =\n        dateFormatters &&\n        dateFormatters[attrName] &&\n        typeof dateFormatters[attrName] === 'function' ?\n        dateFormatters[attrName](colKey[attrIdx]) :\n        colKey[attrIdx];\n        attrValueCells.push(\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n            className: colLabelClass,\n\n            colSpan: colSpan,\n            rowSpan: rowSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              colKey,\n              this.props.cols,\n              attrIdx,\n              this.props.tableOptions.clickColumnHeaderCallback\n            ),\n            onContextMenu: handleContextMenu, children:\n\n            displayHeaderCell(\n              needToggle,\n              this.state.collapsedCols[flatColKey] ?\n              arrowCollapsed :\n              arrowExpanded,\n              onArrowClick,\n              headerCellFormattedValue,\n              namesMapping,\n              allowRenderHtml\n            ) }, `colKey-${flatColKey}`\n          )\n        );\n      } else if (attrIdx === colKey.length) {\n        const rowSpan = colAttrs.length - colKey.length + rowIncrSpan;\n        attrValueCells.push(\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n            className: `${colLabelClass} pvtSubtotalLabel`,\n\n            colSpan: colSpan,\n            rowSpan: rowSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              colKey,\n              this.props.cols,\n              attrIdx,\n              this.props.tableOptions.clickColumnHeaderCallback,\n              true\n            ), children:\n\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Subtotal') }, `colKeyBuffer-${(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey)}`\n          )\n        );\n      }\n      // The next colSpan columns will have the same value anyway...\n      i += colSpan;\n    }\n\n    const totalCell =\n    attrIdx === 0 && rowTotals ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n\n      className: \"pvtTotalLabel\",\n      rowSpan: colAttrs.length + Math.min(rowAttrs.length, 1),\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.cols,\n        attrIdx,\n        this.props.tableOptions.clickColumnHeaderCallback,\n        false,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n        aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n      }) }, \"total\"\n    ) :\n    null;\n\n    const cells = [spaceCell, attrNameCell, ...attrValueCells, totalCell];\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"tr\", { children: cells }, `colAttr-${attrIdx}`);\n  }\n\n  renderRowHeaderRow(pivotSettings) {\n    // Render just the attribute names of the rows (the actual attribute values\n    // will show up in the individual rows).\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowKeys,\n      arrowCollapsed,\n      arrowExpanded,\n      rowSubtotalDisplay,\n      maxRowVisible,\n      pivotData,\n      namesMapping,\n      allowRenderHtml\n    } = pivotSettings;\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"tr\", { children: [\n        rowAttrs.map((r, i) => {\n          const needLabelToggle =\n          rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n          let arrowClickHandle = null;\n          let subArrow = null;\n          if (needLabelToggle) {\n            arrowClickHandle =\n            i + 1 < maxRowVisible ?\n            this.collapseAttr(true, i, rowKeys) :\n            this.expandAttr(true, i, rowKeys);\n            subArrow = i + 1 < maxRowVisible ? arrowExpanded : arrowCollapsed;\n          }\n          return (\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", { className: \"pvtAxisLabel\", children:\n              displayHeaderCell(\n                needLabelToggle,\n                subArrow,\n                arrowClickHandle,\n                r,\n                namesMapping,\n                allowRenderHtml\n              ) }, `rowAttr-${i}`\n            ));\n\n        }),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n          className: \"pvtTotalLabel\",\n\n          role: \"columnheader button\",\n          onClick: this.clickHeaderHandler(\n            pivotData,\n            [],\n            this.props.rows,\n            0,\n            this.props.tableOptions.clickRowHeaderCallback,\n            false,\n            true\n          ), children:\n\n          colAttrs.length === 0 ?\n          (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n            aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n          }) :\n          null }, \"padding\"\n        )] }, \"rowHdr\"\n      ));\n\n  }\n\n  renderTableRow(rowKey, rowIdx, pivotSettings) {\n    // Render a single row in the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowAttrSpans,\n      visibleColKeys,\n      pivotData,\n      rowTotals,\n      rowSubtotalDisplay,\n      arrowExpanded,\n      arrowCollapsed,\n      cellCallbacks,\n      rowTotalCallbacks,\n      namesMapping,\n      allowRenderHtml\n    } = pivotSettings;\n\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      cellColorFormatters,\n      dateFormatters\n    } = this.props.tableOptions;\n    const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(rowKey);\n\n    const colIncrSpan = colAttrs.length !== 0 ? 1 : 0;\n    const attrValueCells = rowKey.map((r, i) => {\n      let handleContextMenu;\n      let valueCellClassName = 'pvtRowLabel';\n      if (!omittedHighlightHeaderGroups.includes(rowAttrs[i])) {\n        if (highlightHeaderCellsOnHover) {\n          valueCellClassName += ' hoverable';\n        }\n        handleContextMenu = (e) =>\n        this.props.onContextMenu(e, undefined, rowKey, {\n          [rowAttrs[i]]: r\n        });\n      }\n      if (\n      highlightedHeaderCells &&\n      Array.isArray(highlightedHeaderCells[rowAttrs[i]]) &&\n      highlightedHeaderCells[rowAttrs[i]].includes(r))\n      {\n        valueCellClassName += ' active';\n      }\n      const rowSpan = rowAttrSpans[rowIdx][i];\n      if (rowSpan > 0) {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(rowKey.slice(0, i + 1));\n        const colSpan = 1 + (i === rowAttrs.length - 1 ? colIncrSpan : 0);\n        const needRowToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        const onArrowClick = needRowToggle ?\n        this.toggleRowKey(flatRowKey) :\n        null;\n\n        const headerCellFormattedValue =\n        dateFormatters && dateFormatters[rowAttrs[i]] ?\n        dateFormatters[rowAttrs[i]](r) :\n        r;\n        return (\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n\n            className: valueCellClassName,\n            rowSpan: rowSpan,\n            colSpan: colSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              rowKey,\n              this.props.rows,\n              i,\n              this.props.tableOptions.clickRowHeaderCallback\n            ),\n            onContextMenu: handleContextMenu, children:\n\n            displayHeaderCell(\n              needRowToggle,\n              this.state.collapsedRows[flatRowKey] ?\n              arrowCollapsed :\n              arrowExpanded,\n              onArrowClick,\n              headerCellFormattedValue,\n              namesMapping,\n              allowRenderHtml\n            ) }, `rowKeyLabel-${i}`\n          ));\n\n      }\n      return null;\n    });\n\n    const attrValuePaddingCell =\n    rowKey.length < rowAttrs.length ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n      className: \"pvtRowLabel pvtSubtotalLabel\",\n\n      colSpan: rowAttrs.length - rowKey.length + colIncrSpan,\n      rowSpan: 1,\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        rowKey,\n        this.props.rows,\n        rowKey.length,\n        this.props.tableOptions.clickRowHeaderCallback,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Subtotal') }, \"rowKeyBuffer\"\n    ) :\n    null;\n\n    const rowClickHandlers = cellCallbacks[flatRowKey] || {};\n    const valueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey);\n      const agg = pivotData.getAggregator(rowKey, colKey);\n      const aggValue = agg.value();\n\n      const keys = [...rowKey, ...colKey];\n      let backgroundColor;\n      if (cellColorFormatters) {\n        Object.values(cellColorFormatters).forEach((cellColorFormatter) => {\n          if (Array.isArray(cellColorFormatter)) {\n            keys.forEach((key) => {\n              if (backgroundColor) {\n                return;\n              }\n              cellColorFormatter.\n              filter((formatter) => formatter.column === key).\n              forEach((formatter) => {\n                const formatterResult = formatter.getColorFromValue(aggValue);\n                if (formatterResult) {\n                  backgroundColor = formatterResult;\n                }\n              });\n            });\n          }\n        });\n      }\n\n      const style = agg.isSubtotal ?\n      { fontWeight: 'bold' } :\n      { backgroundColor };\n\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtVal\",\n\n          onClick: rowClickHandlers[flatColKey],\n          onContextMenu: (e) => this.props.onContextMenu(e, colKey, rowKey),\n          style: style, children:\n\n          agg.format(aggValue) }, `pvtVal-${flatColKey}`\n        ));\n\n    });\n\n    let totalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator(rowKey, []);\n      const aggValue = agg.value();\n      totalCell =\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"td\", {\n        role: \"gridcell\",\n\n        className: \"pvtTotal\",\n        onClick: rowTotalCallbacks[flatRowKey],\n        onContextMenu: (e) => this.props.onContextMenu(e, undefined, rowKey), children:\n\n        agg.format(aggValue) }, \"total\"\n      );\n\n    }\n\n    const rowCells = [\n    ...attrValueCells,\n    attrValuePaddingCell,\n    ...valueCells,\n    totalCell];\n\n\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"tr\", { children: rowCells }, `keyRow-${flatRowKey}`);\n  }\n\n  renderTotalsRow(pivotSettings) {\n    // Render the final totals rows that has the totals for all the columns.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      visibleColKeys,\n      rowTotals,\n      pivotData,\n      colTotalCallbacks,\n      grandTotalCallback\n    } = pivotSettings;\n\n    const totalLabelCell =\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"th\", {\n\n      className: \"pvtTotalLabel pvtRowTotalLabel\",\n      colSpan: rowAttrs.length + Math.min(colAttrs.length, 1),\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.rows,\n        0,\n        this.props.tableOptions.clickRowHeaderCallback,\n        false,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n        aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n      }) }, \"label\"\n    );\n\n\n    const totalValueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(colKey);\n      const agg = pivotData.getAggregator([], colKey);\n      const aggValue = agg.value();\n\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtTotal pvtRowTotal\",\n\n          onClick: colTotalCallbacks[flatColKey],\n          onContextMenu: (e) => this.props.onContextMenu(e, colKey, undefined),\n          style: { padding: '5px' }, children:\n\n          agg.format(aggValue) }, `total-${flatColKey}`\n        ));\n\n    });\n\n    let grandTotalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator([], []);\n      const aggValue = agg.value();\n      grandTotalCell =\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"td\", {\n        role: \"gridcell\",\n\n        className: \"pvtGrandTotal pvtRowTotal\",\n        onClick: grandTotalCallback,\n        onContextMenu: (e) => this.props.onContextMenu(e, undefined, undefined), children:\n\n        agg.format(aggValue) }, \"total\"\n      );\n\n    }\n\n    const totalCells = [totalLabelCell, ...totalValueCells, grandTotalCell];\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"tr\", { className: \"pvtRowTotals\", children:\n        totalCells }, \"total\"\n      ));\n\n  }\n\n  visibleKeys(keys, collapsed, numAttrs, subtotalDisplay) {\n    return keys.filter(\n      (key) =>\n      // Is the key hidden by one of its parents?\n      !key.some((k, j) => collapsed[(0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(key.slice(0, j))]) && (\n      // Leaf key.\n      key.length === numAttrs ||\n      // Children hidden. Must show total.\n      (0,_utilities__WEBPACK_IMPORTED_MODULE_4__.flatKey)(key) in collapsed ||\n      // Don't hide totals.\n      !subtotalDisplay.hideOnExpand)\n    );\n  }\n\n  isDashboardEditMode() {\n    return document.contains(document.querySelector('.dashboard--editing'));\n  }\n\n  render() {\n    if (this.cachedProps !== this.props) {\n      this.cachedProps = this.props;\n      this.cachedBasePivotSettings = this.getBasePivotSettings();\n    }\n    const {\n      colAttrs,\n      rowAttrs,\n      rowKeys,\n      colKeys,\n      colTotals,\n      rowSubtotalDisplay,\n      colSubtotalDisplay,\n      allowRenderHtml\n    } = this.cachedBasePivotSettings;\n\n    // Need to account for exclusions to compute the effective row\n    // and column keys.\n    const visibleRowKeys = this.visibleKeys(\n      rowKeys,\n      this.state.collapsedRows,\n      rowAttrs.length,\n      rowSubtotalDisplay\n    );\n    const visibleColKeys = this.visibleKeys(\n      colKeys,\n      this.state.collapsedCols,\n      colAttrs.length,\n      colSubtotalDisplay\n    );\n\n    const pivotSettings = {\n      visibleRowKeys,\n      maxRowVisible: Math.max(...visibleRowKeys.map((k) => k.length)),\n      visibleColKeys,\n      maxColVisible: Math.max(...visibleColKeys.map((k) => k.length)),\n      rowAttrSpans: this.calcAttrSpans(visibleRowKeys, rowAttrs.length),\n      colAttrSpans: this.calcAttrSpans(visibleColKeys, colAttrs.length),\n      allowRenderHtml,\n      ...this.cachedBasePivotSettings\n    };\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Styles__WEBPACK_IMPORTED_MODULE_5__.Styles, { isDashboardEditMode: this.isDashboardEditMode(), children:\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"table\", { className: \"pvtTable\", role: \"grid\", children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"thead\", { children: [\n            colAttrs.map((c, j) =>\n            this.renderColHeaderRow(c, j, pivotSettings)\n            ),\n            rowAttrs.length !== 0 && this.renderRowHeaderRow(pivotSettings)] }\n          ),\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"tbody\", { children: [\n            visibleRowKeys.map((r, i) =>\n            this.renderTableRow(r, i, pivotSettings)\n            ),\n            colTotals && this.renderTotalsRow(pivotSettings)] }\n          )] }\n        ) }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableRenderer.propTypes = {\n  ..._utilities__WEBPACK_IMPORTED_MODULE_4__.PivotData.propTypes,\n  tableOptions: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().object),\n  onContextMenu: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().func)\n};\nTableRenderer.defaultProps = { ..._utilities__WEBPACK_IMPORTED_MODULE_4__.PivotData.defaultProps, tableOptions: {} };;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(parseLabel, \"parseLabel\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");reactHotLoader.register(displayHeaderCell, \"displayHeaderCell\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");reactHotLoader.register(TableRenderer, \"TableRenderer\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\TableRenderers.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvVGFibGVSZW5kZXJlcnMuanN4PzQ3NmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdCwgc2FmZUh0bWxTcGFuIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgeyBQaXZvdERhdGEsIGZsYXRLZXkgfSBmcm9tICcuL3V0aWxpdGllcyc7XHJcbmltcG9ydCB7IFN0eWxlcyB9IGZyb20gJy4vU3R5bGVzJztcclxuXHJcbmNvbnN0IHBhcnNlTGFiZWwgPSB2YWx1ZSA9PiB7XHJcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gJ21ldHJpYycpIHJldHVybiB0KCdtZXRyaWMnKTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5SGVhZGVyQ2VsbChcclxuICBuZWVkVG9nZ2xlLFxyXG4gIEFycm93SWNvbixcclxuICBvbkFycm93Q2xpY2ssXHJcbiAgdmFsdWUsXHJcbiAgbmFtZXNNYXBwaW5nLFxyXG4gIGFsbG93UmVuZGVySHRtbCxcclxuKSB7XHJcbiAgY29uc3QgbmFtZSA9IG5hbWVzTWFwcGluZ1t2YWx1ZV0gfHwgdmFsdWU7XHJcbiAgY29uc3QgcGFyc2VkTGFiZWwgPSBwYXJzZUxhYmVsKG5hbWUpO1xyXG4gIGNvbnN0IGxhYmVsQ29udGVudCA9XHJcbiAgICBhbGxvd1JlbmRlckh0bWwgJiYgdHlwZW9mIHBhcnNlZExhYmVsID09PSAnc3RyaW5nJ1xyXG4gICAgICA/IHNhZmVIdG1sU3BhbihwYXJzZWRMYWJlbClcclxuICAgICAgOiBwYXJzZWRMYWJlbDtcclxuICByZXR1cm4gbmVlZFRvZ2dsZSA/IChcclxuICAgIDxzcGFuIGNsYXNzTmFtZT1cInRvZ2dsZS13cmFwcGVyXCI+XHJcbiAgICAgIDxzcGFuXHJcbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXHJcbiAgICAgICAgdGFiSW5kZXg9XCIwXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJ0b2dnbGVcIlxyXG4gICAgICAgIG9uQ2xpY2s9e29uQXJyb3dDbGlja31cclxuICAgICAgPlxyXG4gICAgICAgIHtBcnJvd0ljb259XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidG9nZ2xlLXZhbFwiPntsYWJlbENvbnRlbnR9PC9zcGFuPlxyXG4gICAgPC9zcGFuPlxyXG4gICkgOiAoXHJcbiAgICBsYWJlbENvbnRlbnRcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAvLyBXZSBuZWVkIHN0YXRlIHRvIHJlY29yZCB3aGljaCBlbnRyaWVzIGFyZSBjb2xsYXBzZWQgYW5kIHdoaWNoIGFyZW4ndC5cclxuICAgIC8vIFRoaXMgaXMgYW4gb2JqZWN0IHdpdGggZmxhdC1rZXlzIGluZGljYXRpbmcgaWYgdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xyXG4gICAgLy8gc2hvdWxkIGJlIGNvbGxhcHNlZC5cclxuICAgIHRoaXMuc3RhdGUgPSB7IGNvbGxhcHNlZFJvd3M6IHt9LCBjb2xsYXBzZWRDb2xzOiB7fSB9O1xyXG5cclxuICAgIHRoaXMuY2xpY2tIZWFkZXJIYW5kbGVyID0gdGhpcy5jbGlja0hlYWRlckhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xpY2tIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGdldEJhc2VQaXZvdFNldHRpbmdzKCkge1xyXG4gICAgLy8gT25lLXRpbWUgZXh0cmFjdGlvbiBvZiBwaXZvdCBzZXR0aW5ncyB0aGF0IHdlJ2xsIHVzZSB0aHJvdWdob3V0IHRoZSByZW5kZXIuXHJcblxyXG4gICAgY29uc3QgeyBwcm9wcyB9ID0gdGhpcztcclxuICAgIGNvbnN0IGNvbEF0dHJzID0gcHJvcHMuY29scztcclxuICAgIGNvbnN0IHJvd0F0dHJzID0gcHJvcHMucm93cztcclxuXHJcbiAgICBjb25zdCB0YWJsZU9wdGlvbnMgPSB7XHJcbiAgICAgIHJvd1RvdGFsczogdHJ1ZSxcclxuICAgICAgY29sVG90YWxzOiB0cnVlLFxyXG4gICAgICAuLi5wcm9wcy50YWJsZU9wdGlvbnMsXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgcm93VG90YWxzID0gdGFibGVPcHRpb25zLnJvd1RvdGFscyB8fCBjb2xBdHRycy5sZW5ndGggPT09IDA7XHJcbiAgICBjb25zdCBjb2xUb3RhbHMgPSB0YWJsZU9wdGlvbnMuY29sVG90YWxzIHx8IHJvd0F0dHJzLmxlbmd0aCA9PT0gMDtcclxuXHJcbiAgICBjb25zdCBuYW1lc01hcHBpbmcgPSBwcm9wcy5uYW1lc01hcHBpbmcgfHwge307XHJcbiAgICBjb25zdCBzdWJ0b3RhbE9wdGlvbnMgPSB7XHJcbiAgICAgIGFycm93Q29sbGFwc2VkOiAnXFx1MjVCMicsXHJcbiAgICAgIGFycm93RXhwYW5kZWQ6ICdcXHUyNUJDJyxcclxuICAgICAgLi4ucHJvcHMuc3VidG90YWxPcHRpb25zLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBjb2xTdWJ0b3RhbERpc3BsYXkgPSB7XHJcbiAgICAgIGRpc3BsYXlPblRvcDogZmFsc2UsXHJcbiAgICAgIGVuYWJsZWQ6IHRhYmxlT3B0aW9ucy5jb2xTdWJUb3RhbHMsXHJcbiAgICAgIGhpZGVPbkV4cGFuZDogZmFsc2UsXHJcbiAgICAgIC4uLnN1YnRvdGFsT3B0aW9ucy5jb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJvd1N1YnRvdGFsRGlzcGxheSA9IHtcclxuICAgICAgZGlzcGxheU9uVG9wOiBmYWxzZSxcclxuICAgICAgZW5hYmxlZDogdGFibGVPcHRpb25zLnJvd1N1YlRvdGFscyxcclxuICAgICAgaGlkZU9uRXhwYW5kOiBmYWxzZSxcclxuICAgICAgLi4uc3VidG90YWxPcHRpb25zLnJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcGl2b3REYXRhID0gbmV3IFBpdm90RGF0YShwcm9wcywge1xyXG4gICAgICByb3dFbmFibGVkOiByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCxcclxuICAgICAgY29sRW5hYmxlZDogY29sU3VidG90YWxEaXNwbGF5LmVuYWJsZWQsXHJcbiAgICAgIHJvd1BhcnRpYWxPblRvcDogcm93U3VidG90YWxEaXNwbGF5LmRpc3BsYXlPblRvcCxcclxuICAgICAgY29sUGFydGlhbE9uVG9wOiBjb2xTdWJ0b3RhbERpc3BsYXkuZGlzcGxheU9uVG9wLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCByb3dLZXlzID0gcGl2b3REYXRhLmdldFJvd0tleXMoKTtcclxuICAgIGNvbnN0IGNvbEtleXMgPSBwaXZvdERhdGEuZ2V0Q29sS2V5cygpO1xyXG5cclxuICAgIC8vIEFsc28gcHJlLWNhbGN1bGF0ZSBhbGwgdGhlIGNhbGxiYWNrcyBmb3IgY2VsbHMsIGV0Yy4uLiBUaGlzIGlzIG5pY2UgdG8gaGF2ZSB0b1xyXG4gICAgLy8gYXZvaWQgcmUtY2FsY3VsYXRpb25zIG9mIHRoZSBjYWxsLWJhY2tzIG9uIGNlbGwgZXhwYW5zaW9ucywgZXRjLi4uXHJcbiAgICBjb25zdCBjZWxsQ2FsbGJhY2tzID0ge307XHJcbiAgICBjb25zdCByb3dUb3RhbENhbGxiYWNrcyA9IHt9O1xyXG4gICAgY29uc3QgY29sVG90YWxDYWxsYmFja3MgPSB7fTtcclxuICAgIGxldCBncmFuZFRvdGFsQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgaWYgKHRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKSB7XHJcbiAgICAgIHJvd0tleXMuZm9yRWFjaChyb3dLZXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleSk7XHJcbiAgICAgICAgaWYgKCEoZmxhdFJvd0tleSBpbiBjZWxsQ2FsbGJhY2tzKSkge1xyXG4gICAgICAgICAgY2VsbENhbGxiYWNrc1tmbGF0Um93S2V5XSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sS2V5ID0+IHtcclxuICAgICAgICAgIGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV1bZmxhdEtleShjb2xLZXkpXSA9IHRoaXMuY2xpY2tIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIHJvd0tleSxcclxuICAgICAgICAgICAgY29sS2V5LFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBBZGQgaW4gdG90YWxzIGFzIHdlbGwuXHJcbiAgICAgIGlmIChyb3dUb3RhbHMpIHtcclxuICAgICAgICByb3dLZXlzLmZvckVhY2gocm93S2V5ID0+IHtcclxuICAgICAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzW2ZsYXRLZXkocm93S2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcclxuICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sVG90YWxzKSB7XHJcbiAgICAgICAgY29sS2V5cy5mb3JFYWNoKGNvbEtleSA9PiB7XHJcbiAgICAgICAgICBjb2xUb3RhbENhbGxiYWNrc1tmbGF0S2V5KGNvbEtleSldID0gdGhpcy5jbGlja0hhbmRsZXIoXHJcbiAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgIGNvbEtleSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJvd1RvdGFscyAmJiBjb2xUb3RhbHMpIHtcclxuICAgICAgICBncmFuZFRvdGFsQ2FsbGJhY2sgPSB0aGlzLmNsaWNrSGFuZGxlcihwaXZvdERhdGEsIFtdLCBbXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwaXZvdERhdGEsXHJcbiAgICAgIGNvbEF0dHJzLFxyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sS2V5cyxcclxuICAgICAgcm93S2V5cyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICBjb2xUb3RhbHMsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkOiBzdWJ0b3RhbE9wdGlvbnMuYXJyb3dDb2xsYXBzZWQsXHJcbiAgICAgIGFycm93RXhwYW5kZWQ6IHN1YnRvdGFsT3B0aW9ucy5hcnJvd0V4cGFuZGVkLFxyXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcclxuICAgICAgY2VsbENhbGxiYWNrcyxcclxuICAgICAgcm93VG90YWxDYWxsYmFja3MsXHJcbiAgICAgIGNvbFRvdGFsQ2FsbGJhY2tzLFxyXG4gICAgICBncmFuZFRvdGFsQ2FsbGJhY2ssXHJcbiAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgICAgYWxsb3dSZW5kZXJIdG1sOiBwcm9wcy5hbGxvd1JlbmRlckh0bWwsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY2xpY2tIYW5kbGVyKHBpdm90RGF0YSwgcm93VmFsdWVzLCBjb2xWYWx1ZXMpIHtcclxuICAgIGNvbnN0IGNvbEF0dHJzID0gdGhpcy5wcm9wcy5jb2xzO1xyXG4gICAgY29uc3Qgcm93QXR0cnMgPSB0aGlzLnByb3BzLnJvd3M7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd1ZhbHVlcywgY29sVmFsdWVzKS52YWx1ZSgpO1xyXG4gICAgY29uc3QgZmlsdGVycyA9IHt9O1xyXG4gICAgY29uc3QgY29sTGltaXQgPSBNYXRoLm1pbihjb2xBdHRycy5sZW5ndGgsIGNvbFZhbHVlcy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaW1pdDsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IGF0dHIgPSBjb2xBdHRyc1tpXTtcclxuICAgICAgaWYgKGNvbFZhbHVlc1tpXSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGZpbHRlcnNbYXR0cl0gPSBjb2xWYWx1ZXNbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJvd0xpbWl0ID0gTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCByb3dWYWx1ZXMubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93TGltaXQ7IGkgKz0gMSkge1xyXG4gICAgICBjb25zdCBhdHRyID0gcm93QXR0cnNbaV07XHJcbiAgICAgIGlmIChyb3dWYWx1ZXNbaV0gIT09IG51bGwpIHtcclxuICAgICAgICBmaWx0ZXJzW2F0dHJdID0gcm93VmFsdWVzW2ldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZSA9PlxyXG4gICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKGUsIHZhbHVlLCBmaWx0ZXJzLCBwaXZvdERhdGEpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgcGl2b3REYXRhLFxyXG4gICAgdmFsdWVzLFxyXG4gICAgYXR0cnMsXHJcbiAgICBhdHRySWR4LFxyXG4gICAgY2FsbGJhY2ssXHJcbiAgICBpc1N1YnRvdGFsID0gZmFsc2UsXHJcbiAgICBpc0dyYW5kVG90YWwgPSBmYWxzZSxcclxuICApIHtcclxuICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGF0dHJJZHg7IGkgKz0gMSkge1xyXG4gICAgICBjb25zdCBhdHRyID0gYXR0cnNbaV07XHJcbiAgICAgIGZpbHRlcnNbYXR0cl0gPSB2YWx1ZXNbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZSA9PlxyXG4gICAgICBjYWxsYmFjayhcclxuICAgICAgICBlLFxyXG4gICAgICAgIHZhbHVlc1thdHRySWR4XSxcclxuICAgICAgICBmaWx0ZXJzLFxyXG4gICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICBpc1N1YnRvdGFsLFxyXG4gICAgICAgIGlzR3JhbmRUb3RhbCxcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIGNvbGxhcHNlQXR0cihyb3dPckNvbCwgYXR0cklkeCwgYWxsS2V5cykge1xyXG4gICAgcmV0dXJuIGUgPT4ge1xyXG4gICAgICAvLyBDb2xsYXBzZSBhbiBlbnRpcmUgYXR0cmlidXRlLlxyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBjb25zdCBrZXlMZW4gPSBhdHRySWR4ICsgMTtcclxuICAgICAgY29uc3QgY29sbGFwc2VkID0gYWxsS2V5cy5maWx0ZXIoayA9PiBrLmxlbmd0aCA9PT0ga2V5TGVuKS5tYXAoZmxhdEtleSk7XHJcblxyXG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XHJcbiAgICAgIGNvbGxhcHNlZC5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgIHVwZGF0ZXNba10gPSB0cnVlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChyb3dPckNvbCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAgICAgICAgIGNvbGxhcHNlZFJvd3M6IHsgLi4uc3RhdGUuY29sbGFwc2VkUm93cywgLi4udXBkYXRlcyB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgICBjb2xsYXBzZWRDb2xzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZENvbHMsIC4uLnVwZGF0ZXMgfSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBleHBhbmRBdHRyKHJvd09yQ29sLCBhdHRySWR4LCBhbGxLZXlzKSB7XHJcbiAgICByZXR1cm4gZSA9PiB7XHJcbiAgICAgIC8vIEV4cGFuZCBhbiBlbnRpcmUgYXR0cmlidXRlLiBUaGlzIGltcGxpY2l0bHkgaW1wbGllcyBleHBhbmRpbmcgYWxsIG9mIHRoZVxyXG4gICAgICAvLyBwYXJlbnRzIGFzIHdlbGwuIEl0J3MgYSBiaXQgaW5lZmZpY2llbnQgYnV0IGFoIHdlbGwuLi5cclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgY29uc3QgdXBkYXRlcyA9IHt9O1xyXG4gICAgICBhbGxLZXlzLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gYXR0cklkeDsgaSArPSAxKSB7XHJcbiAgICAgICAgICB1cGRhdGVzW2ZsYXRLZXkoay5zbGljZSgwLCBpICsgMSkpXSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocm93T3JDb2wpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgICBjb2xsYXBzZWRSb3dzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsIC4uLnVwZGF0ZXMgfSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gICAgICAgICAgY29sbGFwc2VkQ29sczogeyAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLCAuLi51cGRhdGVzIH0sXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlUm93S2V5KGZsYXRSb3dLZXkpIHtcclxuICAgIHJldHVybiBlID0+IHtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gICAgICAgIGNvbGxhcHNlZFJvd3M6IHtcclxuICAgICAgICAgIC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsXHJcbiAgICAgICAgICBbZmxhdFJvd0tleV06ICFzdGF0ZS5jb2xsYXBzZWRSb3dzW2ZsYXRSb3dLZXldLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDb2xLZXkoZmxhdENvbEtleSkge1xyXG4gICAgcmV0dXJuIGUgPT4ge1xyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgY29sbGFwc2VkQ29sczoge1xyXG4gICAgICAgICAgLi4uc3RhdGUuY29sbGFwc2VkQ29scyxcclxuICAgICAgICAgIFtmbGF0Q29sS2V5XTogIXN0YXRlLmNvbGxhcHNlZENvbHNbZmxhdENvbEtleV0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSkpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNhbGNBdHRyU3BhbnMoYXR0ckFyciwgbnVtQXR0cnMpIHtcclxuICAgIC8vIEdpdmVuIGFuIGFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZXMgKGkuZS4gZWFjaCBlbGVtZW50IGlzIGFub3RoZXIgYXJyYXkgd2l0aFxyXG4gICAgLy8gdGhlIHZhbHVlIGF0IGV2ZXJ5IGxldmVsKSwgY29tcHV0ZSB0aGUgc3BhbnMgZm9yIGV2ZXJ5IGF0dHJpYnV0ZSB2YWx1ZSBhdFxyXG4gICAgLy8gZXZlcnkgbGV2ZWwuIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBuZXN0ZWQgYXJyYXkgb2YgdGhlIHNhbWUgc2hhcGUuIEl0IGhhc1xyXG4gICAgLy8gLTEncyBmb3IgcmVwZWF0ZWQgdmFsdWVzIGFuZCB0aGUgc3BhbiBudW1iZXIgb3RoZXJ3aXNlLlxyXG5cclxuICAgIGNvbnN0IHNwYW5zID0gW107XHJcbiAgICAvLyBJbmRleCBvZiB0aGUgbGFzdCBuZXcgdmFsdWVcclxuICAgIGNvbnN0IGxpID0gQXJyYXkobnVtQXR0cnMpLm1hcCgoKSA9PiAwKTtcclxuICAgIGxldCBsdiA9IEFycmF5KG51bUF0dHJzKS5tYXAoKCkgPT4gbnVsbCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJBcnIubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgLy8gS2VlcCBpbmNyZWFzaW5nIHNwYW4gdmFsdWVzIGFzIGxvbmcgYXMgdGhlIGxhc3Qga2V5cyBhcmUgdGhlIHNhbWUuIEZvclxyXG4gICAgICAvLyB0aGUgcmVzdCwgcmVjb3JkIHNwYW5zIG9mIDEuIFVwZGF0ZSB0aGUgaW5kaWNlcyB0b28uXHJcbiAgICAgIGNvbnN0IGN2ID0gYXR0ckFycltpXTtcclxuICAgICAgY29uc3QgZW50ID0gW107XHJcbiAgICAgIGxldCBkZXB0aCA9IDA7XHJcbiAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4obHYubGVuZ3RoLCBjdi5sZW5ndGgpO1xyXG4gICAgICB3aGlsZSAoZGVwdGggPCBsaW1pdCAmJiBsdltkZXB0aF0gPT09IGN2W2RlcHRoXSkge1xyXG4gICAgICAgIGVudC5wdXNoKC0xKTtcclxuICAgICAgICBzcGFuc1tsaVtkZXB0aF1dW2RlcHRoXSArPSAxO1xyXG4gICAgICAgIGRlcHRoICs9IDE7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGRlcHRoIDwgY3YubGVuZ3RoKSB7XHJcbiAgICAgICAgbGlbZGVwdGhdID0gaTtcclxuICAgICAgICBlbnQucHVzaCgxKTtcclxuICAgICAgICBkZXB0aCArPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIHNwYW5zLnB1c2goZW50KTtcclxuICAgICAgbHYgPSBjdjtcclxuICAgIH1cclxuICAgIHJldHVybiBzcGFucztcclxuICB9XHJcblxyXG4gIHJlbmRlckNvbEhlYWRlclJvdyhhdHRyTmFtZSwgYXR0cklkeCwgcGl2b3RTZXR0aW5ncykge1xyXG4gICAgLy8gUmVuZGVyIGEgc2luZ2xlIHJvdyBpbiB0aGUgY29sdW1uIGhlYWRlciBhdCB0aGUgdG9wIG9mIHRoZSBwaXZvdCB0YWJsZS5cclxuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHJvd0F0dHJzLFxyXG4gICAgICBjb2xBdHRycyxcclxuICAgICAgY29sS2V5cyxcclxuICAgICAgdmlzaWJsZUNvbEtleXMsXHJcbiAgICAgIGNvbEF0dHJTcGFucyxcclxuICAgICAgcm93VG90YWxzLFxyXG4gICAgICBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICBhcnJvd0NvbGxhcHNlZCxcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgICBtYXhDb2xWaXNpYmxlLFxyXG4gICAgICBwaXZvdERhdGEsXHJcbiAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgICAgYWxsb3dSZW5kZXJIdG1sLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcixcclxuICAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwcyA9IFtdLFxyXG4gICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzLFxyXG4gICAgICBkYXRlRm9ybWF0dGVycyxcclxuICAgIH0gPSB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBzcGFjZUNlbGwgPVxyXG4gICAgICBhdHRySWR4ID09PSAwICYmIHJvd0F0dHJzLmxlbmd0aCAhPT0gMCA/IChcclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGtleT1cInBhZGRpbmdcIlxyXG4gICAgICAgICAgY29sU3Bhbj17cm93QXR0cnMubGVuZ3RofVxyXG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RofVxyXG4gICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAvPlxyXG4gICAgICApIDogbnVsbDtcclxuXHJcbiAgICBjb25zdCBuZWVkVG9nZ2xlID1cclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgYXR0cklkeCAhPT0gY29sQXR0cnMubGVuZ3RoIC0gMTtcclxuICAgIGxldCBhcnJvd0NsaWNrSGFuZGxlID0gbnVsbDtcclxuICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XHJcbiAgICBpZiAobmVlZFRvZ2dsZSkge1xyXG4gICAgICBhcnJvd0NsaWNrSGFuZGxlID1cclxuICAgICAgICBhdHRySWR4ICsgMSA8IG1heENvbFZpc2libGVcclxuICAgICAgICAgID8gdGhpcy5jb2xsYXBzZUF0dHIoZmFsc2UsIGF0dHJJZHgsIGNvbEtleXMpXHJcbiAgICAgICAgICA6IHRoaXMuZXhwYW5kQXR0cihmYWxzZSwgYXR0cklkeCwgY29sS2V5cyk7XHJcbiAgICAgIHN1YkFycm93ID0gYXR0cklkeCArIDEgPCBtYXhDb2xWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXR0ck5hbWVDZWxsID0gKFxyXG4gICAgICA8dGgga2V5PVwibGFiZWxcIiBjbGFzc05hbWU9XCJwdnRBeGlzTGFiZWxcIj5cclxuICAgICAgICB7ZGlzcGxheUhlYWRlckNlbGwoXHJcbiAgICAgICAgICBuZWVkVG9nZ2xlLFxyXG4gICAgICAgICAgc3ViQXJyb3csXHJcbiAgICAgICAgICBhcnJvd0NsaWNrSGFuZGxlLFxyXG4gICAgICAgICAgYXR0ck5hbWUsXHJcbiAgICAgICAgICBuYW1lc01hcHBpbmcsXHJcbiAgICAgICAgICBhbGxvd1JlbmRlckh0bWwsXHJcbiAgICAgICAgKX1cclxuICAgICAgPC90aD5cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYXR0clZhbHVlQ2VsbHMgPSBbXTtcclxuICAgIGNvbnN0IHJvd0luY3JTcGFuID0gcm93QXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XHJcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggY29sdW1ucy4gSnVtcCBvdmVyIGR1cGxpY2F0ZSB2YWx1ZXMuXHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSAoaSA8IHZpc2libGVDb2xLZXlzLmxlbmd0aCkge1xyXG4gICAgICBsZXQgaGFuZGxlQ29udGV4dE1lbnU7XHJcbiAgICAgIGNvbnN0IGNvbEtleSA9IHZpc2libGVDb2xLZXlzW2ldO1xyXG4gICAgICBjb25zdCBjb2xTcGFuID0gYXR0cklkeCA8IGNvbEtleS5sZW5ndGggPyBjb2xBdHRyU3BhbnNbaV1bYXR0cklkeF0gOiAxO1xyXG4gICAgICBsZXQgY29sTGFiZWxDbGFzcyA9ICdwdnRDb2xMYWJlbCc7XHJcbiAgICAgIGlmIChhdHRySWR4IDwgY29sS2V5Lmxlbmd0aCkge1xyXG4gICAgICAgIGlmICghb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3Vwcy5pbmNsdWRlcyhjb2xBdHRyc1thdHRySWR4XSkpIHtcclxuICAgICAgICAgIGlmIChoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIpIHtcclxuICAgICAgICAgICAgY29sTGFiZWxDbGFzcyArPSAnIGhvdmVyYWJsZSc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBoYW5kbGVDb250ZXh0TWVudSA9IGUgPT5cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIGNvbEtleSwgdW5kZWZpbmVkLCB7XHJcbiAgICAgICAgICAgICAgW2F0dHJOYW1lXTogY29sS2V5W2F0dHJJZHhdLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxyXG4gICAgICAgICAgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlZEhlYWRlckNlbGxzW2NvbEF0dHJzW2F0dHJJZHhdXSkgJiZcclxuICAgICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbY29sQXR0cnNbYXR0cklkeF1dLmluY2x1ZGVzKGNvbEtleVthdHRySWR4XSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbExhYmVsQ2xhc3MgKz0gJyBhY3RpdmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgcm93U3BhbiA9IDEgKyAoYXR0cklkeCA9PT0gY29sQXR0cnMubGVuZ3RoIC0gMSA/IHJvd0luY3JTcGFuIDogMCk7XHJcbiAgICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5LnNsaWNlKDAsIGF0dHJJZHggKyAxKSk7XHJcbiAgICAgICAgY29uc3Qgb25BcnJvd0NsaWNrID0gbmVlZFRvZ2dsZSA/IHRoaXMudG9nZ2xlQ29sS2V5KGZsYXRDb2xLZXkpIDogbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgaGVhZGVyQ2VsbEZvcm1hdHRlZFZhbHVlID1cclxuICAgICAgICAgIGRhdGVGb3JtYXR0ZXJzICYmXHJcbiAgICAgICAgICBkYXRlRm9ybWF0dGVyc1thdHRyTmFtZV0gJiZcclxuICAgICAgICAgIHR5cGVvZiBkYXRlRm9ybWF0dGVyc1thdHRyTmFtZV0gPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgPyBkYXRlRm9ybWF0dGVyc1thdHRyTmFtZV0oY29sS2V5W2F0dHJJZHhdKVxyXG4gICAgICAgICAgICA6IGNvbEtleVthdHRySWR4XTtcclxuICAgICAgICBhdHRyVmFsdWVDZWxscy5wdXNoKFxyXG4gICAgICAgICAgPHRoXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y29sTGFiZWxDbGFzc31cclxuICAgICAgICAgICAga2V5PXtgY29sS2V5LSR7ZmxhdENvbEtleX1gfVxyXG4gICAgICAgICAgICBjb2xTcGFuPXtjb2xTcGFufVxyXG4gICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxyXG4gICAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgICBjb2xLZXksXHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxyXG4gICAgICAgICAgICAgIGF0dHJJZHgsXHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tDb2x1bW5IZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlQ29udGV4dE1lbnV9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAgICAgICAgICAgICBuZWVkVG9nZ2xlLFxyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkQ29sc1tmbGF0Q29sS2V5XVxyXG4gICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxyXG4gICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICAgICAgICAgIG9uQXJyb3dDbGljayxcclxuICAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXHJcbiAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgICAgICAgICAgIGFsbG93UmVuZGVySHRtbCxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvdGg+LFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAoYXR0cklkeCA9PT0gY29sS2V5Lmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSBjb2xBdHRycy5sZW5ndGggLSBjb2xLZXkubGVuZ3RoICsgcm93SW5jclNwYW47XHJcbiAgICAgICAgYXR0clZhbHVlQ2VsbHMucHVzaChcclxuICAgICAgICAgIDx0aFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake2NvbExhYmVsQ2xhc3N9IHB2dFN1YnRvdGFsTGFiZWxgfVxyXG4gICAgICAgICAgICBrZXk9e2Bjb2xLZXlCdWZmZXItJHtmbGF0S2V5KGNvbEtleSl9YH1cclxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cclxuICAgICAgICAgICAgcm93U3Bhbj17cm93U3Bhbn1cclxuICAgICAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlciBidXR0b25cIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAgICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgICAgY29sS2V5LFxyXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuY29scyxcclxuICAgICAgICAgICAgICBhdHRySWR4LFxyXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3QoJ1N1YnRvdGFsJyl9XHJcbiAgICAgICAgICA8L3RoPixcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFRoZSBuZXh0IGNvbFNwYW4gY29sdW1ucyB3aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUgYW55d2F5Li4uXHJcbiAgICAgIGkgKz0gY29sU3BhbjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbENlbGwgPVxyXG4gICAgICBhdHRySWR4ID09PSAwICYmIHJvd1RvdGFscyA/IChcclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGtleT1cInRvdGFsXCJcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsTGFiZWxcIlxyXG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RoICsgTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCAxKX1cclxuICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXIgYnV0dG9uXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgICBwaXZvdERhdGEsXHJcbiAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNvbHMsXHJcbiAgICAgICAgICAgIGF0dHJJZHgsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7dCgnVG90YWwgKCUoYWdncmVnYXRvck5hbWUpcyknLCB7XHJcbiAgICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lOiB0KHRoaXMucHJvcHMuYWdncmVnYXRvck5hbWUpLFxyXG4gICAgICAgICAgfSl9XHJcbiAgICAgICAgPC90aD5cclxuICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgY29uc3QgY2VsbHMgPSBbc3BhY2VDZWxsLCBhdHRyTmFtZUNlbGwsIC4uLmF0dHJWYWx1ZUNlbGxzLCB0b3RhbENlbGxdO1xyXG4gICAgcmV0dXJuIDx0ciBrZXk9e2Bjb2xBdHRyLSR7YXR0cklkeH1gfT57Y2VsbHN9PC90cj47XHJcbiAgfVxyXG5cclxuICByZW5kZXJSb3dIZWFkZXJSb3cocGl2b3RTZXR0aW5ncykge1xyXG4gICAgLy8gUmVuZGVyIGp1c3QgdGhlIGF0dHJpYnV0ZSBuYW1lcyBvZiB0aGUgcm93cyAodGhlIGFjdHVhbCBhdHRyaWJ1dGUgdmFsdWVzXHJcbiAgICAvLyB3aWxsIHNob3cgdXAgaW4gdGhlIGluZGl2aWR1YWwgcm93cykuXHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICByb3dBdHRycyxcclxuICAgICAgY29sQXR0cnMsXHJcbiAgICAgIHJvd0tleXMsXHJcbiAgICAgIGFycm93Q29sbGFwc2VkLFxyXG4gICAgICBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIG1heFJvd1Zpc2libGUsXHJcbiAgICAgIHBpdm90RGF0YSxcclxuICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgICBhbGxvd1JlbmRlckh0bWwsXHJcbiAgICB9ID0gcGl2b3RTZXR0aW5ncztcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDx0ciBrZXk9XCJyb3dIZHJcIj5cclxuICAgICAgICB7cm93QXR0cnMubWFwKChyLCBpKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBuZWVkTGFiZWxUb2dnbGUgPVxyXG4gICAgICAgICAgICByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCAmJiBpICE9PSByb3dBdHRycy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgbGV0IGFycm93Q2xpY2tIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgICAgbGV0IHN1YkFycm93ID0gbnVsbDtcclxuICAgICAgICAgIGlmIChuZWVkTGFiZWxUb2dnbGUpIHtcclxuICAgICAgICAgICAgYXJyb3dDbGlja0hhbmRsZSA9XHJcbiAgICAgICAgICAgICAgaSArIDEgPCBtYXhSb3dWaXNpYmxlXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuY29sbGFwc2VBdHRyKHRydWUsIGksIHJvd0tleXMpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuZXhwYW5kQXR0cih0cnVlLCBpLCByb3dLZXlzKTtcclxuICAgICAgICAgICAgc3ViQXJyb3cgPSBpICsgMSA8IG1heFJvd1Zpc2libGUgPyBhcnJvd0V4cGFuZGVkIDogYXJyb3dDb2xsYXBzZWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicHZ0QXhpc0xhYmVsXCIga2V5PXtgcm93QXR0ci0ke2l9YH0+XHJcbiAgICAgICAgICAgICAge2Rpc3BsYXlIZWFkZXJDZWxsKFxyXG4gICAgICAgICAgICAgICAgbmVlZExhYmVsVG9nZ2xlLFxyXG4gICAgICAgICAgICAgICAgc3ViQXJyb3csXHJcbiAgICAgICAgICAgICAgICBhcnJvd0NsaWNrSGFuZGxlLFxyXG4gICAgICAgICAgICAgICAgcixcclxuICAgICAgICAgICAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgICAgICAgICAgICAgIGFsbG93UmVuZGVySHRtbCxcclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KX1cclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsTGFiZWxcIlxyXG4gICAgICAgICAga2V5PVwicGFkZGluZ1wiXHJcbiAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxyXG4gICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2NvbEF0dHJzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICA/IHQoJ1RvdGFsICglKGFnZ3JlZ2F0b3JOYW1lKXMpJywge1xyXG4gICAgICAgICAgICAgICAgYWdncmVnYXRvck5hbWU6IHQodGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZSksXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgIDwvdHI+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGFibGVSb3cocm93S2V5LCByb3dJZHgsIHBpdm90U2V0dGluZ3MpIHtcclxuICAgIC8vIFJlbmRlciBhIHNpbmdsZSByb3cgaW4gdGhlIHBpdm90IHRhYmxlLlxyXG5cclxuICAgIGNvbnN0IHtcclxuICAgICAgcm93QXR0cnMsXHJcbiAgICAgIGNvbEF0dHJzLFxyXG4gICAgICByb3dBdHRyU3BhbnMsXHJcbiAgICAgIHZpc2libGVDb2xLZXlzLFxyXG4gICAgICBwaXZvdERhdGEsXHJcbiAgICAgIHJvd1RvdGFscyxcclxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxyXG4gICAgICBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICBhcnJvd0NvbGxhcHNlZCxcclxuICAgICAgY2VsbENhbGxiYWNrcyxcclxuICAgICAgcm93VG90YWxDYWxsYmFja3MsXHJcbiAgICAgIG5hbWVzTWFwcGluZyxcclxuICAgICAgYWxsb3dSZW5kZXJIdG1sLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIsXHJcbiAgICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHMgPSBbXSxcclxuICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyxcclxuICAgICAgY2VsbENvbG9yRm9ybWF0dGVycyxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICB9ID0gdGhpcy5wcm9wcy50YWJsZU9wdGlvbnM7XHJcbiAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xyXG5cclxuICAgIGNvbnN0IGNvbEluY3JTcGFuID0gY29sQXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XHJcbiAgICBjb25zdCBhdHRyVmFsdWVDZWxscyA9IHJvd0tleS5tYXAoKHIsIGkpID0+IHtcclxuICAgICAgbGV0IGhhbmRsZUNvbnRleHRNZW51O1xyXG4gICAgICBsZXQgdmFsdWVDZWxsQ2xhc3NOYW1lID0gJ3B2dFJvd0xhYmVsJztcclxuICAgICAgaWYgKCFvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzLmluY2x1ZGVzKHJvd0F0dHJzW2ldKSkge1xyXG4gICAgICAgIGlmIChoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIpIHtcclxuICAgICAgICAgIHZhbHVlQ2VsbENsYXNzTmFtZSArPSAnIGhvdmVyYWJsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhbmRsZUNvbnRleHRNZW51ID0gZSA9PlxyXG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIHVuZGVmaW5lZCwgcm93S2V5LCB7XHJcbiAgICAgICAgICAgIFtyb3dBdHRyc1tpXV06IHIsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxyXG4gICAgICAgIEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tyb3dBdHRyc1tpXV0pICYmXHJcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tyb3dBdHRyc1tpXV0uaW5jbHVkZXMocilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdmFsdWVDZWxsQ2xhc3NOYW1lICs9ICcgYWN0aXZlJztcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByb3dTcGFuID0gcm93QXR0clNwYW5zW3Jvd0lkeF1baV07XHJcbiAgICAgIGlmIChyb3dTcGFuID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleS5zbGljZSgwLCBpICsgMSkpO1xyXG4gICAgICAgIGNvbnN0IGNvbFNwYW4gPSAxICsgKGkgPT09IHJvd0F0dHJzLmxlbmd0aCAtIDEgPyBjb2xJbmNyU3BhbiA6IDApO1xyXG4gICAgICAgIGNvbnN0IG5lZWRSb3dUb2dnbGUgPVxyXG4gICAgICAgICAgcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgaSAhPT0gcm93QXR0cnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBjb25zdCBvbkFycm93Q2xpY2sgPSBuZWVkUm93VG9nZ2xlXHJcbiAgICAgICAgICA/IHRoaXMudG9nZ2xlUm93S2V5KGZsYXRSb3dLZXkpXHJcbiAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlckNlbGxGb3JtYXR0ZWRWYWx1ZSA9XHJcbiAgICAgICAgICBkYXRlRm9ybWF0dGVycyAmJiBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV1cclxuICAgICAgICAgICAgPyBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV0ocilcclxuICAgICAgICAgICAgOiByO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8dGhcclxuICAgICAgICAgICAga2V5PXtgcm93S2V5TGFiZWwtJHtpfWB9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dmFsdWVDZWxsQ2xhc3NOYW1lfVxyXG4gICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxyXG4gICAgICAgICAgICBjb2xTcGFuPXtjb2xTcGFufVxyXG4gICAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgICAgIHBpdm90RGF0YSxcclxuICAgICAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxyXG4gICAgICAgICAgICAgIGksXHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlQ29udGV4dE1lbnV9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcclxuICAgICAgICAgICAgICBuZWVkUm93VG9nZ2xlLFxyXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkUm93c1tmbGF0Um93S2V5XVxyXG4gICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxyXG4gICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxyXG4gICAgICAgICAgICAgIG9uQXJyb3dDbGljayxcclxuICAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXHJcbiAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxyXG4gICAgICAgICAgICAgIGFsbG93UmVuZGVySHRtbCxcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGF0dHJWYWx1ZVBhZGRpbmdDZWxsID1cclxuICAgICAgcm93S2V5Lmxlbmd0aCA8IHJvd0F0dHJzLmxlbmd0aCA/IChcclxuICAgICAgICA8dGhcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFJvd0xhYmVsIHB2dFN1YnRvdGFsTGFiZWxcIlxyXG4gICAgICAgICAga2V5PVwicm93S2V5QnVmZmVyXCJcclxuICAgICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCAtIHJvd0tleS5sZW5ndGggKyBjb2xJbmNyU3Bhbn1cclxuICAgICAgICAgIHJvd1NwYW49ezF9XHJcbiAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcclxuICAgICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcclxuICAgICAgICAgICAgcm93S2V5Lmxlbmd0aCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge3QoJ1N1YnRvdGFsJyl9XHJcbiAgICAgICAgPC90aD5cclxuICAgICAgKSA6IG51bGw7XHJcblxyXG4gICAgY29uc3Qgcm93Q2xpY2tIYW5kbGVycyA9IGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV0gfHwge307XHJcbiAgICBjb25zdCB2YWx1ZUNlbGxzID0gdmlzaWJsZUNvbEtleXMubWFwKGNvbEtleSA9PiB7XHJcbiAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleSk7XHJcbiAgICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd0tleSwgY29sS2V5KTtcclxuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcclxuXHJcbiAgICAgIGNvbnN0IGtleXMgPSBbLi4ucm93S2V5LCAuLi5jb2xLZXldO1xyXG4gICAgICBsZXQgYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICBpZiAoY2VsbENvbG9yRm9ybWF0dGVycykge1xyXG4gICAgICAgIE9iamVjdC52YWx1ZXMoY2VsbENvbG9yRm9ybWF0dGVycykuZm9yRWFjaChjZWxsQ29sb3JGb3JtYXR0ZXIgPT4ge1xyXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbENvbG9yRm9ybWF0dGVyKSkge1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNlbGxDb2xvckZvcm1hdHRlclxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmb3JtYXR0ZXIgPT4gZm9ybWF0dGVyLmNvbHVtbiA9PT0ga2V5KVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZm9ybWF0dGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVyUmVzdWx0ID0gZm9ybWF0dGVyLmdldENvbG9yRnJvbVZhbHVlKGFnZ1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdHRlclJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IGZvcm1hdHRlclJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdHlsZSA9IGFnZy5pc1N1YnRvdGFsXHJcbiAgICAgICAgPyB7IGZvbnRXZWlnaHQ6ICdib2xkJyB9XHJcbiAgICAgICAgOiB7IGJhY2tncm91bmRDb2xvciB9O1xyXG5cclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8dGRcclxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRWYWxcIlxyXG4gICAgICAgICAga2V5PXtgcHZ0VmFsLSR7ZmxhdENvbEtleX1gfVxyXG4gICAgICAgICAgb25DbGljaz17cm93Q2xpY2tIYW5kbGVyc1tmbGF0Q29sS2V5XX1cclxuICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2UgPT4gdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIGNvbEtleSwgcm93S2V5KX1cclxuICAgICAgICAgIHN0eWxlPXtzdHlsZX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XHJcbiAgICAgICAgPC90ZD5cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCB0b3RhbENlbGwgPSBudWxsO1xyXG4gICAgaWYgKHJvd1RvdGFscykge1xyXG4gICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihyb3dLZXksIFtdKTtcclxuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcclxuICAgICAgdG90YWxDZWxsID0gKFxyXG4gICAgICAgIDx0ZFxyXG4gICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcclxuICAgICAgICAgIGtleT1cInRvdGFsXCJcclxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e3Jvd1RvdGFsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldfVxyXG4gICAgICAgICAgb25Db250ZXh0TWVudT17ZSA9PiB0aGlzLnByb3BzLm9uQ29udGV4dE1lbnUoZSwgdW5kZWZpbmVkLCByb3dLZXkpfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cclxuICAgICAgICA8L3RkPlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJvd0NlbGxzID0gW1xyXG4gICAgICAuLi5hdHRyVmFsdWVDZWxscyxcclxuICAgICAgYXR0clZhbHVlUGFkZGluZ0NlbGwsXHJcbiAgICAgIC4uLnZhbHVlQ2VsbHMsXHJcbiAgICAgIHRvdGFsQ2VsbCxcclxuICAgIF07XHJcblxyXG4gICAgcmV0dXJuIDx0ciBrZXk9e2BrZXlSb3ctJHtmbGF0Um93S2V5fWB9Pntyb3dDZWxsc308L3RyPjtcclxuICB9XHJcblxyXG4gIHJlbmRlclRvdGFsc1JvdyhwaXZvdFNldHRpbmdzKSB7XHJcbiAgICAvLyBSZW5kZXIgdGhlIGZpbmFsIHRvdGFscyByb3dzIHRoYXQgaGFzIHRoZSB0b3RhbHMgZm9yIGFsbCB0aGUgY29sdW1ucy5cclxuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHJvd0F0dHJzLFxyXG4gICAgICBjb2xBdHRycyxcclxuICAgICAgdmlzaWJsZUNvbEtleXMsXHJcbiAgICAgIHJvd1RvdGFscyxcclxuICAgICAgcGl2b3REYXRhLFxyXG4gICAgICBjb2xUb3RhbENhbGxiYWNrcyxcclxuICAgICAgZ3JhbmRUb3RhbENhbGxiYWNrLFxyXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3QgdG90YWxMYWJlbENlbGwgPSAoXHJcbiAgICAgIDx0aFxyXG4gICAgICAgIGtleT1cImxhYmVsXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsIHB2dFJvd1RvdGFsTGFiZWxcIlxyXG4gICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCArIE1hdGgubWluKGNvbEF0dHJzLmxlbmd0aCwgMSl9XHJcbiAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlciBidXR0b25cIlxyXG4gICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxyXG4gICAgICAgICAgcGl2b3REYXRhLFxyXG4gICAgICAgICAgW10sXHJcbiAgICAgICAgICB0aGlzLnByb3BzLnJvd3MsXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcclxuICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgdHJ1ZSxcclxuICAgICAgICApfVxyXG4gICAgICA+XHJcbiAgICAgICAge3QoJ1RvdGFsICglKGFnZ3JlZ2F0b3JOYW1lKXMpJywge1xyXG4gICAgICAgICAgYWdncmVnYXRvck5hbWU6IHQodGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZSksXHJcbiAgICAgICAgfSl9XHJcbiAgICAgIDwvdGg+XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHRvdGFsVmFsdWVDZWxscyA9IHZpc2libGVDb2xLZXlzLm1hcChjb2xLZXkgPT4ge1xyXG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xyXG4gICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihbXSwgY29sS2V5KTtcclxuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcclxuXHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRkXHJcbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWwgcHZ0Um93VG90YWxcIlxyXG4gICAgICAgICAga2V5PXtgdG90YWwtJHtmbGF0Q29sS2V5fWB9XHJcbiAgICAgICAgICBvbkNsaWNrPXtjb2xUb3RhbENhbGxiYWNrc1tmbGF0Q29sS2V5XX1cclxuICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2UgPT4gdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIGNvbEtleSwgdW5kZWZpbmVkKX1cclxuICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6ICc1cHgnIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgZ3JhbmRUb3RhbENlbGwgPSBudWxsO1xyXG4gICAgaWYgKHJvd1RvdGFscykge1xyXG4gICAgICBjb25zdCBhZ2cgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihbXSwgW10pO1xyXG4gICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xyXG4gICAgICBncmFuZFRvdGFsQ2VsbCA9IChcclxuICAgICAgICA8dGRcclxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXHJcbiAgICAgICAgICBrZXk9XCJ0b3RhbFwiXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRHcmFuZFRvdGFsIHB2dFJvd1RvdGFsXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2dyYW5kVG90YWxDYWxsYmFja31cclxuICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2UgPT4gdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XHJcbiAgICAgICAgPC90ZD5cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbENlbGxzID0gW3RvdGFsTGFiZWxDZWxsLCAuLi50b3RhbFZhbHVlQ2VsbHMsIGdyYW5kVG90YWxDZWxsXTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8dHIga2V5PVwidG90YWxcIiBjbGFzc05hbWU9XCJwdnRSb3dUb3RhbHNcIj5cclxuICAgICAgICB7dG90YWxDZWxsc31cclxuICAgICAgPC90cj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB2aXNpYmxlS2V5cyhrZXlzLCBjb2xsYXBzZWQsIG51bUF0dHJzLCBzdWJ0b3RhbERpc3BsYXkpIHtcclxuICAgIHJldHVybiBrZXlzLmZpbHRlcihcclxuICAgICAga2V5ID0+XHJcbiAgICAgICAgLy8gSXMgdGhlIGtleSBoaWRkZW4gYnkgb25lIG9mIGl0cyBwYXJlbnRzP1xyXG4gICAgICAgICFrZXkuc29tZSgoaywgaikgPT4gY29sbGFwc2VkW2ZsYXRLZXkoa2V5LnNsaWNlKDAsIGopKV0pICYmXHJcbiAgICAgICAgLy8gTGVhZiBrZXkuXHJcbiAgICAgICAgKGtleS5sZW5ndGggPT09IG51bUF0dHJzIHx8XHJcbiAgICAgICAgICAvLyBDaGlsZHJlbiBoaWRkZW4uIE11c3Qgc2hvdyB0b3RhbC5cclxuICAgICAgICAgIGZsYXRLZXkoa2V5KSBpbiBjb2xsYXBzZWQgfHxcclxuICAgICAgICAgIC8vIERvbid0IGhpZGUgdG90YWxzLlxyXG4gICAgICAgICAgIXN1YnRvdGFsRGlzcGxheS5oaWRlT25FeHBhbmQpLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlzRGFzaGJvYXJkRWRpdE1vZGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY29udGFpbnMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhc2hib2FyZC0tZWRpdGluZycpKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICh0aGlzLmNhY2hlZFByb3BzICE9PSB0aGlzLnByb3BzKSB7XHJcbiAgICAgIHRoaXMuY2FjaGVkUHJvcHMgPSB0aGlzLnByb3BzO1xyXG4gICAgICB0aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzID0gdGhpcy5nZXRCYXNlUGl2b3RTZXR0aW5ncygpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb2xBdHRycyxcclxuICAgICAgcm93QXR0cnMsXHJcbiAgICAgIHJvd0tleXMsXHJcbiAgICAgIGNvbEtleXMsXHJcbiAgICAgIGNvbFRvdGFscyxcclxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxyXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXHJcbiAgICAgIGFsbG93UmVuZGVySHRtbCxcclxuICAgIH0gPSB0aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzO1xyXG5cclxuICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgZXhjbHVzaW9ucyB0byBjb21wdXRlIHRoZSBlZmZlY3RpdmUgcm93XHJcbiAgICAvLyBhbmQgY29sdW1uIGtleXMuXHJcbiAgICBjb25zdCB2aXNpYmxlUm93S2V5cyA9IHRoaXMudmlzaWJsZUtleXMoXHJcbiAgICAgIHJvd0tleXMsXHJcbiAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkUm93cyxcclxuICAgICAgcm93QXR0cnMubGVuZ3RoLFxyXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXHJcbiAgICApO1xyXG4gICAgY29uc3QgdmlzaWJsZUNvbEtleXMgPSB0aGlzLnZpc2libGVLZXlzKFxyXG4gICAgICBjb2xLZXlzLFxyXG4gICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZENvbHMsXHJcbiAgICAgIGNvbEF0dHJzLmxlbmd0aCxcclxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBwaXZvdFNldHRpbmdzID0ge1xyXG4gICAgICB2aXNpYmxlUm93S2V5cyxcclxuICAgICAgbWF4Um93VmlzaWJsZTogTWF0aC5tYXgoLi4udmlzaWJsZVJvd0tleXMubWFwKGsgPT4gay5sZW5ndGgpKSxcclxuICAgICAgdmlzaWJsZUNvbEtleXMsXHJcbiAgICAgIG1heENvbFZpc2libGU6IE1hdGgubWF4KC4uLnZpc2libGVDb2xLZXlzLm1hcChrID0+IGsubGVuZ3RoKSksXHJcbiAgICAgIHJvd0F0dHJTcGFuczogdGhpcy5jYWxjQXR0clNwYW5zKHZpc2libGVSb3dLZXlzLCByb3dBdHRycy5sZW5ndGgpLFxyXG4gICAgICBjb2xBdHRyU3BhbnM6IHRoaXMuY2FsY0F0dHJTcGFucyh2aXNpYmxlQ29sS2V5cywgY29sQXR0cnMubGVuZ3RoKSxcclxuICAgICAgYWxsb3dSZW5kZXJIdG1sLFxyXG4gICAgICAuLi50aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8U3R5bGVzIGlzRGFzaGJvYXJkRWRpdE1vZGU9e3RoaXMuaXNEYXNoYm9hcmRFZGl0TW9kZSgpfT5cclxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwicHZ0VGFibGVcIiByb2xlPVwiZ3JpZFwiPlxyXG4gICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICB7Y29sQXR0cnMubWFwKChjLCBqKSA9PlxyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29sSGVhZGVyUm93KGMsIGosIHBpdm90U2V0dGluZ3MpLFxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICB7cm93QXR0cnMubGVuZ3RoICE9PSAwICYmIHRoaXMucmVuZGVyUm93SGVhZGVyUm93KHBpdm90U2V0dGluZ3MpfVxyXG4gICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAge3Zpc2libGVSb3dLZXlzLm1hcCgociwgaSkgPT5cclxuICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhYmxlUm93KHIsIGksIHBpdm90U2V0dGluZ3MpLFxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICB7Y29sVG90YWxzICYmIHRoaXMucmVuZGVyVG90YWxzUm93KHBpdm90U2V0dGluZ3MpfVxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L1N0eWxlcz5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5UYWJsZVJlbmRlcmVyLnByb3BUeXBlcyA9IHtcclxuICAuLi5QaXZvdERhdGEucHJvcFR5cGVzLFxyXG4gIHRhYmxlT3B0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcclxuICBvbkNvbnRleHRNZW51OiBQcm9wVHlwZXMuZnVuYyxcclxufTtcclxuVGFibGVSZW5kZXJlci5kZWZhdWx0UHJvcHMgPSB7IC4uLlBpdm90RGF0YS5kZWZhdWx0UHJvcHMsIHRhYmxlT3B0aW9uczoge30gfTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js":
/*!****************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PivotData: () => (/* binding */ PivotData),\n/* harmony export */   aggregatorTemplates: () => (/* binding */ aggregatorTemplates),\n/* harmony export */   flatKey: () => (/* binding */ flatKey),\n/* harmony export */   sortAs: () => (/* binding */ sortAs)\n/* harmony export */ });\n/* unused harmony exports aggregators, derivers, locales, naturalSort, numberFormat, getSort */\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\nconst addSeparators = function (nStr, thousandsSep, decimalSep) {\n  const x = String(nStr).split('.');\n  let x1 = x[0];\n  const x2 = x.length > 1 ? decimalSep + x[1] : '';\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, `$1${thousandsSep}$2`);\n  }\n  return x1 + x2;\n};\n\nconst numberFormat = function (optsIn) {\n  const defaults = {\n    digitsAfterDecimal: 2,\n    scaler: 1,\n    thousandsSep: ',',\n    decimalSep: '.',\n    prefix: '',\n    suffix: ''\n  };\n  const opts = { ...defaults, ...optsIn };\n  return function (x) {\n    if (Number.isNaN(x) || !Number.isFinite(x)) {\n      return '';\n    }\n    const result = addSeparators(\n      (opts.scaler * x).toFixed(opts.digitsAfterDecimal),\n      opts.thousandsSep,\n      opts.decimalSep\n    );\n    return `${opts.prefix}${result}${opts.suffix}`;\n  };\n};\n\nconst rx = /(\\d+)|(\\D+)/g;\nconst rd = /\\d/;\nconst rz = /^0/;\nconst naturalSort = (as, bs) => {\n  // nulls first\n  if (bs !== null && as === null) {\n    return -1;\n  }\n  if (as !== null && bs === null) {\n    return 1;\n  }\n\n  // then raw NaNs\n  if (typeof as === 'number' && Number.isNaN(as)) {\n    return -1;\n  }\n  if (typeof bs === 'number' && Number.isNaN(bs)) {\n    return 1;\n  }\n\n  // numbers and numbery strings group together\n  const nas = Number(as);\n  const nbs = Number(bs);\n  if (nas < nbs) {\n    return -1;\n  }\n  if (nas > nbs) {\n    return 1;\n  }\n\n  // within that, true numbers before numbery strings\n  if (typeof as === 'number' && typeof bs !== 'number') {\n    return -1;\n  }\n  if (typeof bs === 'number' && typeof as !== 'number') {\n    return 1;\n  }\n  if (typeof as === 'number' && typeof bs === 'number') {\n    return 0;\n  }\n\n  // 'Infinity' is a textual number, so less than 'A'\n  if (Number.isNaN(nbs) && !Number.isNaN(nas)) {\n    return -1;\n  }\n  if (Number.isNaN(nas) && !Number.isNaN(nbs)) {\n    return 1;\n  }\n\n  // finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n  let a = String(as);\n  let b = String(bs);\n  if (a === b) {\n    return 0;\n  }\n  if (!rd.test(a) || !rd.test(b)) {\n    return a > b ? 1 : -1;\n  }\n\n  // special treatment for strings containing digits\n  a = a.match(rx);\n  b = b.match(rx);\n  while (a.length && b.length) {\n    const a1 = a.shift();\n    const b1 = b.shift();\n    if (a1 !== b1) {\n      if (rd.test(a1) && rd.test(b1)) {\n        return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n      }\n      return a1 > b1 ? 1 : -1;\n    }\n  }\n  return a.length - b.length;\n};\n\nconst sortAs = function (order) {\n  const mapping = {};\n\n  // sort lowercased keys similarly\n  const lMapping = {};\n  order.forEach((element, i) => {\n    mapping[element] = i;\n    if (typeof element === 'string') {\n      lMapping[element.toLowerCase()] = i;\n    }\n  });\n  return function (a, b) {\n    if (a in mapping && b in mapping) {\n      return mapping[a] - mapping[b];\n    }\n    if (a in mapping) {\n      return -1;\n    }\n    if (b in mapping) {\n      return 1;\n    }\n    if (a in lMapping && b in lMapping) {\n      return lMapping[a] - lMapping[b];\n    }\n    if (a in lMapping) {\n      return -1;\n    }\n    if (b in lMapping) {\n      return 1;\n    }\n    return naturalSort(a, b);\n  };\n};\n\nconst getSort = function (sorters, attr) {\n  if (sorters) {\n    if (typeof sorters === 'function') {\n      const sort = sorters(attr);\n      if (typeof sort === 'function') {\n        return sort;\n      }\n    } else if (attr in sorters) {\n      return sorters[attr];\n    }\n  }\n  return naturalSort;\n};\n\n// aggregator templates default to US number formatting but this is overridable\nconst usFmt = numberFormat();\nconst usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\nconst usFmtPct = numberFormat({\n  digitsAfterDecimal: 1,\n  scaler: 100,\n  suffix: '%'\n});\n\nconst fmtNonString = (formatter) => (x) =>\ntypeof x === 'string' ? x : formatter(x);\n\nconst baseAggregatorTemplates = {\n  count(formatter = usFmtInt) {\n    return () =>\n    function () {\n      return {\n        count: 0,\n        push() {\n          this.count += 1;\n        },\n        value() {\n          return this.count;\n        },\n        format: formatter\n      };\n    };\n  },\n\n  uniques(fn, formatter = usFmtInt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          uniq: [],\n          push(record) {\n            if (!Array.from(this.uniq).includes(record[attr])) {\n              this.uniq.push(record[attr]);\n            }\n          },\n          value() {\n            return fn(this.uniq);\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sum(formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          sum: 0,\n          push(record) {\n            if (Number.isNaN(Number(record[attr]))) {\n              this.sum = record[attr];\n            } else {\n              this.sum += parseFloat(record[attr]);\n            }\n          },\n          value() {\n            return this.sum;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  extremes(mode, formatter = usFmt) {\n    return function ([attr]) {\n      return function (data) {\n        return {\n          val: null,\n          sorter: getSort(\n            typeof data !== 'undefined' ? data.sorters : null,\n            attr\n          ),\n          push(record) {\n            const x = record[attr];\n            if (['min', 'max'].includes(mode)) {\n              const coercedValue = Number(x);\n              if (Number.isNaN(coercedValue)) {\n                this.val =\n                !this.val ||\n                mode === 'min' && x < this.val ||\n                mode === 'max' && x > this.val ?\n                x :\n                this.val;\n              } else {\n                this.val = Math[mode](\n                  coercedValue,\n                  this.val !== null ? this.val : coercedValue\n                );\n              }\n            } else if (\n            mode === 'first' &&\n            this.sorter(x, this.val !== null ? this.val : x) <= 0)\n            {\n              this.val = x;\n            } else if (\n            mode === 'last' &&\n            this.sorter(x, this.val !== null ? this.val : x) >= 0)\n            {\n              this.val = x;\n            }\n          },\n          value() {\n            return this.val;\n          },\n          format(x) {\n            if (typeof x === 'number') {\n              return formatter(x);\n            }\n            return x;\n          },\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  quantile(q, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          vals: [],\n          strMap: {},\n          push(record) {\n            const val = record[attr];\n            const x = Number(val);\n\n            if (Number.isNaN(x)) {\n              this.strMap[val] = (this.strMap[val] || 0) + 1;\n            } else {\n              this.vals.push(x);\n            }\n          },\n          value() {\n            if (\n            this.vals.length === 0 &&\n            Object.keys(this.strMap).length === 0)\n            {\n              return null;\n            }\n\n            if (Object.keys(this.strMap).length) {\n              const values = Object.values(this.strMap).sort((a, b) => a - b);\n              const middle = Math.floor(values.length / 2);\n\n              const keys = Object.keys(this.strMap);\n              return keys.length % 2 !== 0 ?\n              keys[middle] :\n              (keys[middle - 1] + keys[middle]) / 2;\n            }\n\n            this.vals.sort((a, b) => a - b);\n            const i = (this.vals.length - 1) * q;\n            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  runningStat(mode = 'mean', ddof = 1, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          n: 0.0,\n          m: 0.0,\n          s: 0.0,\n          strValue: null,\n          push(record) {\n            const x = Number(record[attr]);\n            if (Number.isNaN(x)) {\n              this.strValue =\n              typeof record[attr] === 'string' ? record[attr] : this.strValue;\n              return;\n            }\n            this.n += 1.0;\n            if (this.n === 1.0) {\n              this.m = x;\n            }\n            const mNew = this.m + (x - this.m) / this.n;\n            this.s += (x - this.m) * (x - mNew);\n            this.m = mNew;\n          },\n          value() {\n            if (this.strValue) {\n              return this.strValue;\n            }\n\n            if (mode === 'mean') {\n              if (this.n === 0) {\n                return 0 / 0;\n              }\n              return this.m;\n            }\n            if (this.n <= ddof) {\n              return 0;\n            }\n            switch (mode) {\n              case 'var':\n                return this.s / (this.n - ddof);\n              case 'stdev':\n                return Math.sqrt(this.s / (this.n - ddof));\n              default:\n                throw new Error('unknown mode for runningStat');\n            }\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sumOverSum(formatter = usFmt) {\n    return function ([num, denom]) {\n      return function () {\n        return {\n          sumNum: 0,\n          sumDenom: 0,\n          push(record) {\n            if (!Number.isNaN(Number(record[num]))) {\n              this.sumNum += parseFloat(record[num]);\n            }\n            if (!Number.isNaN(Number(record[denom]))) {\n              this.sumDenom += parseFloat(record[denom]);\n            }\n          },\n          value() {\n            return this.sumNum / this.sumDenom;\n          },\n          format: formatter,\n          numInputs:\n          typeof num !== 'undefined' && typeof denom !== 'undefined' ? 0 : 2\n        };\n      };\n    };\n  },\n\n  fractionOf(wrapped, type = 'total', formatter = usFmtPct) {\n    return (...x) =>\n    function (data, rowKey, colKey) {\n      return {\n        selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[\n        type],\n\n        inner: wrapped(...Array.from(x || []))(data, rowKey, colKey),\n        push(record) {\n          this.inner.push(record);\n        },\n        format: fmtNonString(formatter),\n        value() {\n          const acc = data.\n          getAggregator(...Array.from(this.selector || [])).\n          inner.value();\n\n          if (typeof acc === 'string') {\n            return acc;\n          }\n\n          return this.inner.value() / acc;\n        },\n        numInputs: wrapped(...Array.from(x || []))().numInputs\n      };\n    };\n  }\n};\n\nconst extendedAggregatorTemplates = {\n  countUnique(f) {\n    return baseAggregatorTemplates.uniques((x) => x.length, f);\n  },\n  listUnique(s, f) {\n    return baseAggregatorTemplates.uniques((x) => x.join(s), f || ((x) => x));\n  },\n  max(f) {\n    return baseAggregatorTemplates.extremes('max', f);\n  },\n  min(f) {\n    return baseAggregatorTemplates.extremes('min', f);\n  },\n  first(f) {\n    return baseAggregatorTemplates.extremes('first', f);\n  },\n  last(f) {\n    return baseAggregatorTemplates.extremes('last', f);\n  },\n  median(f) {\n    return baseAggregatorTemplates.quantile(0.5, f);\n  },\n  average(f) {\n    return baseAggregatorTemplates.runningStat('mean', 1, f);\n  },\n  var(ddof, f) {\n    return baseAggregatorTemplates.runningStat('var', ddof, f);\n  },\n  stdev(ddof, f) {\n    return baseAggregatorTemplates.runningStat('stdev', ddof, f);\n  }\n};\n\nconst aggregatorTemplates = {\n  ...baseAggregatorTemplates,\n  ...extendedAggregatorTemplates\n};\n\n// default aggregators & renderers use US naming and number formatting\nconst aggregators = ((tpl) => ({\n  Count: tpl.count(usFmtInt),\n  'Count Unique Values': tpl.countUnique(usFmtInt),\n  'List Unique Values': tpl.listUnique(', '),\n  Sum: tpl.sum(usFmt),\n  'Integer Sum': tpl.sum(usFmtInt),\n  Average: tpl.average(usFmt),\n  Median: tpl.median(usFmt),\n  'Sample Variance': tpl.var(1, usFmt),\n  'Sample Standard Deviation': tpl.stdev(1, usFmt),\n  Minimum: tpl.min(usFmt),\n  Maximum: tpl.max(usFmt),\n  First: tpl.first(usFmt),\n  Last: tpl.last(usFmt),\n  'Sum over Sum': tpl.sumOverSum(usFmt),\n  'Sum as Fraction of Total': tpl.fractionOf(tpl.sum(), 'total', usFmtPct),\n  'Sum as Fraction of Rows': tpl.fractionOf(tpl.sum(), 'row', usFmtPct),\n  'Sum as Fraction of Columns': tpl.fractionOf(tpl.sum(), 'col', usFmtPct),\n  'Count as Fraction of Total': tpl.fractionOf(tpl.count(), 'total', usFmtPct),\n  'Count as Fraction of Rows': tpl.fractionOf(tpl.count(), 'row', usFmtPct),\n  'Count as Fraction of Columns': tpl.fractionOf(tpl.count(), 'col', usFmtPct)\n}))(aggregatorTemplates);\n\nconst locales = {\n  en: {\n    aggregators,\n    localeStrings: {\n      renderError: 'An error occurred rendering the PivotTable results.',\n      computeError: 'An error occurred computing the PivotTable results.',\n      uiRenderError: 'An error occurred rendering the PivotTable UI.',\n      selectAll: 'Select All',\n      selectNone: 'Select None',\n      tooMany: '(too many to list)',\n      filterResults: 'Filter values',\n      apply: 'Apply',\n      cancel: 'Cancel',\n      totals: 'Totals',\n      vs: 'vs',\n      by: 'by'\n    }\n  }\n};\n\n// dateFormat deriver l10n requires month and day names to be passed in directly\nconst mthNamesEn = [\n'Jan',\n'Feb',\n'Mar',\n'Apr',\n'May',\n'Jun',\n'Jul',\n'Aug',\n'Sep',\n'Oct',\n'Nov',\n'Dec'];\n\nconst dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst zeroPad = (number) => `0${number}`.substr(-2, 2); // eslint-disable-line no-magic-numbers\n\nconst derivers = {\n  bin(col, binWidth) {\n    return (record) => record[col] - record[col] % binWidth;\n  },\n  dateFormat(\n  col,\n  formatString,\n  utcOutput = false,\n  mthNames = mthNamesEn,\n  dayNames = dayNamesEn)\n  {\n    const utc = utcOutput ? 'UTC' : '';\n    return function (record) {\n      const date = new Date(Date.parse(record[col]));\n      if (Number.isNaN(date)) {\n        return '';\n      }\n      return formatString.replace(/%(.)/g, function (m, p) {\n        switch (p) {\n          case 'y':\n            return date[`get${utc}FullYear`]();\n          case 'm':\n            return zeroPad(date[`get${utc}Month`]() + 1);\n          case 'n':\n            return mthNames[date[`get${utc}Month`]()];\n          case 'd':\n            return zeroPad(date[`get${utc}Date`]());\n          case 'w':\n            return dayNames[date[`get${utc}Day`]()];\n          case 'x':\n            return date[`get${utc}Day`]();\n          case 'H':\n            return zeroPad(date[`get${utc}Hours`]());\n          case 'M':\n            return zeroPad(date[`get${utc}Minutes`]());\n          case 'S':\n            return zeroPad(date[`get${utc}Seconds`]());\n          default:\n            return `%${p}`;\n        }\n      });\n    };\n  }\n};\n\n// Given an array of attribute values, convert to a key that\n// can be used in objects.\nconst flatKey = (attrVals) => attrVals.join(String.fromCharCode(0));\n\n/*\r\nData Model class\r\n*/\n\nclass PivotData {\n  constructor(inputProps = {}, subtotals = {}) {\n    this.props = { ...PivotData.defaultProps, ...inputProps };\n    this.processRecord = this.processRecord.bind(this);\n    prop_types__WEBPACK_IMPORTED_MODULE_0___default().checkPropTypes(\n      PivotData.propTypes,\n      this.props,\n      'prop',\n      'PivotData'\n    );\n\n    this.aggregator = this.props.\n    aggregatorsFactory(this.props.defaultFormatter)[\n    this.props.aggregatorName](this.props.vals);\n    this.formattedAggregators =\n    this.props.customFormatters &&\n    Object.entries(this.props.customFormatters).reduce(\n      (acc, [key, columnFormatter]) => {\n        acc[key] = {};\n        Object.entries(columnFormatter).forEach(([column, formatter]) => {\n          acc[key][column] = this.props.\n          aggregatorsFactory(formatter)[\n          this.props.aggregatorName](this.props.vals);\n        });\n        return acc;\n      },\n      {}\n    );\n    this.tree = {};\n    this.rowKeys = [];\n    this.colKeys = [];\n    this.rowTotals = {};\n    this.colTotals = {};\n    this.allTotal = this.aggregator(this, [], []);\n    this.subtotals = subtotals;\n    this.sorted = false;\n\n    // iterate through input, accumulating data for cells\n    PivotData.forEachRecord(this.props.data, this.processRecord);\n  }\n\n  getFormattedAggregator(record, totalsKeys) {\n    if (!this.formattedAggregators) {\n      return this.aggregator;\n    }\n    const [groupName, groupValue] =\n    Object.entries(record).find(\n      ([name, value]) =>\n      this.formattedAggregators[name] &&\n      this.formattedAggregators[name][value]\n    ) || [];\n    if (\n    !groupName ||\n    !groupValue ||\n    totalsKeys && !totalsKeys.includes(groupValue))\n    {\n      return this.aggregator;\n    }\n    return this.formattedAggregators[groupName][groupValue] || this.aggregator;\n  }\n\n  arrSort(attrs, partialOnTop, reverse = false) {\n    const sortersArr = attrs.map((a) => getSort(this.props.sorters, a));\n    return function (a, b) {\n      const limit = Math.min(a.length, b.length);\n      for (let i = 0; i < limit; i += 1) {\n        const sorter = sortersArr[i];\n        const comparison = reverse ? sorter(b[i], a[i]) : sorter(a[i], b[i]);\n        if (comparison !== 0) {\n          return comparison;\n        }\n      }\n      return partialOnTop ? a.length - b.length : b.length - a.length;\n    };\n  }\n\n  sortKeys() {\n    if (!this.sorted) {\n      this.sorted = true;\n      const v = (r, c) => this.getAggregator(r, c).value();\n      switch (this.props.rowOrder) {\n        case 'key_z_to_a':\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n          break;\n        case 'value_z_to_a':\n          this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n          break;\n        default:\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop)\n          );\n      }\n      switch (this.props.colOrder) {\n        case 'key_z_to_a':\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n          break;\n        case 'value_z_to_a':\n          this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n          break;\n        default:\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop)\n          );\n      }\n    }\n  }\n\n  getColKeys() {\n    this.sortKeys();\n    return this.colKeys;\n  }\n\n  getRowKeys() {\n    this.sortKeys();\n    return this.rowKeys;\n  }\n\n  processRecord(record) {\n    // this code is called in a tight loop\n    const colKey = [];\n    const rowKey = [];\n    this.props.cols.forEach((col) => {\n      colKey.push(col in record ? record[col] : 'null');\n    });\n    this.props.rows.forEach((row) => {\n      rowKey.push(row in record ? record[row] : 'null');\n    });\n\n    this.allTotal.push(record);\n\n    const rowStart = this.subtotals.rowEnabled ? 1 : Math.max(1, rowKey.length);\n    const colStart = this.subtotals.colEnabled ? 1 : Math.max(1, colKey.length);\n\n    let isRowSubtotal;\n    let isColSubtotal;\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.rowTotals[flatRowKey]) {\n        this.rowKeys.push(fRowKey);\n        this.rowTotals[flatRowKey] = this.getFormattedAggregator(\n          record,\n          rowKey\n        )(this, fRowKey, []);\n      }\n      this.rowTotals[flatRowKey].push(record);\n      this.rowTotals[flatRowKey].isSubtotal = isRowSubtotal;\n    }\n\n    for (let ci = colStart; ci <= colKey.length; ci += 1) {\n      isColSubtotal = ci < colKey.length;\n      const fColKey = colKey.slice(0, ci);\n      const flatColKey = flatKey(fColKey);\n      if (!this.colTotals[flatColKey]) {\n        this.colKeys.push(fColKey);\n        this.colTotals[flatColKey] = this.getFormattedAggregator(\n          record,\n          colKey\n        )(this, [], fColKey);\n      }\n      this.colTotals[flatColKey].push(record);\n      this.colTotals[flatColKey].isSubtotal = isColSubtotal;\n    }\n\n    // And now fill in for all the sub-cells.\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.tree[flatRowKey]) {\n        this.tree[flatRowKey] = {};\n      }\n      for (let ci = colStart; ci <= colKey.length; ci += 1) {\n        isColSubtotal = ci < colKey.length;\n        const fColKey = colKey.slice(0, ci);\n        const flatColKey = flatKey(fColKey);\n        if (!this.tree[flatRowKey][flatColKey]) {\n          this.tree[flatRowKey][flatColKey] = this.getFormattedAggregator(\n            record\n          )(this, fRowKey, fColKey);\n        }\n        this.tree[flatRowKey][flatColKey].push(record);\n\n        this.tree[flatRowKey][flatColKey].isRowSubtotal = isRowSubtotal;\n        this.tree[flatRowKey][flatColKey].isColSubtotal = isColSubtotal;\n        this.tree[flatRowKey][flatColKey].isSubtotal =\n        isRowSubtotal || isColSubtotal;\n      }\n    }\n  }\n\n  getAggregator(rowKey, colKey) {\n    let agg;\n    const flatRowKey = flatKey(rowKey);\n    const flatColKey = flatKey(colKey);\n    if (rowKey.length === 0 && colKey.length === 0) {\n      agg = this.allTotal;\n    } else if (rowKey.length === 0) {\n      agg = this.colTotals[flatColKey];\n    } else if (colKey.length === 0) {\n      agg = this.rowTotals[flatRowKey];\n    } else {\n      agg = this.tree[flatRowKey][flatColKey];\n    }\n    return (\n      agg || {\n        value() {\n          return null;\n        },\n        format() {\n          return '';\n        }\n      });\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n// can handle arrays or jQuery selections of tables\nPivotData.forEachRecord = function (input, processRecord) {\n  if (Array.isArray(input)) {\n    // array of objects\n    return input.map((record) => processRecord(record));\n  }\n  throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Unknown input format'));\n};\n\nPivotData.defaultProps = {\n  aggregators,\n  cols: [],\n  rows: [],\n  vals: [],\n  aggregatorName: 'Count',\n  sorters: {},\n  rowOrder: 'key_a_to_z',\n  colOrder: 'key_a_to_z'\n};\n\nPivotData.propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_0___default().array), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)]).\n  isRequired,\n  aggregatorName: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  cols: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  rows: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  vals: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  valueFilter: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool))),\n  sorters: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([\n  (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func),\n  prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func))]\n  ),\n  derivedAttributes: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)),\n  rowOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  ),\n  colOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  )\n};\n\n;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(addSeparators, \"addSeparators\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(numberFormat, \"numberFormat\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rx, \"rx\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rd, \"rd\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(rz, \"rz\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(naturalSort, \"naturalSort\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(sortAs, \"sortAs\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(getSort, \"getSort\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmt, \"usFmt\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmtInt, \"usFmtInt\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(usFmtPct, \"usFmtPct\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(fmtNonString, \"fmtNonString\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(baseAggregatorTemplates, \"baseAggregatorTemplates\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(extendedAggregatorTemplates, \"extendedAggregatorTemplates\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(aggregatorTemplates, \"aggregatorTemplates\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(aggregators, \"aggregators\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(locales, \"locales\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(mthNamesEn, \"mthNamesEn\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(dayNamesEn, \"dayNamesEn\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(zeroPad, \"zeroPad\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(derivers, \"derivers\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(flatKey, \"flatKey\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");reactHotLoader.register(PivotData, \"PivotData\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\react-pivottable\\\\utilities.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVlBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanM/YmY1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuXHJcbmNvbnN0IGFkZFNlcGFyYXRvcnMgPSBmdW5jdGlvbiAoblN0ciwgdGhvdXNhbmRzU2VwLCBkZWNpbWFsU2VwKSB7XHJcbiAgY29uc3QgeCA9IFN0cmluZyhuU3RyKS5zcGxpdCgnLicpO1xyXG4gIGxldCB4MSA9IHhbMF07XHJcbiAgY29uc3QgeDIgPSB4Lmxlbmd0aCA+IDEgPyBkZWNpbWFsU2VwICsgeFsxXSA6ICcnO1xyXG4gIGNvbnN0IHJneCA9IC8oXFxkKykoXFxkezN9KS87XHJcbiAgd2hpbGUgKHJneC50ZXN0KHgxKSkge1xyXG4gICAgeDEgPSB4MS5yZXBsYWNlKHJneCwgYCQxJHt0aG91c2FuZHNTZXB9JDJgKTtcclxuICB9XHJcbiAgcmV0dXJuIHgxICsgeDI7XHJcbn07XHJcblxyXG5jb25zdCBudW1iZXJGb3JtYXQgPSBmdW5jdGlvbiAob3B0c0luKSB7XHJcbiAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICBkaWdpdHNBZnRlckRlY2ltYWw6IDIsXHJcbiAgICBzY2FsZXI6IDEsXHJcbiAgICB0aG91c2FuZHNTZXA6ICcsJyxcclxuICAgIGRlY2ltYWxTZXA6ICcuJyxcclxuICAgIHByZWZpeDogJycsXHJcbiAgICBzdWZmaXg6ICcnLFxyXG4gIH07XHJcbiAgY29uc3Qgb3B0cyA9IHsgLi4uZGVmYXVsdHMsIC4uLm9wdHNJbiB9O1xyXG4gIHJldHVybiBmdW5jdGlvbiAoeCkge1xyXG4gICAgaWYgKE51bWJlci5pc05hTih4KSB8fCAhTnVtYmVyLmlzRmluaXRlKHgpKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3VsdCA9IGFkZFNlcGFyYXRvcnMoXHJcbiAgICAgIChvcHRzLnNjYWxlciAqIHgpLnRvRml4ZWQob3B0cy5kaWdpdHNBZnRlckRlY2ltYWwpLFxyXG4gICAgICBvcHRzLnRob3VzYW5kc1NlcCxcclxuICAgICAgb3B0cy5kZWNpbWFsU2VwLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBgJHtvcHRzLnByZWZpeH0ke3Jlc3VsdH0ke29wdHMuc3VmZml4fWA7XHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IHJ4ID0gLyhcXGQrKXwoXFxEKykvZztcclxuY29uc3QgcmQgPSAvXFxkLztcclxuY29uc3QgcnogPSAvXjAvO1xyXG5jb25zdCBuYXR1cmFsU29ydCA9IChhcywgYnMpID0+IHtcclxuICAvLyBudWxscyBmaXJzdFxyXG4gIGlmIChicyAhPT0gbnVsbCAmJiBhcyA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIC0xO1xyXG4gIH1cclxuICBpZiAoYXMgIT09IG51bGwgJiYgYnMgPT09IG51bGwpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgLy8gdGhlbiByYXcgTmFOc1xyXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIE51bWJlci5pc05hTihhcykpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgTnVtYmVyLmlzTmFOKGJzKSkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICAvLyBudW1iZXJzIGFuZCBudW1iZXJ5IHN0cmluZ3MgZ3JvdXAgdG9nZXRoZXJcclxuICBjb25zdCBuYXMgPSBOdW1iZXIoYXMpO1xyXG4gIGNvbnN0IG5icyA9IE51bWJlcihicyk7XHJcbiAgaWYgKG5hcyA8IG5icykge1xyXG4gICAgcmV0dXJuIC0xO1xyXG4gIH1cclxuICBpZiAobmFzID4gbmJzKSB7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIC8vIHdpdGhpbiB0aGF0LCB0cnVlIG51bWJlcnMgYmVmb3JlIG51bWJlcnkgc3RyaW5nc1xyXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyAhPT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGFzICE9PSAnbnVtYmVyJykge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyA9PT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgLy8gJ0luZmluaXR5JyBpcyBhIHRleHR1YWwgbnVtYmVyLCBzbyBsZXNzIHRoYW4gJ0EnXHJcbiAgaWYgKE51bWJlci5pc05hTihuYnMpICYmICFOdW1iZXIuaXNOYU4obmFzKSkge1xyXG4gICAgcmV0dXJuIC0xO1xyXG4gIH1cclxuICBpZiAoTnVtYmVyLmlzTmFOKG5hcykgJiYgIU51bWJlci5pc05hTihuYnMpKSB7XHJcbiAgICByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIC8vIGZpbmFsbHksIFwic21hcnRcIiBzdHJpbmcgc29ydGluZyBwZXIgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDM3MzQyMS8xMTI4NzFcclxuICBsZXQgYSA9IFN0cmluZyhhcyk7XHJcbiAgbGV0IGIgPSBTdHJpbmcoYnMpO1xyXG4gIGlmIChhID09PSBiKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbiAgaWYgKCFyZC50ZXN0KGEpIHx8ICFyZC50ZXN0KGIpKSB7XHJcbiAgICByZXR1cm4gYSA+IGIgPyAxIDogLTE7XHJcbiAgfVxyXG5cclxuICAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3Igc3RyaW5ncyBjb250YWluaW5nIGRpZ2l0c1xyXG4gIGEgPSBhLm1hdGNoKHJ4KTtcclxuICBiID0gYi5tYXRjaChyeCk7XHJcbiAgd2hpbGUgKGEubGVuZ3RoICYmIGIubGVuZ3RoKSB7XHJcbiAgICBjb25zdCBhMSA9IGEuc2hpZnQoKTtcclxuICAgIGNvbnN0IGIxID0gYi5zaGlmdCgpO1xyXG4gICAgaWYgKGExICE9PSBiMSkge1xyXG4gICAgICBpZiAocmQudGVzdChhMSkgJiYgcmQudGVzdChiMSkpIHtcclxuICAgICAgICByZXR1cm4gYTEucmVwbGFjZShyeiwgJy4wJykgLSBiMS5yZXBsYWNlKHJ6LCAnLjAnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYTEgPiBiMSA/IDEgOiAtMTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGEubGVuZ3RoIC0gYi5sZW5ndGg7XHJcbn07XHJcblxyXG5jb25zdCBzb3J0QXMgPSBmdW5jdGlvbiAob3JkZXIpIHtcclxuICBjb25zdCBtYXBwaW5nID0ge307XHJcblxyXG4gIC8vIHNvcnQgbG93ZXJjYXNlZCBrZXlzIHNpbWlsYXJseVxyXG4gIGNvbnN0IGxNYXBwaW5nID0ge307XHJcbiAgb3JkZXIuZm9yRWFjaCgoZWxlbWVudCwgaSkgPT4ge1xyXG4gICAgbWFwcGluZ1tlbGVtZW50XSA9IGk7XHJcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGxNYXBwaW5nW2VsZW1lbnQudG9Mb3dlckNhc2UoKV0gPSBpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgaWYgKGEgaW4gbWFwcGluZyAmJiBiIGluIG1hcHBpbmcpIHtcclxuICAgICAgcmV0dXJuIG1hcHBpbmdbYV0gLSBtYXBwaW5nW2JdO1xyXG4gICAgfVxyXG4gICAgaWYgKGEgaW4gbWFwcGluZykge1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcbiAgICBpZiAoYiBpbiBtYXBwaW5nKSB7XHJcbiAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGEgaW4gbE1hcHBpbmcgJiYgYiBpbiBsTWFwcGluZykge1xyXG4gICAgICByZXR1cm4gbE1hcHBpbmdbYV0gLSBsTWFwcGluZ1tiXTtcclxuICAgIH1cclxuICAgIGlmIChhIGluIGxNYXBwaW5nKSB7XHJcbiAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIGlmIChiIGluIGxNYXBwaW5nKSB7XHJcbiAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hdHVyYWxTb3J0KGEsIGIpO1xyXG4gIH07XHJcbn07XHJcblxyXG5jb25zdCBnZXRTb3J0ID0gZnVuY3Rpb24gKHNvcnRlcnMsIGF0dHIpIHtcclxuICBpZiAoc29ydGVycykge1xyXG4gICAgaWYgKHR5cGVvZiBzb3J0ZXJzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNvbnN0IHNvcnQgPSBzb3J0ZXJzKGF0dHIpO1xyXG4gICAgICBpZiAodHlwZW9mIHNvcnQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gc29ydDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChhdHRyIGluIHNvcnRlcnMpIHtcclxuICAgICAgcmV0dXJuIHNvcnRlcnNbYXR0cl07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBuYXR1cmFsU29ydDtcclxufTtcclxuXHJcbi8vIGFnZ3JlZ2F0b3IgdGVtcGxhdGVzIGRlZmF1bHQgdG8gVVMgbnVtYmVyIGZvcm1hdHRpbmcgYnV0IHRoaXMgaXMgb3ZlcnJpZGFibGVcclxuY29uc3QgdXNGbXQgPSBudW1iZXJGb3JtYXQoKTtcclxuY29uc3QgdXNGbXRJbnQgPSBudW1iZXJGb3JtYXQoeyBkaWdpdHNBZnRlckRlY2ltYWw6IDAgfSk7XHJcbmNvbnN0IHVzRm10UGN0ID0gbnVtYmVyRm9ybWF0KHtcclxuICBkaWdpdHNBZnRlckRlY2ltYWw6IDEsXHJcbiAgc2NhbGVyOiAxMDAsXHJcbiAgc3VmZml4OiAnJScsXHJcbn0pO1xyXG5cclxuY29uc3QgZm10Tm9uU3RyaW5nID0gZm9ybWF0dGVyID0+IHggPT5cclxuICB0eXBlb2YgeCA9PT0gJ3N0cmluZycgPyB4IDogZm9ybWF0dGVyKHgpO1xyXG5cclxuY29uc3QgYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMgPSB7XHJcbiAgY291bnQoZm9ybWF0dGVyID0gdXNGbXRJbnQpIHtcclxuICAgIHJldHVybiAoKSA9PlxyXG4gICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgcHVzaCgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHVuaXF1ZXMoZm4sIGZvcm1hdHRlciA9IHVzRm10SW50KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB1bmlxOiBbXSxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuZnJvbSh0aGlzLnVuaXEpLmluY2x1ZGVzKHJlY29yZFthdHRyXSkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnVuaXEucHVzaChyZWNvcmRbYXR0cl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbih0aGlzLnVuaXEpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHN1bShmb3JtYXR0ZXIgPSB1c0ZtdCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VtOiAwLFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTihOdW1iZXIocmVjb3JkW2F0dHJdKSkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnN1bSA9IHJlY29yZFthdHRyXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnN1bSArPSBwYXJzZUZsb2F0KHJlY29yZFthdHRyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VtO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGV4dHJlbWVzKG1vZGUsIGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsOiBudWxsLFxyXG4gICAgICAgICAgc29ydGVyOiBnZXRTb3J0KFxyXG4gICAgICAgICAgICB0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhLnNvcnRlcnMgOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRyLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSByZWNvcmRbYXR0cl07XHJcbiAgICAgICAgICAgIGlmIChbJ21pbicsICdtYXgnXS5pbmNsdWRlcyhtb2RlKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNvZXJjZWRWYWx1ZSA9IE51bWJlcih4KTtcclxuICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGNvZXJjZWRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsID1cclxuICAgICAgICAgICAgICAgICAgIXRoaXMudmFsIHx8XHJcbiAgICAgICAgICAgICAgICAgIChtb2RlID09PSAnbWluJyAmJiB4IDwgdGhpcy52YWwpIHx8XHJcbiAgICAgICAgICAgICAgICAgIChtb2RlID09PSAnbWF4JyAmJiB4ID4gdGhpcy52YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgPyB4XHJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnZhbDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWwgPSBNYXRoW21vZGVdKFxyXG4gICAgICAgICAgICAgICAgICBjb2VyY2VkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiBjb2VyY2VkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICBtb2RlID09PSAnZmlyc3QnICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5zb3J0ZXIoeCwgdGhpcy52YWwgIT09IG51bGwgPyB0aGlzLnZhbCA6IHgpIDw9IDBcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy52YWwgPSB4O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgIG1vZGUgPT09ICdsYXN0JyAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuc29ydGVyKHgsIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiB4KSA+PSAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMudmFsID0geDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWw7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0KHgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXIoeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBxdWFudGlsZShxLCBmb3JtYXR0ZXIgPSB1c0ZtdCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsczogW10sXHJcbiAgICAgICAgICBzdHJNYXA6IHt9LFxyXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gcmVjb3JkW2F0dHJdO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gTnVtYmVyKHZhbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdHJNYXBbdmFsXSA9ICh0aGlzLnN0ck1hcFt2YWxdIHx8IDApICsgMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnZhbHMucHVzaCh4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdGhpcy52YWxzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3RyTWFwKS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0ck1hcCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnN0ck1hcCkuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG1pZGRsZSA9IE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIDIpO1xyXG5cclxuICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5zdHJNYXApO1xyXG4gICAgICAgICAgICAgIHJldHVybiBrZXlzLmxlbmd0aCAlIDIgIT09IDBcclxuICAgICAgICAgICAgICAgID8ga2V5c1ttaWRkbGVdXHJcbiAgICAgICAgICAgICAgICA6IChrZXlzW21pZGRsZSAtIDFdICsga2V5c1ttaWRkbGVdKSAvIDI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudmFscy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSAodGhpcy52YWxzLmxlbmd0aCAtIDEpICogcTtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZhbHNbTWF0aC5mbG9vcihpKV0gKyB0aGlzLnZhbHNbTWF0aC5jZWlsKGkpXSkgLyAyLjA7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0OiBmbXROb25TdHJpbmcoZm9ybWF0dGVyKSxcclxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgcnVubmluZ1N0YXQobW9kZSA9ICdtZWFuJywgZGRvZiA9IDEsIGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBuOiAwLjAsXHJcbiAgICAgICAgICBtOiAwLjAsXHJcbiAgICAgICAgICBzOiAwLjAsXHJcbiAgICAgICAgICBzdHJWYWx1ZTogbnVsbCxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBOdW1iZXIocmVjb3JkW2F0dHJdKTtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTih4KSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RyVmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHJlY29yZFthdHRyXSA9PT0gJ3N0cmluZycgPyByZWNvcmRbYXR0cl0gOiB0aGlzLnN0clZhbHVlO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm4gKz0gMS4wO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uID09PSAxLjApIHtcclxuICAgICAgICAgICAgICB0aGlzLm0gPSB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1OZXcgPSB0aGlzLm0gKyAoeCAtIHRoaXMubSkgLyB0aGlzLm47XHJcbiAgICAgICAgICAgIHRoaXMucyArPSAoeCAtIHRoaXMubSkgKiAoeCAtIG1OZXcpO1xyXG4gICAgICAgICAgICB0aGlzLm0gPSBtTmV3O1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0clZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ21lYW4nKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMubiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgLyAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm4gPD0gZGRvZikge1xyXG4gICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgICAgICAgIGNhc2UgJ3Zhcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zIC8gKHRoaXMubiAtIGRkb2YpO1xyXG4gICAgICAgICAgICAgIGNhc2UgJ3N0ZGV2JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5zIC8gKHRoaXMubiAtIGRkb2YpKTtcclxuICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIG1vZGUgZm9yIHJ1bm5pbmdTdGF0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQ6IGZtdE5vblN0cmluZyhmb3JtYXR0ZXIpLFxyXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBzdW1PdmVyU3VtKGZvcm1hdHRlciA9IHVzRm10KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFtudW0sIGRlbm9tXSkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdW1OdW06IDAsXHJcbiAgICAgICAgICBzdW1EZW5vbTogMCxcclxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKE51bWJlcihyZWNvcmRbbnVtXSkpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdW1OdW0gKz0gcGFyc2VGbG9hdChyZWNvcmRbbnVtXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKHJlY29yZFtkZW5vbV0pKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3VtRGVub20gKz0gcGFyc2VGbG9hdChyZWNvcmRbZGVub21dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdW1OdW0gLyB0aGlzLnN1bURlbm9tO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxyXG4gICAgICAgICAgbnVtSW5wdXRzOlxyXG4gICAgICAgICAgICB0eXBlb2YgbnVtICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVub20gIT09ICd1bmRlZmluZWQnID8gMCA6IDIsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgZnJhY3Rpb25PZih3cmFwcGVkLCB0eXBlID0gJ3RvdGFsJywgZm9ybWF0dGVyID0gdXNGbXRQY3QpIHtcclxuICAgIHJldHVybiAoLi4ueCkgPT5cclxuICAgICAgZnVuY3Rpb24gKGRhdGEsIHJvd0tleSwgY29sS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNlbGVjdG9yOiB7IHRvdGFsOiBbW10sIFtdXSwgcm93OiBbcm93S2V5LCBbXV0sIGNvbDogW1tdLCBjb2xLZXldIH1bXHJcbiAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBpbm5lcjogd3JhcHBlZCguLi5BcnJheS5mcm9tKHggfHwgW10pKShkYXRhLCByb3dLZXksIGNvbEtleSksXHJcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyLnB1c2gocmVjb3JkKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmb3JtYXQ6IGZtdE5vblN0cmluZyhmb3JtYXR0ZXIpLFxyXG4gICAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjYyA9IGRhdGFcclxuICAgICAgICAgICAgICAuZ2V0QWdncmVnYXRvciguLi5BcnJheS5mcm9tKHRoaXMuc2VsZWN0b3IgfHwgW10pKVxyXG4gICAgICAgICAgICAgIC5pbm5lci52YWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhY2MgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXIudmFsdWUoKSAvIGFjYztcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBudW1JbnB1dHM6IHdyYXBwZWQoLi4uQXJyYXkuZnJvbSh4IHx8IFtdKSkoKS5udW1JbnB1dHMsXHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgZXh0ZW5kZWRBZ2dyZWdhdG9yVGVtcGxhdGVzID0ge1xyXG4gIGNvdW50VW5pcXVlKGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy51bmlxdWVzKHggPT4geC5sZW5ndGgsIGYpO1xyXG4gIH0sXHJcbiAgbGlzdFVuaXF1ZShzLCBmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMudW5pcXVlcyh4ID0+IHguam9pbihzKSwgZiB8fCAoeCA9PiB4KSk7XHJcbiAgfSxcclxuICBtYXgoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdtYXgnLCBmKTtcclxuICB9LFxyXG4gIG1pbihmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ21pbicsIGYpO1xyXG4gIH0sXHJcbiAgZmlyc3QoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdmaXJzdCcsIGYpO1xyXG4gIH0sXHJcbiAgbGFzdChmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ2xhc3QnLCBmKTtcclxuICB9LFxyXG4gIG1lZGlhbihmKSB7XHJcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucXVhbnRpbGUoMC41LCBmKTtcclxuICB9LFxyXG4gIGF2ZXJhZ2UoZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCdtZWFuJywgMSwgZik7XHJcbiAgfSxcclxuICB2YXIoZGRvZiwgZikge1xyXG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCd2YXInLCBkZG9mLCBmKTtcclxuICB9LFxyXG4gIHN0ZGV2KGRkb2YsIGYpIHtcclxuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5ydW5uaW5nU3RhdCgnc3RkZXYnLCBkZG9mLCBmKTtcclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgYWdncmVnYXRvclRlbXBsYXRlcyA9IHtcclxuICAuLi5iYXNlQWdncmVnYXRvclRlbXBsYXRlcyxcclxuICAuLi5leHRlbmRlZEFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXHJcbn07XHJcblxyXG4vLyBkZWZhdWx0IGFnZ3JlZ2F0b3JzICYgcmVuZGVyZXJzIHVzZSBVUyBuYW1pbmcgYW5kIG51bWJlciBmb3JtYXR0aW5nXHJcbmNvbnN0IGFnZ3JlZ2F0b3JzID0gKHRwbCA9PiAoe1xyXG4gIENvdW50OiB0cGwuY291bnQodXNGbXRJbnQpLFxyXG4gICdDb3VudCBVbmlxdWUgVmFsdWVzJzogdHBsLmNvdW50VW5pcXVlKHVzRm10SW50KSxcclxuICAnTGlzdCBVbmlxdWUgVmFsdWVzJzogdHBsLmxpc3RVbmlxdWUoJywgJyksXHJcbiAgU3VtOiB0cGwuc3VtKHVzRm10KSxcclxuICAnSW50ZWdlciBTdW0nOiB0cGwuc3VtKHVzRm10SW50KSxcclxuICBBdmVyYWdlOiB0cGwuYXZlcmFnZSh1c0ZtdCksXHJcbiAgTWVkaWFuOiB0cGwubWVkaWFuKHVzRm10KSxcclxuICAnU2FtcGxlIFZhcmlhbmNlJzogdHBsLnZhcigxLCB1c0ZtdCksXHJcbiAgJ1NhbXBsZSBTdGFuZGFyZCBEZXZpYXRpb24nOiB0cGwuc3RkZXYoMSwgdXNGbXQpLFxyXG4gIE1pbmltdW06IHRwbC5taW4odXNGbXQpLFxyXG4gIE1heGltdW06IHRwbC5tYXgodXNGbXQpLFxyXG4gIEZpcnN0OiB0cGwuZmlyc3QodXNGbXQpLFxyXG4gIExhc3Q6IHRwbC5sYXN0KHVzRm10KSxcclxuICAnU3VtIG92ZXIgU3VtJzogdHBsLnN1bU92ZXJTdW0odXNGbXQpLFxyXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgVG90YWwnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICd0b3RhbCcsIHVzRm10UGN0KSxcclxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICdyb3cnLCB1c0ZtdFBjdCksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogdHBsLmZyYWN0aW9uT2YodHBsLnN1bSgpLCAnY29sJywgdXNGbXRQY3QpLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAndG90YWwnLCB1c0ZtdFBjdCksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgJ3JvdycsIHVzRm10UGN0KSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAnY29sJywgdXNGbXRQY3QpLFxyXG59KSkoYWdncmVnYXRvclRlbXBsYXRlcyk7XHJcblxyXG5jb25zdCBsb2NhbGVzID0ge1xyXG4gIGVuOiB7XHJcbiAgICBhZ2dyZWdhdG9ycyxcclxuICAgIGxvY2FsZVN0cmluZ3M6IHtcclxuICAgICAgcmVuZGVyRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCByZW5kZXJpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy4nLFxyXG4gICAgICBjb21wdXRlRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCBjb21wdXRpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy4nLFxyXG4gICAgICB1aVJlbmRlckVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgcmVuZGVyaW5nIHRoZSBQaXZvdFRhYmxlIFVJLicsXHJcbiAgICAgIHNlbGVjdEFsbDogJ1NlbGVjdCBBbGwnLFxyXG4gICAgICBzZWxlY3ROb25lOiAnU2VsZWN0IE5vbmUnLFxyXG4gICAgICB0b29NYW55OiAnKHRvbyBtYW55IHRvIGxpc3QpJyxcclxuICAgICAgZmlsdGVyUmVzdWx0czogJ0ZpbHRlciB2YWx1ZXMnLFxyXG4gICAgICBhcHBseTogJ0FwcGx5JyxcclxuICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcclxuICAgICAgdG90YWxzOiAnVG90YWxzJyxcclxuICAgICAgdnM6ICd2cycsXHJcbiAgICAgIGJ5OiAnYnknLFxyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG5cclxuLy8gZGF0ZUZvcm1hdCBkZXJpdmVyIGwxMG4gcmVxdWlyZXMgbW9udGggYW5kIGRheSBuYW1lcyB0byBiZSBwYXNzZWQgaW4gZGlyZWN0bHlcclxuY29uc3QgbXRoTmFtZXNFbiA9IFtcclxuICAnSmFuJyxcclxuICAnRmViJyxcclxuICAnTWFyJyxcclxuICAnQXByJyxcclxuICAnTWF5JyxcclxuICAnSnVuJyxcclxuICAnSnVsJyxcclxuICAnQXVnJyxcclxuICAnU2VwJyxcclxuICAnT2N0JyxcclxuICAnTm92JyxcclxuICAnRGVjJyxcclxuXTtcclxuY29uc3QgZGF5TmFtZXNFbiA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107XHJcbmNvbnN0IHplcm9QYWQgPSBudW1iZXIgPT4gYDAke251bWJlcn1gLnN1YnN0cigtMiwgMik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbWFnaWMtbnVtYmVyc1xyXG5cclxuY29uc3QgZGVyaXZlcnMgPSB7XHJcbiAgYmluKGNvbCwgYmluV2lkdGgpIHtcclxuICAgIHJldHVybiByZWNvcmQgPT4gcmVjb3JkW2NvbF0gLSAocmVjb3JkW2NvbF0gJSBiaW5XaWR0aCk7XHJcbiAgfSxcclxuICBkYXRlRm9ybWF0KFxyXG4gICAgY29sLFxyXG4gICAgZm9ybWF0U3RyaW5nLFxyXG4gICAgdXRjT3V0cHV0ID0gZmFsc2UsXHJcbiAgICBtdGhOYW1lcyA9IG10aE5hbWVzRW4sXHJcbiAgICBkYXlOYW1lcyA9IGRheU5hbWVzRW4sXHJcbiAgKSB7XHJcbiAgICBjb25zdCB1dGMgPSB1dGNPdXRwdXQgPyAnVVRDJyA6ICcnO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWNvcmQpIHtcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UocmVjb3JkW2NvbF0pKTtcclxuICAgICAgaWYgKE51bWJlci5pc05hTihkYXRlKSkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm9ybWF0U3RyaW5nLnJlcGxhY2UoLyUoLikvZywgZnVuY3Rpb24gKG0sIHApIHtcclxuICAgICAgICBzd2l0Y2ggKHApIHtcclxuICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZVtgZ2V0JHt1dGN9RnVsbFllYXJgXSgpO1xyXG4gICAgICAgICAgY2FzZSAnbSc6XHJcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfU1vbnRoYF0oKSArIDEpO1xyXG4gICAgICAgICAgY2FzZSAnbic6XHJcbiAgICAgICAgICAgIHJldHVybiBtdGhOYW1lc1tkYXRlW2BnZXQke3V0Y31Nb250aGBdKCldO1xyXG4gICAgICAgICAgY2FzZSAnZCc6XHJcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfURhdGVgXSgpKTtcclxuICAgICAgICAgIGNhc2UgJ3cnOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF5TmFtZXNbZGF0ZVtgZ2V0JHt1dGN9RGF5YF0oKV07XHJcbiAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVbYGdldCR7dXRjfURheWBdKCk7XHJcbiAgICAgICAgICBjYXNlICdIJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9SG91cnNgXSgpKTtcclxuICAgICAgICAgIGNhc2UgJ00nOlxyXG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31NaW51dGVzYF0oKSk7XHJcbiAgICAgICAgICBjYXNlICdTJzpcclxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9U2Vjb25kc2BdKCkpO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGAlJHtwfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgfSxcclxufTtcclxuXHJcbi8vIEdpdmVuIGFuIGFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZXMsIGNvbnZlcnQgdG8gYSBrZXkgdGhhdFxyXG4vLyBjYW4gYmUgdXNlZCBpbiBvYmplY3RzLlxyXG5jb25zdCBmbGF0S2V5ID0gYXR0clZhbHMgPT4gYXR0clZhbHMuam9pbihTdHJpbmcuZnJvbUNoYXJDb2RlKDApKTtcclxuXHJcbi8qXHJcbkRhdGEgTW9kZWwgY2xhc3NcclxuKi9cclxuXHJcbmNsYXNzIFBpdm90RGF0YSB7XHJcbiAgY29uc3RydWN0b3IoaW5wdXRQcm9wcyA9IHt9LCBzdWJ0b3RhbHMgPSB7fSkge1xyXG4gICAgdGhpcy5wcm9wcyA9IHsgLi4uUGl2b3REYXRhLmRlZmF1bHRQcm9wcywgLi4uaW5wdXRQcm9wcyB9O1xyXG4gICAgdGhpcy5wcm9jZXNzUmVjb3JkID0gdGhpcy5wcm9jZXNzUmVjb3JkLmJpbmQodGhpcyk7XHJcbiAgICBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoXHJcbiAgICAgIFBpdm90RGF0YS5wcm9wVHlwZXMsXHJcbiAgICAgIHRoaXMucHJvcHMsXHJcbiAgICAgICdwcm9wJyxcclxuICAgICAgJ1Bpdm90RGF0YScsXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWdncmVnYXRvciA9IHRoaXMucHJvcHNcclxuICAgICAgLmFnZ3JlZ2F0b3JzRmFjdG9yeSh0aGlzLnByb3BzLmRlZmF1bHRGb3JtYXR0ZXIpXHJcbiAgICAgIFt0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lXSh0aGlzLnByb3BzLnZhbHMpO1xyXG4gICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9ycyA9XHJcbiAgICAgIHRoaXMucHJvcHMuY3VzdG9tRm9ybWF0dGVycyAmJlxyXG4gICAgICBPYmplY3QuZW50cmllcyh0aGlzLnByb3BzLmN1c3RvbUZvcm1hdHRlcnMpLnJlZHVjZShcclxuICAgICAgICAoYWNjLCBba2V5LCBjb2x1bW5Gb3JtYXR0ZXJdKSA9PiB7XHJcbiAgICAgICAgICBhY2Nba2V5XSA9IHt9O1xyXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoY29sdW1uRm9ybWF0dGVyKS5mb3JFYWNoKChbY29sdW1uLCBmb3JtYXR0ZXJdKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1trZXldW2NvbHVtbl0gPSB0aGlzLnByb3BzXHJcbiAgICAgICAgICAgICAgLmFnZ3JlZ2F0b3JzRmFjdG9yeShmb3JtYXR0ZXIpXHJcbiAgICAgICAgICAgICAgW3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWVdKHRoaXMucHJvcHMudmFscyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7fSxcclxuICAgICAgKTtcclxuICAgIHRoaXMudHJlZSA9IHt9O1xyXG4gICAgdGhpcy5yb3dLZXlzID0gW107XHJcbiAgICB0aGlzLmNvbEtleXMgPSBbXTtcclxuICAgIHRoaXMucm93VG90YWxzID0ge307XHJcbiAgICB0aGlzLmNvbFRvdGFscyA9IHt9O1xyXG4gICAgdGhpcy5hbGxUb3RhbCA9IHRoaXMuYWdncmVnYXRvcih0aGlzLCBbXSwgW10pO1xyXG4gICAgdGhpcy5zdWJ0b3RhbHMgPSBzdWJ0b3RhbHM7XHJcbiAgICB0aGlzLnNvcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBpbnB1dCwgYWNjdW11bGF0aW5nIGRhdGEgZm9yIGNlbGxzXHJcbiAgICBQaXZvdERhdGEuZm9yRWFjaFJlY29yZCh0aGlzLnByb3BzLmRhdGEsIHRoaXMucHJvY2Vzc1JlY29yZCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKHJlY29yZCwgdG90YWxzS2V5cykge1xyXG4gICAgaWYgKCF0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XHJcbiAgICB9XHJcbiAgICBjb25zdCBbZ3JvdXBOYW1lLCBncm91cFZhbHVlXSA9XHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHJlY29yZCkuZmluZChcclxuICAgICAgICAoW25hbWUsIHZhbHVlXSkgPT5cclxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnNbbmFtZV0gJiZcclxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnNbbmFtZV1bdmFsdWVdLFxyXG4gICAgICApIHx8IFtdO1xyXG4gICAgaWYgKFxyXG4gICAgICAhZ3JvdXBOYW1lIHx8XHJcbiAgICAgICFncm91cFZhbHVlIHx8XHJcbiAgICAgICh0b3RhbHNLZXlzICYmICF0b3RhbHNLZXlzLmluY2x1ZGVzKGdyb3VwVmFsdWUpKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tncm91cE5hbWVdW2dyb3VwVmFsdWVdIHx8IHRoaXMuYWdncmVnYXRvcjtcclxuICB9XHJcblxyXG4gIGFyclNvcnQoYXR0cnMsIHBhcnRpYWxPblRvcCwgcmV2ZXJzZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBzb3J0ZXJzQXJyID0gYXR0cnMubWFwKGEgPT4gZ2V0U29ydCh0aGlzLnByb3BzLnNvcnRlcnMsIGEpKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGltaXQ7IGkgKz0gMSkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRlciA9IHNvcnRlcnNBcnJbaV07XHJcbiAgICAgICAgY29uc3QgY29tcGFyaXNvbiA9IHJldmVyc2UgPyBzb3J0ZXIoYltpXSwgYVtpXSkgOiBzb3J0ZXIoYVtpXSwgYltpXSk7XHJcbiAgICAgICAgaWYgKGNvbXBhcmlzb24gIT09IDApIHtcclxuICAgICAgICAgIHJldHVybiBjb21wYXJpc29uO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcGFydGlhbE9uVG9wID8gYS5sZW5ndGggLSBiLmxlbmd0aCA6IGIubGVuZ3RoIC0gYS5sZW5ndGg7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc29ydEtleXMoKSB7XHJcbiAgICBpZiAoIXRoaXMuc29ydGVkKSB7XHJcbiAgICAgIHRoaXMuc29ydGVkID0gdHJ1ZTtcclxuICAgICAgY29uc3QgdiA9IChyLCBjKSA9PiB0aGlzLmdldEFnZ3JlZ2F0b3IociwgYykudmFsdWUoKTtcclxuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLnJvd09yZGVyKSB7XHJcbiAgICAgICAgY2FzZSAna2V5X3pfdG9fYSc6XHJcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydChcclxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMucm93cywgdGhpcy5zdWJ0b3RhbHMucm93UGFydGlhbE9uVG9wLCB0cnVlKSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd2YWx1ZV9hX3RvX3onOlxyXG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoKGEsIGIpID0+IG5hdHVyYWxTb3J0KHYoYSwgW10pLCB2KGIsIFtdKSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndmFsdWVfel90b19hJzpcclxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KChhLCBiKSA9PiAtbmF0dXJhbFNvcnQodihhLCBbXSksIHYoYiwgW10pKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLnJvd3MsIHRoaXMuc3VidG90YWxzLnJvd1BhcnRpYWxPblRvcCksXHJcbiAgICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5jb2xPcmRlcikge1xyXG4gICAgICAgIGNhc2UgJ2tleV96X3RvX2EnOlxyXG4gICAgICAgICAgdGhpcy5jb2xLZXlzLnNvcnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLmNvbHMsIHRoaXMuc3VidG90YWxzLmNvbFBhcnRpYWxPblRvcCwgdHJ1ZSksXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndmFsdWVfYV90b196JzpcclxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KChhLCBiKSA9PiBuYXR1cmFsU29ydCh2KFtdLCBhKSwgdihbXSwgYikpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ZhbHVlX3pfdG9fYSc6XHJcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydCgoYSwgYikgPT4gLW5hdHVyYWxTb3J0KHYoW10sIGEpLCB2KFtdLCBiKSkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KFxyXG4gICAgICAgICAgICB0aGlzLmFyclNvcnQodGhpcy5wcm9wcy5jb2xzLCB0aGlzLnN1YnRvdGFscy5jb2xQYXJ0aWFsT25Ub3ApLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29sS2V5cygpIHtcclxuICAgIHRoaXMuc29ydEtleXMoKTtcclxuICAgIHJldHVybiB0aGlzLmNvbEtleXM7XHJcbiAgfVxyXG5cclxuICBnZXRSb3dLZXlzKCkge1xyXG4gICAgdGhpcy5zb3J0S2V5cygpO1xyXG4gICAgcmV0dXJuIHRoaXMucm93S2V5cztcclxuICB9XHJcblxyXG4gIHByb2Nlc3NSZWNvcmQocmVjb3JkKSB7XHJcbiAgICAvLyB0aGlzIGNvZGUgaXMgY2FsbGVkIGluIGEgdGlnaHQgbG9vcFxyXG4gICAgY29uc3QgY29sS2V5ID0gW107XHJcbiAgICBjb25zdCByb3dLZXkgPSBbXTtcclxuICAgIHRoaXMucHJvcHMuY29scy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgIGNvbEtleS5wdXNoKGNvbCBpbiByZWNvcmQgPyByZWNvcmRbY29sXSA6ICdudWxsJyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucHJvcHMucm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgIHJvd0tleS5wdXNoKHJvdyBpbiByZWNvcmQgPyByZWNvcmRbcm93XSA6ICdudWxsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFsbFRvdGFsLnB1c2gocmVjb3JkKTtcclxuXHJcbiAgICBjb25zdCByb3dTdGFydCA9IHRoaXMuc3VidG90YWxzLnJvd0VuYWJsZWQgPyAxIDogTWF0aC5tYXgoMSwgcm93S2V5Lmxlbmd0aCk7XHJcbiAgICBjb25zdCBjb2xTdGFydCA9IHRoaXMuc3VidG90YWxzLmNvbEVuYWJsZWQgPyAxIDogTWF0aC5tYXgoMSwgY29sS2V5Lmxlbmd0aCk7XHJcblxyXG4gICAgbGV0IGlzUm93U3VidG90YWw7XHJcbiAgICBsZXQgaXNDb2xTdWJ0b3RhbDtcclxuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcclxuICAgICAgaXNSb3dTdWJ0b3RhbCA9IHJpIDwgcm93S2V5Lmxlbmd0aDtcclxuICAgICAgY29uc3QgZlJvd0tleSA9IHJvd0tleS5zbGljZSgwLCByaSk7XHJcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xyXG4gICAgICBpZiAoIXRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldKSB7XHJcbiAgICAgICAgdGhpcy5yb3dLZXlzLnB1c2goZlJvd0tleSk7XHJcbiAgICAgICAgdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXHJcbiAgICAgICAgICByZWNvcmQsXHJcbiAgICAgICAgICByb3dLZXksXHJcbiAgICAgICAgKSh0aGlzLCBmUm93S2V5LCBbXSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0ucHVzaChyZWNvcmQpO1xyXG4gICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XS5pc1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBjaSA9IGNvbFN0YXJ0OyBjaSA8PSBjb2xLZXkubGVuZ3RoOyBjaSArPSAxKSB7XHJcbiAgICAgIGlzQ29sU3VidG90YWwgPSBjaSA8IGNvbEtleS5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IGZDb2xLZXkgPSBjb2xLZXkuc2xpY2UoMCwgY2kpO1xyXG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShmQ29sS2V5KTtcclxuICAgICAgaWYgKCF0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XSkge1xyXG4gICAgICAgIHRoaXMuY29sS2V5cy5wdXNoKGZDb2xLZXkpO1xyXG4gICAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldID0gdGhpcy5nZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKFxyXG4gICAgICAgICAgcmVjb3JkLFxyXG4gICAgICAgICAgY29sS2V5LFxyXG4gICAgICAgICkodGhpcywgW10sIGZDb2xLZXkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldLnB1c2gocmVjb3JkKTtcclxuICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0uaXNTdWJ0b3RhbCA9IGlzQ29sU3VidG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQW5kIG5vdyBmaWxsIGluIGZvciBhbGwgdGhlIHN1Yi1jZWxscy5cclxuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcclxuICAgICAgaXNSb3dTdWJ0b3RhbCA9IHJpIDwgcm93S2V5Lmxlbmd0aDtcclxuICAgICAgY29uc3QgZlJvd0tleSA9IHJvd0tleS5zbGljZSgwLCByaSk7XHJcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xyXG4gICAgICBpZiAoIXRoaXMudHJlZVtmbGF0Um93S2V5XSkge1xyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XSA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGNpID0gY29sU3RhcnQ7IGNpIDw9IGNvbEtleS5sZW5ndGg7IGNpICs9IDEpIHtcclxuICAgICAgICBpc0NvbFN1YnRvdGFsID0gY2kgPCBjb2xLZXkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGZDb2xLZXkgPSBjb2xLZXkuc2xpY2UoMCwgY2kpO1xyXG4gICAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGZDb2xLZXkpO1xyXG4gICAgICAgIGlmICghdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldKSB7XHJcbiAgICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXHJcbiAgICAgICAgICAgIHJlY29yZCxcclxuICAgICAgICAgICkodGhpcywgZlJvd0tleSwgZkNvbEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5wdXNoKHJlY29yZCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5pc1Jvd1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcclxuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0uaXNDb2xTdWJ0b3RhbCA9IGlzQ29sU3VidG90YWw7XHJcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLmlzU3VidG90YWwgPVxyXG4gICAgICAgICAgaXNSb3dTdWJ0b3RhbCB8fCBpc0NvbFN1YnRvdGFsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRBZ2dyZWdhdG9yKHJvd0tleSwgY29sS2V5KSB7XHJcbiAgICBsZXQgYWdnO1xyXG4gICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkocm93S2V5KTtcclxuICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleSk7XHJcbiAgICBpZiAocm93S2V5Lmxlbmd0aCA9PT0gMCAmJiBjb2xLZXkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGFnZyA9IHRoaXMuYWxsVG90YWw7XHJcbiAgICB9IGVsc2UgaWYgKHJvd0tleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWdnID0gdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV07XHJcbiAgICB9IGVsc2UgaWYgKGNvbEtleS5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWdnID0gdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZ2cgPSB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhZ2cgfHwge1xyXG4gICAgICAgIHZhbHVlKCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNhbiBoYW5kbGUgYXJyYXlzIG9yIGpRdWVyeSBzZWxlY3Rpb25zIG9mIHRhYmxlc1xyXG5QaXZvdERhdGEuZm9yRWFjaFJlY29yZCA9IGZ1bmN0aW9uIChpbnB1dCwgcHJvY2Vzc1JlY29yZCkge1xyXG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgLy8gYXJyYXkgb2Ygb2JqZWN0c1xyXG4gICAgcmV0dXJuIGlucHV0Lm1hcChyZWNvcmQgPT4gcHJvY2Vzc1JlY29yZChyZWNvcmQpKTtcclxuICB9XHJcbiAgdGhyb3cgbmV3IEVycm9yKHQoJ1Vua25vd24gaW5wdXQgZm9ybWF0JykpO1xyXG59O1xyXG5cclxuUGl2b3REYXRhLmRlZmF1bHRQcm9wcyA9IHtcclxuICBhZ2dyZWdhdG9ycyxcclxuICBjb2xzOiBbXSxcclxuICByb3dzOiBbXSxcclxuICB2YWxzOiBbXSxcclxuICBhZ2dyZWdhdG9yTmFtZTogJ0NvdW50JyxcclxuICBzb3J0ZXJzOiB7fSxcclxuICByb3dPcmRlcjogJ2tleV9hX3RvX3onLFxyXG4gIGNvbE9yZGVyOiAna2V5X2FfdG9feicsXHJcbn07XHJcblxyXG5QaXZvdERhdGEucHJvcFR5cGVzID0ge1xyXG4gIGRhdGE6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheSwgUHJvcFR5cGVzLm9iamVjdCwgUHJvcFR5cGVzLmZ1bmNdKVxyXG4gICAgLmlzUmVxdWlyZWQsXHJcbiAgYWdncmVnYXRvck5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY29sczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgcm93czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgdmFsczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgdmFsdWVGaWx0ZXI6IFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmJvb2wpKSxcclxuICBzb3J0ZXJzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcclxuICAgIFByb3BUeXBlcy5mdW5jLFxyXG4gICAgUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5mdW5jKSxcclxuICBdKSxcclxuICBkZXJpdmVkQXR0cmlidXRlczogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5mdW5jKSxcclxuICByb3dPcmRlcjogUHJvcFR5cGVzLm9uZU9mKFtcclxuICAgICdrZXlfYV90b196JyxcclxuICAgICdrZXlfel90b19hJyxcclxuICAgICd2YWx1ZV9hX3RvX3onLFxyXG4gICAgJ3ZhbHVlX3pfdG9fYScsXHJcbiAgXSksXHJcbiAgY29sT3JkZXI6IFByb3BUeXBlcy5vbmVPZihbXHJcbiAgICAna2V5X2FfdG9feicsXHJcbiAgICAna2V5X3pfdG9fYScsXHJcbiAgICAndmFsdWVfYV90b196JyxcclxuICAgICd2YWx1ZV96X3RvX2EnLFxyXG4gIF0pLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBhZ2dyZWdhdG9yVGVtcGxhdGVzLFxyXG4gIGFnZ3JlZ2F0b3JzLFxyXG4gIGRlcml2ZXJzLFxyXG4gIGxvY2FsZXMsXHJcbiAgbmF0dXJhbFNvcnQsXHJcbiAgbnVtYmVyRm9ybWF0LFxyXG4gIGdldFNvcnQsXHJcbiAgc29ydEFzLFxyXG4gIGZsYXRLZXksXHJcbiAgUGl2b3REYXRhLFxyXG59O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\n");

/***/ }),

/***/ "./packages/superset-ui-core/src/utils/getSelectedText.ts":
/*!****************************************************************!*\
  !*** ./packages/superset-ui-core/src/utils/getSelectedText.ts ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSelectedText: () => (/* binding */ getSelectedText)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\nconst getSelectedText = () => {var _window$getSelection;return (_window$getSelection = window.getSelection()) == null ? void 0 : _window$getSelection.toString();};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getSelectedText, \"getSelectedText\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\packages\\\\superset-ui-core\\\\src\\\\utils\\\\getSelectedText.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9zdXBlcnNldC11aS1jb3JlL3NyYy91dGlscy9nZXRTZWxlY3RlZFRleHQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BhY2thZ2VzL3N1cGVyc2V0LXVpLWNvcmUvc3JjL3V0aWxzL2dldFNlbGVjdGVkVGV4dC50cz85MTIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RlZFRleHQgPSAoKSA9PiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk/LnRvU3RyaW5nKCk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/superset-ui-core/src/utils/getSelectedText.ts\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx":
/*!******************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PivotTableChart)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/types/Column.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/getSelectedText.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/featureFlags.ts\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types */ \"./plugins/plugin-chart-pivot-table/src/types.ts\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  ${({ height, width, margin }) => `\n      margin: ${margin}px;\n      height: ${height - margin * 2}px;\n      width: ${typeof width === 'string' ? parseInt(width, 10) : width - margin * 2}px;\n `}\n`;\nconst PivotTableWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  height: 100%;\n  max-width: inherit;\n  overflow: auto;\n`;\nconst METRIC_KEY = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Metric');\nconst vals = ['value'];\nconst StyledPlusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__[\"default\"]))`\n  stroke: ${({ theme }) => theme.colors.grayscale.light2};\n  stroke-width: 16px;\n`;\nconst StyledMinusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__[\"default\"]))`\n  stroke: ${({ theme }) => theme.colors.grayscale.light2};\n  stroke-width: 16px;\n`;\nconst aggregatorsFactory = (formatter) => ({\n  Count: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(formatter),\n  'Count Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.countUnique(formatter),\n  'List Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.listUnique(', ', formatter),\n  Sum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(formatter),\n  Average: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.average(formatter),\n  Median: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.median(formatter),\n  'Sample Variance': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.var(1, formatter),\n  'Sample Standard Deviation': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.stdev(1, formatter),\n  Minimum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.min(formatter),\n  Maximum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.max(formatter),\n  First: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.first(formatter),\n  Last: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.last(formatter),\n  'Sum as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'total', formatter),\n  'Sum as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'row', formatter),\n  'Sum as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'col', formatter),\n  'Count as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'total', formatter),\n  'Count as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'row', formatter),\n  'Count as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'col', formatter)\n});\n/* If you change this logic, please update the corresponding Python\r\n * function (https://github.com/apache/superset/blob/master/superset/charts/post_processing.py),\r\n * or reach out to @betodealmeida.\r\n */\nfunction PivotTableChart(props) {\n  const { data, height, width, groupbyRows: groupbyRowsRaw, groupbyColumns: groupbyColumnsRaw, metrics, colOrder, rowOrder, aggregateFunction, transposePivot, combineMetric, rowSubtotalPosition, colSubtotalPosition, colTotals, colSubTotals, rowTotals, rowSubTotals, valueFormat, currencyFormat, emitCrossFilters, setDataMask, selectedFilters, verboseMap, columnFormats, currencyFormats, metricsLayout, metricColorFormatters, dateFormatters, onContextMenu, timeGrainSqla, allowRenderHtml } = props;\n  const theme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme)();\n  const defaultFormatter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => currencyFormat != null && currencyFormat.symbol ?\n  new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n    currency: currencyFormat,\n    d3Format: valueFormat\n  }) :\n  (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(valueFormat), [valueFormat, currencyFormat]);\n  const customFormatsArray = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Array.from(new Set([\n  ...Object.keys(columnFormats || {}),\n  ...Object.keys(currencyFormats || {})]\n  )).map((metricName) => [\n  metricName,\n  columnFormats[metricName] || valueFormat,\n  currencyFormats[metricName] || currencyFormat]\n  ), [columnFormats, currencyFormat, currencyFormats, valueFormat]);\n  const hasCustomMetricFormatters = customFormatsArray.length > 0;\n  const metricFormatters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => hasCustomMetricFormatters ?\n  {\n    [METRIC_KEY]: Object.fromEntries(customFormatsArray.map(([metric, d3Format, currency]) => [\n    metric,\n    currency ?\n    new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      currency,\n      d3Format\n    }) :\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(d3Format)]\n    ))\n  } :\n  undefined, [customFormatsArray, hasCustomMetricFormatters]);\n  const metricNames = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => metrics.map((metric) => typeof metric === 'string' ? metric : metric.label), [metrics]);\n  const unpivotedData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => data.reduce((acc, record) => [\n  ...acc,\n  ...metricNames.\n  map((name) => ({\n    ...record,\n    [METRIC_KEY]: name,\n    value: record[name]\n  })).\n  filter((record) => record.value !== null)],\n  []), [data, metricNames]);\n  const groupbyRows = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyRowsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyRowsRaw]);\n  const groupbyColumns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyColumnsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyColumnsRaw]);\n  const sorters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    [METRIC_KEY]: (0,_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.sortAs)(metricNames)\n  }), [metricNames]);\n  const [rows, cols] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let [rows_, cols_] = transposePivot ?\n    [groupbyColumns, groupbyRows] :\n    [groupbyRows, groupbyColumns];\n    if (metricsLayout === _types__WEBPACK_IMPORTED_MODULE_9__.MetricsLayoutEnum.ROWS) {\n      rows_ = combineMetric ? [...rows_, METRIC_KEY] : [METRIC_KEY, ...rows_];\n    } else\n    {\n      cols_ = combineMetric ? [...cols_, METRIC_KEY] : [METRIC_KEY, ...cols_];\n    }\n    return [rows_, cols_];\n  }, [\n  combineMetric,\n  groupbyColumns,\n  groupbyRows,\n  metricsLayout,\n  transposePivot]\n  );\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filters) => {\n    const filterKeys = Object.keys(filters);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    setDataMask({\n      extraFormData: {\n        filters: filterKeys.length === 0 ?\n        undefined :\n        filterKeys.map((key) => {var _groupby$find;\n          const val = filters == null ? void 0 : filters[key];\n          const col = (_groupby$find = groupby.find((item) => {\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n              return item === key;\n            }\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n              return item.label === key;\n            }\n            return false;\n          })) != null ? _groupby$find : '';\n          if (val === null || val === undefined)\n          return {\n            col,\n            op: 'IS NULL'\n          };\n          return {\n            col,\n            op: 'IN',\n            val: val\n          };\n        })\n      },\n      filterState: {\n        value: filters && Object.keys(filters).length ?\n        Object.values(filters) :\n        null,\n        selectedFilters: filters && Object.keys(filters).length ? filters : null\n      }\n    });\n  }, [groupbyColumnsRaw, groupbyRowsRaw, setDataMask]);\n  const getCrossFilterDataMask = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value) => {\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key;return !!selectedFilters && ((_selectedFilters$key = selectedFilters[key]) == null ? void 0 : _selectedFilters$key.includes(val));};\n    if (!value) {\n      return undefined;\n    }\n    const [key, val] = Object.entries(value)[0];\n    let values = { ...selectedFilters };\n    if (isActiveFilterValue(key, val)) {\n      values = {};\n    } else\n    {\n      values = { [key]: [val] };\n    }\n    const filterKeys = Object.keys(values);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    return {\n      dataMask: {\n        extraFormData: {\n          filters: filterKeys.length === 0 ?\n          undefined :\n          filterKeys.map((key) => {var _values, _groupby$find2;\n            const val = (_values = values) == null ? void 0 : _values[key];\n            const col = (_groupby$find2 = groupby.find((item) => {\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n                return item === key;\n              }\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n                return item.label === key;\n              }\n              return false;\n            })) != null ? _groupby$find2 : '';\n            if (val === null || val === undefined)\n            return {\n              col,\n              op: 'IS NULL'\n            };\n            return {\n              col,\n              op: 'IN',\n              val: val\n            };\n          })\n        },\n        filterState: {\n          value: values && Object.keys(values).length ?\n          Object.values(values) :\n          null,\n          selectedFilters: values && Object.keys(values).length ? values : null\n        }\n      },\n      isCurrentValueSelected: isActiveFilterValue(key, val)\n    };\n  }, [groupbyColumnsRaw, groupbyRowsRaw, selectedFilters]);\n  const toggleFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, value, filters, pivotData, isSubtotal, isGrandTotal) => {\n    if (isSubtotal || isGrandTotal || !emitCrossFilters) {\n      return;\n    }\n    // allow selecting text in a cell\n    if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_11__.getSelectedText)()) {\n      return;\n    }\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key2;return !!selectedFilters && ((_selectedFilters$key2 = selectedFilters[key]) == null ? void 0 : _selectedFilters$key2.includes(val));};\n    const filtersCopy = { ...filters };\n    delete filtersCopy[METRIC_KEY];\n    const filtersEntries = Object.entries(filtersCopy);\n    if (filtersEntries.length === 0) {\n      return;\n    }\n    const [key, val] = filtersEntries[filtersEntries.length - 1];\n    let updatedFilters = { ...(selectedFilters || {}) };\n    // multi select\n    // if (selectedFilters && isActiveFilterValue(key, val)) {\n    //   updatedFilters[key] = selectedFilters[key].filter((x: DataRecordValue) => x !== val);\n    // } else {\n    //   updatedFilters[key] = [...(selectedFilters?.[key] || []), val];\n    // }\n    // single select\n    if (selectedFilters && isActiveFilterValue(key, val)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [val]\n      };\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    handleChange(updatedFilters);\n  }, [emitCrossFilters, selectedFilters, handleChange]);\n  const tableOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    clickRowHeaderCallback: toggleFilter,\n    clickColumnHeaderCallback: toggleFilter,\n    colTotals,\n    colSubTotals,\n    rowTotals,\n    rowSubTotals,\n    highlightHeaderCellsOnHover: emitCrossFilters ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DrillBy) ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DrillToDetail),\n    highlightedHeaderCells: selectedFilters,\n    omittedHighlightHeaderGroups: [METRIC_KEY],\n    cellColorFormatters: { [METRIC_KEY]: metricColorFormatters },\n    dateFormatters\n  }), [\n  colTotals,\n  colSubTotals,\n  dateFormatters,\n  emitCrossFilters,\n  metricColorFormatters,\n  rowTotals,\n  rowSubTotals,\n  selectedFilters,\n  toggleFilter]\n  );\n  const subtotalOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    colSubtotalDisplay: { displayOnTop: colSubtotalPosition },\n    rowSubtotalDisplay: { displayOnTop: rowSubtotalPosition },\n    arrowCollapsed: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledPlusSquareOutlined, {}),\n    arrowExpanded: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledMinusSquareOutlined, {})\n  }), [colSubtotalPosition, rowSubtotalPosition]);\n  const handleContextMenu = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, colKey, rowKey, dataPoint) => {\n    if (onContextMenu) {\n      e.preventDefault();\n      e.stopPropagation();\n      const drillToDetailFilters = [];\n      if (colKey && colKey.length > 1) {\n        colKey.forEach((val, i) => {\n          const col = cols[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          if (i > 0) {\n            drillToDetailFilters.push({\n              col,\n              op: '==',\n              val,\n              formattedVal,\n              grain: formatter ? timeGrainSqla : undefined\n            });\n          }\n        });\n      }\n      if (rowKey) {\n        rowKey.forEach((val, i) => {\n          const col = rows[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          drillToDetailFilters.push({\n            col,\n            op: '==',\n            val,\n            formattedVal,\n            grain: formatter ? timeGrainSqla : undefined\n          });\n        });\n      }\n      onContextMenu(e.clientX, e.clientY, {\n        drillToDetail: drillToDetailFilters,\n        crossFilter: getCrossFilterDataMask(dataPoint),\n        drillBy: dataPoint && {\n          filters: [\n          {\n            col: Object.keys(dataPoint)[0],\n            op: '==',\n            val: Object.values(dataPoint)[0]\n          }],\n\n          groupbyFieldName: rowKey ? 'groupbyRows' : 'groupbyColumns'\n        }\n      });\n    }\n  }, [\n  cols,\n  dateFormatters,\n  getCrossFilterDataMask,\n  onContextMenu,\n  rows,\n  timeGrainSqla]\n  );\n  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Styles, { height: height, width: width, margin: theme.gridUnit * 4, children:\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(PivotTableWrapper, { children:\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_react_pivottable__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { data: unpivotedData, rows: rows, cols: cols, aggregatorsFactory: aggregatorsFactory, defaultFormatter: defaultFormatter, customFormatters: metricFormatters, aggregatorName: aggregateFunction, vals: vals, colOrder: colOrder, rowOrder: rowOrder, sorters: sorters, tableOptions: tableOptions, subtotalOptions: subtotalOptions, namesMapping: verboseMap, onContextMenu: handleContextMenu, allowRenderHtml: allowRenderHtml }) }\n    ) }\n  );\n}__signature__(PivotTableChart, \"useTheme{theme}\\nuseMemo{defaultFormatter}\\nuseMemo{customFormatsArray}\\nuseMemo{metricFormatters}\\nuseMemo{metricNames}\\nuseMemo{unpivotedData}\\nuseMemo{groupbyRows}\\nuseMemo{groupbyColumns}\\nuseMemo{sorters}\\nuseMemo{[rows, cols]}\\nuseCallback{handleChange}\\nuseCallback{getCrossFilterDataMask}\\nuseCallback{toggleFilter}\\nuseMemo{tableOptions}\\nuseMemo{subtotalOptions}\\nuseCallback{handleContextMenu}\", () => [_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(PivotTableWrapper, \"PivotTableWrapper\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(METRIC_KEY, \"METRIC_KEY\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(vals, \"vals\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(StyledPlusSquareOutlined, \"StyledPlusSquareOutlined\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(StyledMinusSquareOutlined, \"StyledMinusSquareOutlined\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(aggregatorsFactory, \"aggregatorsFactory\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");reactHotLoader.register(PivotTableChart, \"PivotTableChart\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\plugins\\\\plugin-chart-pivot-table\\\\src\\\\PivotTableChart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvUGl2b3RUYWJsZUNoYXJ0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQUtBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBa0NBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFJQTtBQUtBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUlBO0FBRUE7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFTQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBa0JBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL1Bpdm90VGFibGVDaGFydC50c3g/N2QzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTWludXNTcXVhcmVPdXRsaW5lZCwgUGx1c1NxdWFyZU91dGxpbmVkIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMnO1xyXG5pbXBvcnQge1xyXG4gIEFkaG9jTWV0cmljLFxyXG4gIEJpbmFyeVF1ZXJ5T2JqZWN0RmlsdGVyQ2xhdXNlLFxyXG4gIEN1cnJlbmN5Rm9ybWF0dGVyLFxyXG4gIERhdGFSZWNvcmRWYWx1ZSxcclxuICBGZWF0dXJlRmxhZyxcclxuICBnZXRDb2x1bW5MYWJlbCxcclxuICBnZXROdW1iZXJGb3JtYXR0ZXIsXHJcbiAgZ2V0U2VsZWN0ZWRUZXh0LFxyXG4gIGlzQWRob2NDb2x1bW4sXHJcbiAgaXNGZWF0dXJlRW5hYmxlZCxcclxuICBpc1BoeXNpY2FsQ29sdW1uLFxyXG4gIE51bWJlckZvcm1hdHRlcixcclxuICBzdHlsZWQsXHJcbiAgdCxcclxuICB1c2VUaGVtZSxcclxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XHJcbmltcG9ydCB7IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMsIFBpdm90VGFibGUsIHNvcnRBcyB9IGZyb20gJy4vcmVhY3QtcGl2b3R0YWJsZSc7XHJcbmltcG9ydCB7XHJcbiAgRmlsdGVyVHlwZSxcclxuICBNZXRyaWNzTGF5b3V0RW51bSxcclxuICBQaXZvdFRhYmxlUHJvcHMsXHJcbiAgUGl2b3RUYWJsZVN0eWxlc1Byb3BzLFxyXG4gIFNlbGVjdGVkRmlsdGVyc1R5cGUsXHJcbn0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5jb25zdCBTdHlsZXMgPSBzdHlsZWQuZGl2PFBpdm90VGFibGVTdHlsZXNQcm9wcz5gXHJcbiAgJHsoeyBoZWlnaHQsIHdpZHRoLCBtYXJnaW4gfSkgPT4gYFxyXG4gICAgICBtYXJnaW46ICR7bWFyZ2lufXB4O1xyXG4gICAgICBoZWlnaHQ6ICR7aGVpZ2h0IC0gbWFyZ2luICogMn1weDtcclxuICAgICAgd2lkdGg6ICR7XHJcbiAgICAgICAgdHlwZW9mIHdpZHRoID09PSAnc3RyaW5nJyA/IHBhcnNlSW50KHdpZHRoLCAxMCkgOiB3aWR0aCAtIG1hcmdpbiAqIDJcclxuICAgICAgfXB4O1xyXG4gYH1cclxuYDtcclxuXHJcbmNvbnN0IFBpdm90VGFibGVXcmFwcGVyID0gc3R5bGVkLmRpdmBcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiBpbmhlcml0O1xyXG4gIG92ZXJmbG93OiBhdXRvO1xyXG5gO1xyXG5cclxuY29uc3QgTUVUUklDX0tFWSA9IHQoJ01ldHJpYycpO1xyXG5jb25zdCB2YWxzID0gWyd2YWx1ZSddO1xyXG5cclxuY29uc3QgU3R5bGVkUGx1c1NxdWFyZU91dGxpbmVkID0gc3R5bGVkKFBsdXNTcXVhcmVPdXRsaW5lZClgXHJcbiAgc3Ryb2tlOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcclxuICBzdHJva2Utd2lkdGg6IDE2cHg7XHJcbmA7XHJcblxyXG5jb25zdCBTdHlsZWRNaW51c1NxdWFyZU91dGxpbmVkID0gc3R5bGVkKE1pbnVzU3F1YXJlT3V0bGluZWQpYFxyXG4gIHN0cm9rZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0Mn07XHJcbiAgc3Ryb2tlLXdpZHRoOiAxNnB4O1xyXG5gO1xyXG5cclxuY29uc3QgYWdncmVnYXRvcnNGYWN0b3J5ID0gKGZvcm1hdHRlcjogTnVtYmVyRm9ybWF0dGVyKSA9PiAoe1xyXG4gIENvdW50OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KGZvcm1hdHRlciksXHJcbiAgJ0NvdW50IFVuaXF1ZSBWYWx1ZXMnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50VW5pcXVlKGZvcm1hdHRlciksXHJcbiAgJ0xpc3QgVW5pcXVlIFZhbHVlcyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubGlzdFVuaXF1ZSgnLCAnLCBmb3JtYXR0ZXIpLFxyXG4gIFN1bTogYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oZm9ybWF0dGVyKSxcclxuICBBdmVyYWdlOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmF2ZXJhZ2UoZm9ybWF0dGVyKSxcclxuICBNZWRpYW46IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubWVkaWFuKGZvcm1hdHRlciksXHJcbiAgJ1NhbXBsZSBWYXJpYW5jZSc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMudmFyKDEsIGZvcm1hdHRlciksXHJcbiAgJ1NhbXBsZSBTdGFuZGFyZCBEZXZpYXRpb24nOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN0ZGV2KDEsIGZvcm1hdHRlciksXHJcbiAgTWluaW11bTogYWdncmVnYXRvclRlbXBsYXRlcy5taW4oZm9ybWF0dGVyKSxcclxuICBNYXhpbXVtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLm1heChmb3JtYXR0ZXIpLFxyXG4gIEZpcnN0OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZpcnN0KGZvcm1hdHRlciksXHJcbiAgTGFzdDogYWdncmVnYXRvclRlbXBsYXRlcy5sYXN0KGZvcm1hdHRlciksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZnJhY3Rpb25PZihcclxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3VtKCksXHJcbiAgICAndG90YWwnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBSb3dzJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcclxuICAgICdyb3cnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcclxuICAgICdjb2wnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxyXG4gICAgJ3RvdGFsJyxcclxuICAgIGZvcm1hdHRlcixcclxuICApLFxyXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBSb3dzJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxyXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxyXG4gICAgJ3JvdycsXHJcbiAgICBmb3JtYXR0ZXIsXHJcbiAgKSxcclxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZnJhY3Rpb25PZihcclxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoKSxcclxuICAgICdjb2wnLFxyXG4gICAgZm9ybWF0dGVyLFxyXG4gICksXHJcbn0pO1xyXG5cclxuLyogSWYgeW91IGNoYW5nZSB0aGlzIGxvZ2ljLCBwbGVhc2UgdXBkYXRlIHRoZSBjb3JyZXNwb25kaW5nIFB5dGhvblxyXG4gKiBmdW5jdGlvbiAoaHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9zdXBlcnNldC9ibG9iL21hc3Rlci9zdXBlcnNldC9jaGFydHMvcG9zdF9wcm9jZXNzaW5nLnB5KSxcclxuICogb3IgcmVhY2ggb3V0IHRvIEBiZXRvZGVhbG1laWRhLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGl2b3RUYWJsZUNoYXJ0KHByb3BzOiBQaXZvdFRhYmxlUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBkYXRhLFxyXG4gICAgaGVpZ2h0LFxyXG4gICAgd2lkdGgsXHJcbiAgICBncm91cGJ5Um93czogZ3JvdXBieVJvd3NSYXcsXHJcbiAgICBncm91cGJ5Q29sdW1uczogZ3JvdXBieUNvbHVtbnNSYXcsXHJcbiAgICBtZXRyaWNzLFxyXG4gICAgY29sT3JkZXIsXHJcbiAgICByb3dPcmRlcixcclxuICAgIGFnZ3JlZ2F0ZUZ1bmN0aW9uLFxyXG4gICAgdHJhbnNwb3NlUGl2b3QsXHJcbiAgICBjb21iaW5lTWV0cmljLFxyXG4gICAgcm93U3VidG90YWxQb3NpdGlvbixcclxuICAgIGNvbFN1YnRvdGFsUG9zaXRpb24sXHJcbiAgICBjb2xUb3RhbHMsXHJcbiAgICBjb2xTdWJUb3RhbHMsXHJcbiAgICByb3dUb3RhbHMsXHJcbiAgICByb3dTdWJUb3RhbHMsXHJcbiAgICB2YWx1ZUZvcm1hdCxcclxuICAgIGN1cnJlbmN5Rm9ybWF0LFxyXG4gICAgZW1pdENyb3NzRmlsdGVycyxcclxuICAgIHNldERhdGFNYXNrLFxyXG4gICAgc2VsZWN0ZWRGaWx0ZXJzLFxyXG4gICAgdmVyYm9zZU1hcCxcclxuICAgIGNvbHVtbkZvcm1hdHMsXHJcbiAgICBjdXJyZW5jeUZvcm1hdHMsXHJcbiAgICBtZXRyaWNzTGF5b3V0LFxyXG4gICAgbWV0cmljQ29sb3JGb3JtYXR0ZXJzLFxyXG4gICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICBvbkNvbnRleHRNZW51LFxyXG4gICAgdGltZUdyYWluU3FsYSxcclxuICAgIGFsbG93UmVuZGVySHRtbCxcclxuICB9ID0gcHJvcHM7XHJcblxyXG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcclxuICBjb25zdCBkZWZhdWx0Rm9ybWF0dGVyID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIGN1cnJlbmN5Rm9ybWF0Py5zeW1ib2xcclxuICAgICAgICA/IG5ldyBDdXJyZW5jeUZvcm1hdHRlcih7XHJcbiAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUZvcm1hdCxcclxuICAgICAgICAgICAgZDNGb3JtYXQ6IHZhbHVlRm9ybWF0LFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICA6IGdldE51bWJlckZvcm1hdHRlcih2YWx1ZUZvcm1hdCksXHJcbiAgICBbdmFsdWVGb3JtYXQsIGN1cnJlbmN5Rm9ybWF0XSxcclxuICApO1xyXG4gIGNvbnN0IGN1c3RvbUZvcm1hdHNBcnJheSA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PlxyXG4gICAgICBBcnJheS5mcm9tKFxyXG4gICAgICAgIG5ldyBTZXQoW1xyXG4gICAgICAgICAgLi4uT2JqZWN0LmtleXMoY29sdW1uRm9ybWF0cyB8fCB7fSksXHJcbiAgICAgICAgICAuLi5PYmplY3Qua2V5cyhjdXJyZW5jeUZvcm1hdHMgfHwge30pLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICApLm1hcChtZXRyaWNOYW1lID0+IFtcclxuICAgICAgICBtZXRyaWNOYW1lLFxyXG4gICAgICAgIGNvbHVtbkZvcm1hdHNbbWV0cmljTmFtZV0gfHwgdmFsdWVGb3JtYXQsXHJcbiAgICAgICAgY3VycmVuY3lGb3JtYXRzW21ldHJpY05hbWVdIHx8IGN1cnJlbmN5Rm9ybWF0LFxyXG4gICAgICBdKSxcclxuICAgIFtjb2x1bW5Gb3JtYXRzLCBjdXJyZW5jeUZvcm1hdCwgY3VycmVuY3lGb3JtYXRzLCB2YWx1ZUZvcm1hdF0sXHJcbiAgKTtcclxuICBjb25zdCBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzID0gY3VzdG9tRm9ybWF0c0FycmF5Lmxlbmd0aCA+IDA7XHJcbiAgY29uc3QgbWV0cmljRm9ybWF0dGVycyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PlxyXG4gICAgICBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzXHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIFtNRVRSSUNfS0VZXTogT2JqZWN0LmZyb21FbnRyaWVzKFxyXG4gICAgICAgICAgICAgIGN1c3RvbUZvcm1hdHNBcnJheS5tYXAoKFttZXRyaWMsIGQzRm9ybWF0LCBjdXJyZW5jeV0pID0+IFtcclxuICAgICAgICAgICAgICAgIG1ldHJpYyxcclxuICAgICAgICAgICAgICAgIGN1cnJlbmN5XHJcbiAgICAgICAgICAgICAgICAgID8gbmV3IEN1cnJlbmN5Rm9ybWF0dGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgZDNGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgOiBnZXROdW1iZXJGb3JtYXR0ZXIoZDNGb3JtYXQpLFxyXG4gICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgW2N1c3RvbUZvcm1hdHNBcnJheSwgaGFzQ3VzdG9tTWV0cmljRm9ybWF0dGVyc10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgbWV0cmljTmFtZXMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT5cclxuICAgICAgbWV0cmljcy5tYXAoKG1ldHJpYzogc3RyaW5nIHwgQWRob2NNZXRyaWMpID0+XHJcbiAgICAgICAgdHlwZW9mIG1ldHJpYyA9PT0gJ3N0cmluZycgPyBtZXRyaWMgOiAobWV0cmljLmxhYmVsIGFzIHN0cmluZyksXHJcbiAgICAgICksXHJcbiAgICBbbWV0cmljc10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgdW5waXZvdGVkRGF0YSA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PlxyXG4gICAgICBkYXRhLnJlZHVjZShcclxuICAgICAgICAoYWNjOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10sIHJlY29yZDogUmVjb3JkPHN0cmluZywgYW55PikgPT4gW1xyXG4gICAgICAgICAgLi4uYWNjLFxyXG4gICAgICAgICAgLi4ubWV0cmljTmFtZXNcclxuICAgICAgICAgICAgLm1hcCgobmFtZTogc3RyaW5nKSA9PiAoe1xyXG4gICAgICAgICAgICAgIC4uLnJlY29yZCxcclxuICAgICAgICAgICAgICBbTUVUUklDX0tFWV06IG5hbWUsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHJlY29yZFtuYW1lXSxcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIocmVjb3JkID0+IHJlY29yZC52YWx1ZSAhPT0gbnVsbCksXHJcbiAgICAgICAgXSxcclxuICAgICAgICBbXSxcclxuICAgICAgKSxcclxuICAgIFtkYXRhLCBtZXRyaWNOYW1lc10sXHJcbiAgKTtcclxuICBjb25zdCBncm91cGJ5Um93cyA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiBncm91cGJ5Um93c1Jhdy5tYXAoZ2V0Q29sdW1uTGFiZWwpLFxyXG4gICAgW2dyb3VwYnlSb3dzUmF3XSxcclxuICApO1xyXG4gIGNvbnN0IGdyb3VwYnlDb2x1bW5zID0gdXNlTWVtbyhcclxuICAgICgpID0+IGdyb3VwYnlDb2x1bW5zUmF3Lm1hcChnZXRDb2x1bW5MYWJlbCksXHJcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXddLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHNvcnRlcnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gKHtcclxuICAgICAgW01FVFJJQ19LRVldOiBzb3J0QXMobWV0cmljTmFtZXMpLFxyXG4gICAgfSksXHJcbiAgICBbbWV0cmljTmFtZXNdLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IFtyb3dzLCBjb2xzXSA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgbGV0IFtyb3dzXywgY29sc19dID0gdHJhbnNwb3NlUGl2b3RcclxuICAgICAgPyBbZ3JvdXBieUNvbHVtbnMsIGdyb3VwYnlSb3dzXVxyXG4gICAgICA6IFtncm91cGJ5Um93cywgZ3JvdXBieUNvbHVtbnNdO1xyXG5cclxuICAgIGlmIChtZXRyaWNzTGF5b3V0ID09PSBNZXRyaWNzTGF5b3V0RW51bS5ST1dTKSB7XHJcbiAgICAgIHJvd3NfID0gY29tYmluZU1ldHJpYyA/IFsuLi5yb3dzXywgTUVUUklDX0tFWV0gOiBbTUVUUklDX0tFWSwgLi4ucm93c19dO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29sc18gPSBjb21iaW5lTWV0cmljID8gWy4uLmNvbHNfLCBNRVRSSUNfS0VZXSA6IFtNRVRSSUNfS0VZLCAuLi5jb2xzX107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW3Jvd3NfLCBjb2xzX107XHJcbiAgfSwgW1xyXG4gICAgY29tYmluZU1ldHJpYyxcclxuICAgIGdyb3VwYnlDb2x1bW5zLFxyXG4gICAgZ3JvdXBieVJvd3MsXHJcbiAgICBtZXRyaWNzTGF5b3V0LFxyXG4gICAgdHJhbnNwb3NlUGl2b3QsXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKGZpbHRlcnM6IFNlbGVjdGVkRmlsdGVyc1R5cGUpID0+IHtcclxuICAgICAgY29uc3QgZmlsdGVyS2V5cyA9IE9iamVjdC5rZXlzKGZpbHRlcnMpO1xyXG4gICAgICBjb25zdCBncm91cGJ5ID0gWy4uLmdyb3VwYnlSb3dzUmF3LCAuLi5ncm91cGJ5Q29sdW1uc1Jhd107XHJcbiAgICAgIHNldERhdGFNYXNrKHtcclxuICAgICAgICBleHRyYUZvcm1EYXRhOiB7XHJcbiAgICAgICAgICBmaWx0ZXJzOlxyXG4gICAgICAgICAgICBmaWx0ZXJLZXlzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgOiBmaWx0ZXJLZXlzLm1hcChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBmaWx0ZXJzPy5ba2V5XTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY29sID1cclxuICAgICAgICAgICAgICAgICAgICBncm91cGJ5LmZpbmQoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQaHlzaWNhbENvbHVtbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRob2NDb2x1bW4oaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwgPT09IGtleTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KSA/PyAnJztcclxuICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3A6ICdJUyBOVUxMJyxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbCxcclxuICAgICAgICAgICAgICAgICAgICBvcDogJ0lOJyxcclxuICAgICAgICAgICAgICAgICAgICB2YWw6IHZhbCBhcyAoc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbilbXSxcclxuICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmlsdGVyU3RhdGU6IHtcclxuICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICBmaWx0ZXJzICYmIE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aFxyXG4gICAgICAgICAgICAgID8gT2JqZWN0LnZhbHVlcyhmaWx0ZXJzKVxyXG4gICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgIHNlbGVjdGVkRmlsdGVyczpcclxuICAgICAgICAgICAgZmlsdGVycyAmJiBPYmplY3Qua2V5cyhmaWx0ZXJzKS5sZW5ndGggPyBmaWx0ZXJzIDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXcsIGdyb3VwYnlSb3dzUmF3LCBzZXREYXRhTWFza10sXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgZ2V0Q3Jvc3NGaWx0ZXJEYXRhTWFzayA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKHZhbHVlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbDogRGF0YVJlY29yZFZhbHVlKSA9PlxyXG4gICAgICAgICEhc2VsZWN0ZWRGaWx0ZXJzICYmIHNlbGVjdGVkRmlsdGVyc1trZXldPy5pbmNsdWRlcyh2YWwpO1xyXG5cclxuICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IFtrZXksIHZhbF0gPSBPYmplY3QuZW50cmllcyh2YWx1ZSlbMF07XHJcbiAgICAgIGxldCB2YWx1ZXMgPSB7IC4uLnNlbGVjdGVkRmlsdGVycyB9O1xyXG4gICAgICBpZiAoaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCkpIHtcclxuICAgICAgICB2YWx1ZXMgPSB7fTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZXMgPSB7IFtrZXldOiBbdmFsXSB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgY29uc3QgZ3JvdXBieSA9IFsuLi5ncm91cGJ5Um93c1JhdywgLi4uZ3JvdXBieUNvbHVtbnNSYXddO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGFNYXNrOiB7XHJcbiAgICAgICAgICBleHRyYUZvcm1EYXRhOiB7XHJcbiAgICAgICAgICAgIGZpbHRlcnM6XHJcbiAgICAgICAgICAgICAgZmlsdGVyS2V5cy5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA6IGZpbHRlcktleXMubWFwKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdmFsdWVzPy5ba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgZ3JvdXBieS5maW5kKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQaHlzaWNhbENvbHVtbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRob2NDb2x1bW4oaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pID8/ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAnSVMgTlVMTCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lOJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbDogdmFsIGFzIChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGZpbHRlclN0YXRlOiB7XHJcbiAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgIHZhbHVlcyAmJiBPYmplY3Qua2V5cyh2YWx1ZXMpLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgPyBPYmplY3QudmFsdWVzKHZhbHVlcylcclxuICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzOlxyXG4gICAgICAgICAgICAgIHZhbHVlcyAmJiBPYmplY3Qua2V5cyh2YWx1ZXMpLmxlbmd0aCA/IHZhbHVlcyA6IG51bGwsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNDdXJyZW50VmFsdWVTZWxlY3RlZDogaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCksXHJcbiAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgW2dyb3VwYnlDb2x1bW5zUmF3LCBncm91cGJ5Um93c1Jhdywgc2VsZWN0ZWRGaWx0ZXJzXSxcclxuICApO1xyXG5cclxuICBjb25zdCB0b2dnbGVGaWx0ZXIgPSB1c2VDYWxsYmFjayhcclxuICAgIChcclxuICAgICAgZTogTW91c2VFdmVudCxcclxuICAgICAgdmFsdWU6IHN0cmluZyxcclxuICAgICAgZmlsdGVyczogRmlsdGVyVHlwZSxcclxuICAgICAgcGl2b3REYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxyXG4gICAgICBpc1N1YnRvdGFsOiBib29sZWFuLFxyXG4gICAgICBpc0dyYW5kVG90YWw6IGJvb2xlYW4sXHJcbiAgICApID0+IHtcclxuICAgICAgaWYgKGlzU3VidG90YWwgfHwgaXNHcmFuZFRvdGFsIHx8ICFlbWl0Q3Jvc3NGaWx0ZXJzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhbGxvdyBzZWxlY3RpbmcgdGV4dCBpbiBhIGNlbGxcclxuICAgICAgaWYgKGdldFNlbGVjdGVkVGV4dCgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBpc0FjdGl2ZUZpbHRlclZhbHVlID0gKGtleTogc3RyaW5nLCB2YWw6IERhdGFSZWNvcmRWYWx1ZSkgPT5cclxuICAgICAgICAhIXNlbGVjdGVkRmlsdGVycyAmJiBzZWxlY3RlZEZpbHRlcnNba2V5XT8uaW5jbHVkZXModmFsKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnNDb3B5ID0geyAuLi5maWx0ZXJzIH07XHJcbiAgICAgIGRlbGV0ZSBmaWx0ZXJzQ29weVtNRVRSSUNfS0VZXTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnNFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZmlsdGVyc0NvcHkpO1xyXG4gICAgICBpZiAoZmlsdGVyc0VudHJpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBba2V5LCB2YWxdID0gZmlsdGVyc0VudHJpZXNbZmlsdGVyc0VudHJpZXMubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICBsZXQgdXBkYXRlZEZpbHRlcnMgPSB7IC4uLihzZWxlY3RlZEZpbHRlcnMgfHwge30pIH07XHJcbiAgICAgIC8vIG11bHRpIHNlbGVjdFxyXG4gICAgICAvLyBpZiAoc2VsZWN0ZWRGaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWwpKSB7XHJcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IHNlbGVjdGVkRmlsdGVyc1trZXldLmZpbHRlcigoeDogRGF0YVJlY29yZFZhbHVlKSA9PiB4ICE9PSB2YWwpO1xyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAvLyAgIHVwZGF0ZWRGaWx0ZXJzW2tleV0gPSBbLi4uKHNlbGVjdGVkRmlsdGVycz8uW2tleV0gfHwgW10pLCB2YWxdO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vIHNpbmdsZSBzZWxlY3RcclxuICAgICAgaWYgKHNlbGVjdGVkRmlsdGVycyAmJiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSkge1xyXG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzID0ge307XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBkYXRlZEZpbHRlcnMgPSB7XHJcbiAgICAgICAgICBba2V5XTogW3ZhbF0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgQXJyYXkuaXNBcnJheSh1cGRhdGVkRmlsdGVyc1trZXldKSAmJlxyXG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzW2tleV0ubGVuZ3RoID09PSAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIGRlbGV0ZSB1cGRhdGVkRmlsdGVyc1trZXldO1xyXG4gICAgICB9XHJcbiAgICAgIGhhbmRsZUNoYW5nZSh1cGRhdGVkRmlsdGVycyk7XHJcbiAgICB9LFxyXG4gICAgW2VtaXRDcm9zc0ZpbHRlcnMsIHNlbGVjdGVkRmlsdGVycywgaGFuZGxlQ2hhbmdlXSxcclxuICApO1xyXG5cclxuICBjb25zdCB0YWJsZU9wdGlvbnMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gKHtcclxuICAgICAgY2xpY2tSb3dIZWFkZXJDYWxsYmFjazogdG9nZ2xlRmlsdGVyLFxyXG4gICAgICBjbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrOiB0b2dnbGVGaWx0ZXIsXHJcbiAgICAgIGNvbFRvdGFscyxcclxuICAgICAgY29sU3ViVG90YWxzLFxyXG4gICAgICByb3dUb3RhbHMsXHJcbiAgICAgIHJvd1N1YlRvdGFscyxcclxuICAgICAgaGlnaGxpZ2h0SGVhZGVyQ2VsbHNPbkhvdmVyOlxyXG4gICAgICAgIGVtaXRDcm9zc0ZpbHRlcnMgfHxcclxuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkRyaWxsQnkpIHx8XHJcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5EcmlsbFRvRGV0YWlsKSxcclxuICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsczogc2VsZWN0ZWRGaWx0ZXJzLFxyXG4gICAgICBvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzOiBbTUVUUklDX0tFWV0sXHJcbiAgICAgIGNlbGxDb2xvckZvcm1hdHRlcnM6IHsgW01FVFJJQ19LRVldOiBtZXRyaWNDb2xvckZvcm1hdHRlcnMgfSxcclxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXHJcbiAgICB9KSxcclxuICAgIFtcclxuICAgICAgY29sVG90YWxzLFxyXG4gICAgICBjb2xTdWJUb3RhbHMsXHJcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxyXG4gICAgICBlbWl0Q3Jvc3NGaWx0ZXJzLFxyXG4gICAgICBtZXRyaWNDb2xvckZvcm1hdHRlcnMsXHJcbiAgICAgIHJvd1RvdGFscyxcclxuICAgICAgcm93U3ViVG90YWxzLFxyXG4gICAgICBzZWxlY3RlZEZpbHRlcnMsXHJcbiAgICAgIHRvZ2dsZUZpbHRlcixcclxuICAgIF0sXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc3VidG90YWxPcHRpb25zID0gdXNlTWVtbyhcclxuICAgICgpID0+ICh7XHJcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheTogeyBkaXNwbGF5T25Ub3A6IGNvbFN1YnRvdGFsUG9zaXRpb24gfSxcclxuICAgICAgcm93U3VidG90YWxEaXNwbGF5OiB7IGRpc3BsYXlPblRvcDogcm93U3VidG90YWxQb3NpdGlvbiB9LFxyXG4gICAgICBhcnJvd0NvbGxhcHNlZDogPFN0eWxlZFBsdXNTcXVhcmVPdXRsaW5lZCAvPixcclxuICAgICAgYXJyb3dFeHBhbmRlZDogPFN0eWxlZE1pbnVzU3F1YXJlT3V0bGluZWQgLz4sXHJcbiAgICB9KSxcclxuICAgIFtjb2xTdWJ0b3RhbFBvc2l0aW9uLCByb3dTdWJ0b3RhbFBvc2l0aW9uXSxcclxuICApO1xyXG5cclxuICBjb25zdCBoYW5kbGVDb250ZXh0TWVudSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKFxyXG4gICAgICBlOiBNb3VzZUV2ZW50LFxyXG4gICAgICBjb2xLZXk6IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdIHwgdW5kZWZpbmVkLFxyXG4gICAgICByb3dLZXk6IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdIHwgdW5kZWZpbmVkLFxyXG4gICAgICBkYXRhUG9pbnQ6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sXHJcbiAgICApID0+IHtcclxuICAgICAgaWYgKG9uQ29udGV4dE1lbnUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBkcmlsbFRvRGV0YWlsRmlsdGVyczogQmluYXJ5UXVlcnlPYmplY3RGaWx0ZXJDbGF1c2VbXSA9IFtdO1xyXG4gICAgICAgIGlmIChjb2xLZXkgJiYgY29sS2V5Lmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgIGNvbEtleS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gY29sc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gZGF0ZUZvcm1hdHRlcnNbY29sXTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVmFsID0gZm9ybWF0dGVyPy4odmFsIGFzIG51bWJlcikgfHwgU3RyaW5nKHZhbCk7XHJcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgIGRyaWxsVG9EZXRhaWxGaWx0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY29sLFxyXG4gICAgICAgICAgICAgICAgb3A6ICc9PScsXHJcbiAgICAgICAgICAgICAgICB2YWwsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwsXHJcbiAgICAgICAgICAgICAgICBncmFpbjogZm9ybWF0dGVyID8gdGltZUdyYWluU3FsYSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyb3dLZXkpIHtcclxuICAgICAgICAgIHJvd0tleS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gcm93c1tpXTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gZGF0ZUZvcm1hdHRlcnNbY29sXTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVmFsID0gZm9ybWF0dGVyPy4odmFsIGFzIG51bWJlcikgfHwgU3RyaW5nKHZhbCk7XHJcbiAgICAgICAgICAgIGRyaWxsVG9EZXRhaWxGaWx0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGNvbCxcclxuICAgICAgICAgICAgICBvcDogJz09JyxcclxuICAgICAgICAgICAgICB2YWwsXHJcbiAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsLFxyXG4gICAgICAgICAgICAgIGdyYWluOiBmb3JtYXR0ZXIgPyB0aW1lR3JhaW5TcWxhIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvbkNvbnRleHRNZW51KGUuY2xpZW50WCwgZS5jbGllbnRZLCB7XHJcbiAgICAgICAgICBkcmlsbFRvRGV0YWlsOiBkcmlsbFRvRGV0YWlsRmlsdGVycyxcclxuICAgICAgICAgIGNyb3NzRmlsdGVyOiBnZXRDcm9zc0ZpbHRlckRhdGFNYXNrKGRhdGFQb2ludCksXHJcbiAgICAgICAgICBkcmlsbEJ5OiBkYXRhUG9pbnQgJiYge1xyXG4gICAgICAgICAgICBmaWx0ZXJzOiBbXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sOiBPYmplY3Qua2V5cyhkYXRhUG9pbnQpWzBdLFxyXG4gICAgICAgICAgICAgICAgb3A6ICc9PScsXHJcbiAgICAgICAgICAgICAgICB2YWw6IE9iamVjdC52YWx1ZXMoZGF0YVBvaW50KVswXSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBncm91cGJ5RmllbGROYW1lOiByb3dLZXkgPyAnZ3JvdXBieVJvd3MnIDogJ2dyb3VwYnlDb2x1bW5zJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbXHJcbiAgICAgIGNvbHMsXHJcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxyXG4gICAgICBnZXRDcm9zc0ZpbHRlckRhdGFNYXNrLFxyXG4gICAgICBvbkNvbnRleHRNZW51LFxyXG4gICAgICByb3dzLFxyXG4gICAgICB0aW1lR3JhaW5TcWxhLFxyXG4gICAgXSxcclxuICApO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFN0eWxlcyBoZWlnaHQ9e2hlaWdodH0gd2lkdGg9e3dpZHRofSBtYXJnaW49e3RoZW1lLmdyaWRVbml0ICogNH0+XHJcbiAgICAgIDxQaXZvdFRhYmxlV3JhcHBlcj5cclxuICAgICAgICA8UGl2b3RUYWJsZVxyXG4gICAgICAgICAgZGF0YT17dW5waXZvdGVkRGF0YX1cclxuICAgICAgICAgIHJvd3M9e3Jvd3N9XHJcbiAgICAgICAgICBjb2xzPXtjb2xzfVxyXG4gICAgICAgICAgYWdncmVnYXRvcnNGYWN0b3J5PXthZ2dyZWdhdG9yc0ZhY3Rvcnl9XHJcbiAgICAgICAgICBkZWZhdWx0Rm9ybWF0dGVyPXtkZWZhdWx0Rm9ybWF0dGVyfVxyXG4gICAgICAgICAgY3VzdG9tRm9ybWF0dGVycz17bWV0cmljRm9ybWF0dGVyc31cclxuICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lPXthZ2dyZWdhdGVGdW5jdGlvbn1cclxuICAgICAgICAgIHZhbHM9e3ZhbHN9XHJcbiAgICAgICAgICBjb2xPcmRlcj17Y29sT3JkZXJ9XHJcbiAgICAgICAgICByb3dPcmRlcj17cm93T3JkZXJ9XHJcbiAgICAgICAgICBzb3J0ZXJzPXtzb3J0ZXJzfVxyXG4gICAgICAgICAgdGFibGVPcHRpb25zPXt0YWJsZU9wdGlvbnN9XHJcbiAgICAgICAgICBzdWJ0b3RhbE9wdGlvbnM9e3N1YnRvdGFsT3B0aW9uc31cclxuICAgICAgICAgIG5hbWVzTWFwcGluZz17dmVyYm9zZU1hcH1cclxuICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2hhbmRsZUNvbnRleHRNZW51fVxyXG4gICAgICAgICAgYWxsb3dSZW5kZXJIdG1sPXthbGxvd1JlbmRlckh0bWx9XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9QaXZvdFRhYmxlV3JhcHBlcj5cclxuICAgIDwvU3R5bGVzPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\n");

/***/ })

}]);