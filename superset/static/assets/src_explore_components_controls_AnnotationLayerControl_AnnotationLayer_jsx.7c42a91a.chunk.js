"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["src_explore_components_controls_AnnotationLayerControl_AnnotationLayer_jsx"],{

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx":
/*!************************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx ***!
  \************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rison */ \"./node_modules/rison/js/rison.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rison__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-color */ \"./node_modules/react-color/es/index.js\");\n/* harmony import */ var src_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/components/Button */ \"./src/components/Button/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/connection/SupersetClient.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/math-expression/index.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/validator/validateNonEmpty.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/color/CategoricalSchemeRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-element-7a1343fa.browser.development.esm.js\");\n/* harmony import */ var src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/explore/components/controls/SelectControl */ \"./src/explore/components/controls/SelectControl.jsx\");\n/* harmony import */ var src_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/components */ \"./src/components/index.ts\");\n/* harmony import */ var src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/explore/components/controls/TextControl */ \"./src/explore/components/controls/TextControl/index.tsx\");\n/* harmony import */ var src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/explore/components/controls/CheckboxControl */ \"./src/explore/components/controls/CheckboxControl.jsx\");\n/* harmony import */ var src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/components/PopoverSection */ \"./src/components/PopoverSection/index.tsx\");\n/* harmony import */ var src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/explore/components/ControlHeader */ \"./src/explore/components/ControlHeader.tsx\");\n/* harmony import */ var src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/components/EmptyState */ \"./src/components/EmptyState/index.tsx\");\n/* harmony import */ var _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AnnotationTypes */ \"./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.development.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AUTOMATIC_COLOR = '';\n\nconst propTypes = {\n  name: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  annotationType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  sourceType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  color: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  opacity: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  style: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  width: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number),\n  showMarkers: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  hideLine: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  value: prop_types__WEBPACK_IMPORTED_MODULE_12___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_12___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number)]),\n  overrides: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().object),\n  show: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  showLabel: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  titleColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  descriptionColumns: prop_types__WEBPACK_IMPORTED_MODULE_12___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_12___default().string)),\n  timeColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  intervalEndColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  vizType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  error: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  colorScheme: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  addAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  removeAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  close: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func)\n};\n\nconst defaultProps = {\n  name: '',\n  annotationType: _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANNOTATION_TYPE,\n  sourceType: '',\n  color: AUTOMATIC_COLOR,\n  opacity: '',\n  style: 'solid',\n  width: 1,\n  showMarkers: false,\n  hideLine: false,\n  overrides: {},\n  colorScheme: 'd3Category10',\n  show: true,\n  showLabel: false,\n  titleColumn: '',\n  descriptionColumns: [],\n  timeColumn: '',\n  intervalEndColumn: '',\n\n  addAnnotationLayer: () => {},\n  removeAnnotationLayer: () => {},\n  close: () => {}\n};\n\nconst NotFoundContentWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__.styled.div`\n  && > div:first-child {\n    padding-left: 0;\n    padding-right: 0;\n  }\n`;\n\nconst NotFoundContent = () =>\n(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContentWrapper, { children:\n  (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__.EmptyStateSmall, {\n    title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('No annotation layers'),\n    description:\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { children: [\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Add an annotation layer'), ' ',\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"a\", {\n        href: \"/annotationlayer/list\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\", children:\n\n        (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('here') }\n      ), \".\"] }\n\n    ),\n\n    image: \"empty.svg\" }\n  ) }\n);\n\n\nclass AnnotationLayer extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    fetchNativeAnnotations = async (search, page, pageSize) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        {\n          col: 'name',\n          opr: 'ct',\n          value: search\n        }],\n\n        columns: ['id', 'name'],\n        page,\n        page_size: pageSize\n      });\n\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/annotation_layer/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n\n      const layersArray = result.map((layer) => ({\n        value: layer.id,\n        label: layer.name\n      }));\n\n      return {\n        data: layersArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchCharts = async (search, page, pageSize) => {\n      const { annotationType } = this.state;\n\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        { col: 'slice_name', opr: 'chart_all_text', value: search },\n        {\n          col: 'id',\n          opr: 'chart_owned_created_favored_by_me',\n          value: true\n        }],\n\n        columns: ['id', 'slice_name', 'viz_type'],\n        order_column: 'slice_name',\n        order_direction: 'asc',\n        page,\n        page_size: pageSize\n      });\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n      const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n\n      const chartsArray = result.\n      filter((chart) => {\n        const metadata = registry.get(chart.viz_type);\n        return metadata && metadata.canBeAnnotationType(annotationType);\n      }).\n      map((chart) => ({\n        value: chart.id,\n        label: chart.slice_name,\n        viz_type: chart.viz_type\n      }));\n\n      return {\n        data: chartsArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchOptions = (search, page, pageSize) => {\n      const { sourceType } = this.state;\n\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        return this.fetchNativeAnnotations(search, page, pageSize);\n      }\n      return this.fetchCharts(search, page, pageSize);\n    };this.\n\n    fetchSliceData = (id) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        columns: ['query_context']\n      });\n      _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/${id}?q=${queryParams}`\n      }).then(({ json }) => {var _formData$groupby;\n        const { result } = json;\n        const queryContext = result.query_context;\n        const formData = JSON.parse(queryContext).form_data;\n        const dataObject = {\n          data: {\n            ...formData,\n            groupby: (_formData$groupby = formData.groupby) == null ? void 0 : _formData$groupby.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n          }\n        };\n        this.setState({\n          slice: dataObject\n        });\n      });\n    };const { name, annotationType: _annotationType, sourceType: _sourceType, color, opacity, style, width, showMarkers, hideLine, value, overrides, show, showLabel, titleColumn, descriptionColumns, timeColumn, intervalEndColumn, vizType } = props; // Only allow override whole time_range\n    if ('since' in overrides || 'until' in overrides) {overrides.time_range = null;delete overrides.since;delete overrides.until;} // Check if annotationType is supported by this chart\n    const _metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(vizType);const supportedAnnotationTypes = (_metadata == null ? void 0 : _metadata.supportedAnnotationTypes) || [];const validAnnotationType = supportedAnnotationTypes.includes(_annotationType) ? _annotationType : supportedAnnotationTypes[0];this.state = { // base\n      name, annotationType: validAnnotationType, sourceType: _sourceType, value, overrides, show, showLabel, // slice\n      titleColumn, descriptionColumns, timeColumn, intervalEndColumn, // display\n      color: color || AUTOMATIC_COLOR, opacity, style, width, showMarkers, hideLine, // refData\n      isNew: !name, slice: null };this.submitAnnotation = this.submitAnnotation.bind(this);this.deleteAnnotation = this.deleteAnnotation.bind(this);this.applyAnnotation = this.applyAnnotation.bind(this);this.isValidForm = this.isValidForm.bind(this); // Handlers\n    this.handleAnnotationType = this.handleAnnotationType.bind(this);this.handleAnnotationSourceType = this.handleAnnotationSourceType.bind(this);this.handleSelectValue = this.handleSelectValue.bind(this);this.handleTextValue = this.handleTextValue.bind(this); // Fetch related functions\n    this.fetchOptions = this.fetchOptions.bind(this);this.fetchCharts = this.fetchCharts.bind(this);this.fetchNativeAnnotations = this.fetchNativeAnnotations.bind(this);this.fetchAppliedAnnotation = this.fetchAppliedAnnotation.bind(this);this.fetchSliceData = this.fetchSliceData.bind(this);this.shouldFetchSliceData = this.shouldFetchSliceData.bind(this);this.fetchAppliedChart = this.fetchAppliedChart.bind(this);this.fetchAppliedNativeAnnotation = this.fetchAppliedNativeAnnotation.bind(this);this.shouldFetchAppliedAnnotation = this.shouldFetchAppliedAnnotation.bind(this);}componentDidMount() {if (this.shouldFetchAppliedAnnotation()) {const { value } = this.state; /* The value prop is the id of the chart/native. This function will set\r\n      value in state to an object with the id as value.value to be used by\r\n      AsyncSelect */this.fetchAppliedAnnotation(value);}}componentDidUpdate(prevProps, prevState) {if (this.shouldFetchSliceData(prevState)) {const { value } = this.state;this.fetchSliceData(value.value);}}getSupportedSourceTypes(annotationType) {var _ANNOTATION_TYPES_MET; // Get vis types that can be source.\n    const sources = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().entries().filter(({ value: chartMetadata }) => chartMetadata.canBeAnnotationType(annotationType)).map(({ key, value: chartMetadata }) => ({ value: key, label: chartMetadata.name })); // Prepend native source if applicable\n    if ((_ANNOTATION_TYPES_MET = _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[annotationType]) != null && _ANNOTATION_TYPES_MET.supportNativeSource) {sources.unshift(_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES_METADATA.NATIVE);}return sources;}shouldFetchAppliedAnnotation() {const { value, sourceType } = this.state;return value && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);}shouldFetchSliceData(prevState) {const { value, sourceType } = this.state;const isChart = sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);const valueIsNew = value && prevState.value !== value;return valueIsNew && isChart;}isValidFormulaAnnotation(expression, annotationType) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_19__.isValidExpression)(expression);}return true;}isValidForm() {const { name, annotationType, sourceType, value, timeColumn, intervalEndColumn } = this.state;const errors = [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(name), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(annotationType), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(value)];if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));}if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(intervalEndColumn));}}errors.push(!this.isValidFormulaAnnotation(value, annotationType));return !errors.filter((x) => x).length;}handleAnnotationType(annotationType) {this.setState({ annotationType, sourceType: null, value: null, slice: null });}handleAnnotationSourceType(sourceType) {const { sourceType: prevSourceType } = this.state;if (prevSourceType !== sourceType) {this.setState({ sourceType, value: null, slice: null });}}handleSelectValue(selectedValueObject) {this.setState({ value: selectedValueObject, descriptionColumns: [], intervalEndColumn: null, timeColumn: null, titleColumn: null, overrides: { time_range: null } });}handleTextValue(inputValue) {this.setState({ value: inputValue });}fetchAppliedChart(id) {const { annotationType } = this.state;const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({ columns: ['slice_name', 'query_context', 'viz_type'] });_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({ endpoint: `/api/v1/chart/${id}?q=${queryParams}` }).then(({ json }) => {const { result } = json;const sliceName = result.slice_name;\n        const queryContext = result.query_context;\n        const vizType = result.viz_type;\n        const formData = JSON.parse(queryContext).form_data;\n        const metadata = registry.get(vizType);\n        const canBeAnnotationType =\n        metadata && metadata.canBeAnnotationType(annotationType);\n        if (canBeAnnotationType) {var _formData$groupby2;\n          this.setState({\n            value: {\n              value: id,\n              label: sliceName\n            },\n            slice: {\n              data: {\n                ...formData,\n                groupby: (_formData$groupby2 = formData.groupby) == null ? void 0 : _formData$groupby2.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n              }\n            }\n          });\n        }\n      });\n  }\n\n  fetchAppliedNativeAnnotation(id) {\n    _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n      endpoint: `/api/v1/annotation_layer/${id}`\n    }).then(({ json }) => {\n      const { result } = json;\n      const layer = result;\n      this.setState({\n        value: {\n          value: layer.id,\n          label: layer.name\n        }\n      });\n    });\n  }\n\n  fetchAppliedAnnotation(id) {\n    const { sourceType } = this.state;\n\n    if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n      return this.fetchAppliedNativeAnnotation(id);\n    }\n    return this.fetchAppliedChart(id);\n  }\n\n  deleteAnnotation() {\n    this.props.removeAnnotationLayer();\n    this.props.close();\n  }\n\n  applyAnnotation() {\n    const { value, sourceType } = this.state;\n    if (this.isValidForm()) {\n      const annotationFields = [\n      'name',\n      'annotationType',\n      'sourceType',\n      'color',\n      'opacity',\n      'style',\n      'width',\n      'showMarkers',\n      'hideLine',\n      'overrides',\n      'show',\n      'showLabel',\n      'titleColumn',\n      'descriptionColumns',\n      'timeColumn',\n      'intervalEndColumn'];\n\n      const newAnnotation = {};\n      annotationFields.forEach((field) => {\n        if (this.state[field] !== null) {\n          newAnnotation[field] = this.state[field];\n        }\n      });\n\n      // Prepare newAnnotation.value for use in runAnnotationQuery()\n      const applicableValue = (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType) ? value.value : value;\n      newAnnotation.value = applicableValue;\n\n      if (newAnnotation.color === AUTOMATIC_COLOR) {\n        newAnnotation.color = null;\n      }\n\n      this.props.addAnnotationLayer(newAnnotation);\n      this.setState({ isNew: false });\n    }\n  }\n\n  submitAnnotation() {\n    this.applyAnnotation();\n    this.props.close();\n  }\n\n  renderChartHeader(label, description, value) {\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        hovered: true,\n        label: label,\n        description: description,\n        validationErrors: !value ? ['Mandatory'] : [] }\n      ));\n\n  }\n\n  renderValueConfiguration() {\n    const { annotationType, sourceType, value } = this.state;\n    let label = '';\n    let description = '';\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Select the Annotation Layer you would like to use.');\n      } else {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Chart');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n          `Use another existing chart as a source for annotations and overlays.\n          Your chart must be one of these visualization types: [%s]`,\n          this.getSupportedSourceTypes(annotationType).\n          map((x) => x.label).\n          join(', ')\n        );\n      }\n    } else if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Formula');\n      description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Expects a formula with depending time parameter 'x'\n        in milliseconds since epoch. mathjs is used to evaluate the formulas.\n        Example: '2x+5'`);\n    }\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components__WEBPACK_IMPORTED_MODULE_5__.AsyncSelect\n        /* key to force re-render on sourceType change */, {\n\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer value'),\n          name: \"annotation-layer-value\",\n          header: this.renderChartHeader(label, description, value),\n          options: this.fetchOptions,\n          value: value || null,\n          onChange: this.handleSelectValue,\n          notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}) }, sourceType\n        ));\n\n    }\n    if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-value\",\n          hovered: true,\n          showHeader: true,\n          description: description,\n          label: label,\n          placeholder: \"\",\n          value: value,\n          onChange: this.handleTextValue,\n          validationErrors:\n          !this.isValidFormulaAnnotation(value, annotationType) ?\n          [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Bad formula.')] :\n          [] }\n\n        ));\n\n    }\n    return '';\n  }\n\n  renderSliceConfiguration() {\n    const {\n      annotationType,\n      sourceType,\n      value,\n      slice,\n      overrides,\n      titleColumn,\n      timeColumn,\n      intervalEndColumn,\n      descriptionColumns\n    } = this.state;\n\n    if (!slice || !value) {\n      return '';\n    }\n\n    if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && slice) {\n      const columns = (slice.data.groupby || []).\n      concat(slice.data.all_columns || []).\n      map((x) => ({ value: x, label: x }));\n      const timeColumnOptions = slice.data.include_time ?\n      [{ value: '__timestamp', label: '__timestamp' }].concat(columns) :\n      columns;\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n            isSelected: true,\n            title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation Slice Configuration'),\n            info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This section allows you to configure how to use the slice\n              to generate annotations.`), children: [\n\n            (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT ||\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer time column'),\n              hovered: true,\n              name: \"annotation-layer-time-column\",\n              label:\n              annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL ?\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval start column') :\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Event time column'),\n\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !timeColumn ? ['Mandatory'] : [],\n              clearable: false,\n              options: timeColumnOptions,\n              value: timeColumn,\n              onChange: (v) => this.setState({ timeColumn: v }) }\n            ),\n\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer interval end'),\n              hovered: true,\n              name: \"annotation-layer-intervalEnd\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval End column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !intervalEndColumn ? ['Mandatory'] : [],\n              options: columns,\n              value: intervalEndColumn,\n              onChange: (value) => this.setState({ intervalEndColumn: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer title column'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Title Column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Pick a title for you annotation.'),\n              options: [{ value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('None') }].concat(columns),\n              value: titleColumn,\n              onChange: (value) => this.setState({ titleColumn: value }) }\n            ),\n            annotationType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer description columns'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Description Columns'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                \"Pick one or more columns that should be shown in the annotation. If you don't select a column all of them will be shown.\"\n              ),\n              multi: true,\n              options: columns,\n              value: descriptionColumns,\n              onChange: (value) => this.setState({ descriptionColumns: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { marginTop: '1rem' }, children: [\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-time_range\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time range'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the \"time_range\" field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_range' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_range;\n                  if (v) {\n                    this.setState({\n                      overrides: { ...overrides, time_range: null }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-timegrain\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time grain'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the time grain field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_grain_sqla' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_grain_sqla;\n                  delete overrides.granularity;\n                  if (v) {\n                    this.setState({\n                      overrides: {\n                        ...overrides,\n                        time_grain_sqla: null,\n                        granularity: null\n                      }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                hovered: true,\n                name: \"annotation-layer-timeshift\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Time Shift'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Time delta in natural language\n                  (example:  24 hours, 7 days, 56 weeks, 365 days)`),\n                placeholder: \"\",\n                value: overrides.time_shift,\n                onChange: (v) =>\n                this.setState({ overrides: { ...overrides, time_shift: v } }) }\n\n              )] }\n            )] }\n          ) }\n        ));\n\n    }\n    return '';\n  }\n\n  renderDisplayConfiguration() {\n    const {\n      color,\n      opacity,\n      style,\n      width,\n      showMarkers,\n      hideLine,\n      annotationType\n    } = this.state;\n    const colorScheme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_21__[\"default\"])().\n    get(this.props.colorScheme).\n    colors.concat();\n    if (\n    color &&\n    color !== AUTOMATIC_COLOR &&\n    !colorScheme.find((x) => x.toLowerCase() === color.toLowerCase()))\n    {\n      colorScheme.push(color);\n    }\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        isSelected: true,\n        title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Display configuration'),\n        info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure your how you overlay is displayed here.'), children: [\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer stroke'),\n          name: \"annotation-layer-stroke\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Style')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: 'solid', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'dashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dashed') },\n          { value: 'longDashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Long dashed') },\n          { value: 'dotted', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dotted') }],\n\n          value: style,\n          clearable: false,\n          onChange: (v) => this.setState({ style: v }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer opacity'),\n          name: \"annotation-layer-opacity\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Opacity')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'opacityLow', label: '0.2' },\n          { value: 'opacityMedium', label: '0.5' },\n          { value: 'opacityHigh', label: '0.8' }],\n\n          value: opacity,\n          onChange: (value) => this.setState({ opacity: value }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Color') }),\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'column' }, children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(react_color__WEBPACK_IMPORTED_MODULE_2__.CompactPicker, {\n              color: color,\n              colors: colorScheme,\n              onChangeComplete: (v) => this.setState({ color: v.hex }) }\n            ),\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              style: { marginTop: '0.5rem', marginBottom: '0.5rem' },\n              buttonStyle: color === AUTOMATIC_COLOR ? 'success' : 'default',\n              buttonSize: \"xsmall\",\n              onClick: () => this.setState({ color: AUTOMATIC_COLOR }), children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Automatic Color') }\n            )] }\n          )] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-stroke-width\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Line width'),\n          isInt: true,\n          value: width,\n          onChange: (v) => this.setState({ width: v }) }\n        ),\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-show-markers\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show Markers'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Shows or hides markers for the time series'),\n          value: showMarkers,\n          onChange: (v) => this.setState({ showMarkers: v }) }\n        ),\n\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-hide-line\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide Line'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hides the Line for the time series'),\n          value: hideLine,\n          onChange: (v) => this.setState({ hideLine: v }) }\n        )] }\n\n      ));\n\n  }\n\n  render() {\n    const { isNew, name, annotationType, sourceType, show, showLabel } =\n    this.state;\n    const isValid = this.isValidForm();\n    const metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(this.props.vizType);\n    const supportedAnnotationTypes = metadata ?\n    metadata.supportedAnnotationTypes.map(\n      (type) => _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[type]\n    ) :\n    [];\n    const supportedSourceTypes = this.getSupportedSourceTypes(annotationType);\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment, { children: [\n        this.props.error &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { style: { color: this.props.theme.colors.error.base }, children: [\"ERROR: \",\n          this.props.error] }\n        ),\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'row' }, children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n              isSelected: true,\n              title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Layer configuration'),\n              info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure the basics of your Annotation Layer.'), children: [\n\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                name: \"annotation-layer-name\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Name'),\n                placeholder: \"\",\n                value: name,\n                onChange: (v) => this.setState({ name: v }),\n                validationErrors: !name ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-layer-hide\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide layer'),\n                value: !show,\n                onChange: (v) => this.setState({ show: !v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-label-show\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show label'),\n                value: showLabel,\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Whether to always show the annotation label'),\n                onChange: (v) => this.setState({ showLabel: v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the annotation layer type'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                name: \"annotation-layer-type\",\n                clearable: false,\n                options: supportedAnnotationTypes,\n                value: annotationType,\n                onChange: this.handleAnnotationType }\n              ),\n              supportedSourceTypes.length > 0 &&\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the source of your annotations'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source'),\n                name: \"annotation-source-type\",\n                options: supportedSourceTypes,\n                notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}),\n                value: sourceType,\n                onChange: this.handleAnnotationSourceType,\n                validationErrors: !sourceType ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n\n              this.renderValueConfiguration()] }\n            ) }\n          ),\n          this.renderSliceConfiguration(),\n          this.renderDisplayConfiguration()] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', justifyContent: 'space-between' }, children: [\n          isNew ?\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: () => this.props.close(), children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Cancel') }\n          ) :\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: this.deleteAnnotation, children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Remove') }\n          ),\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              disabled: !isValid,\n              onClick: this.applyAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Apply') }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              buttonStyle: \"primary\",\n              disabled: !isValid,\n              onClick: this.submitAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('OK') }\n            )] }\n          )] }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayer.propTypes = propTypes;\nAnnotationLayer.defaultProps = defaultProps;const _default =\n\n(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_22__.b)(AnnotationLayer);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AUTOMATIC_COLOR, \"AUTOMATIC_COLOR\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContentWrapper, \"NotFoundContentWrapper\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContent, \"NotFoundContent\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");reactHotLoader.register(_default, \"default\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationLayer.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvbkxheWVyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL1JBO0FBT0E7QUFVQTtBQVFBO0FBS0E7QUFPQTtBQVFBO0FBTUE7QUFpQkE7QUFDQTtBQWNBO0FBVUE7QUErTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9Bbm5vdGF0aW9uTGF5ZXJDb250cm9sL0Fubm90YXRpb25MYXllci5qc3g/OWE0YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuICogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5pbXBvcnQgeyBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgeyBDb21wYWN0UGlja2VyIH0gZnJvbSAncmVhY3QtY29sb3InO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XHJcbmltcG9ydCB7XHJcbiAgdCxcclxuICBTdXBlcnNldENsaWVudCxcclxuICBnZXRDYXRlZ29yaWNhbFNjaGVtZVJlZ2lzdHJ5LFxyXG4gIGdldENoYXJ0TWV0YWRhdGFSZWdpc3RyeSxcclxuICB2YWxpZGF0ZU5vbkVtcHR5LFxyXG4gIGlzVmFsaWRFeHByZXNzaW9uLFxyXG4gIHN0eWxlZCxcclxuICBnZXRDb2x1bW5MYWJlbCxcclxuICB3aXRoVGhlbWUsXHJcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xyXG5pbXBvcnQgU2VsZWN0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NlbGVjdENvbnRyb2wnO1xyXG5pbXBvcnQgeyBBc3luY1NlbGVjdCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcclxuaW1wb3J0IFRleHRDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dENvbnRyb2wnO1xyXG5pbXBvcnQgQ2hlY2tib3hDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ2hlY2tib3hDb250cm9sJztcclxuaW1wb3J0IFBvcG92ZXJTZWN0aW9uIGZyb20gJ3NyYy9jb21wb25lbnRzL1BvcG92ZXJTZWN0aW9uJztcclxuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcclxuaW1wb3J0IHsgRW1wdHlTdGF0ZVNtYWxsIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvRW1wdHlTdGF0ZSc7XHJcbmltcG9ydCB7XHJcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMsXHJcbiAgQU5OT1RBVElPTl9UWVBFUyxcclxuICBBTk5PVEFUSU9OX1RZUEVTX01FVEFEQVRBLFxyXG4gIERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxyXG4gIHJlcXVpcmVzUXVlcnksXHJcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEsXHJcbn0gZnJvbSAnLi9Bbm5vdGF0aW9uVHlwZXMnO1xyXG5cclxuY29uc3QgQVVUT01BVElDX0NPTE9SID0gJyc7XHJcblxyXG5jb25zdCBwcm9wVHlwZXMgPSB7XHJcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBhbm5vdGF0aW9uVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBzb3VyY2VUeXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGNvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIG9wYWNpdHk6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc3R5bGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXHJcbiAgc2hvd01hcmtlcnM6IFByb3BUeXBlcy5ib29sLFxyXG4gIGhpZGVMaW5lOiBQcm9wVHlwZXMuYm9vbCxcclxuICB2YWx1ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxyXG4gIG92ZXJyaWRlczogUHJvcFR5cGVzLm9iamVjdCxcclxuICBzaG93OiBQcm9wVHlwZXMuYm9vbCxcclxuICBzaG93TGFiZWw6IFByb3BUeXBlcy5ib29sLFxyXG4gIHRpdGxlQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGRlc2NyaXB0aW9uQ29sdW1uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXHJcbiAgdGltZUNvbHVtbjogUHJvcFR5cGVzLnN0cmluZyxcclxuICBpbnRlcnZhbEVuZENvbHVtbjogUHJvcFR5cGVzLnN0cmluZyxcclxuICB2aXpUeXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG5cclxuICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjb2xvclNjaGVtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuXHJcbiAgYWRkQW5ub3RhdGlvbkxheWVyOiBQcm9wVHlwZXMuZnVuYyxcclxuICByZW1vdmVBbm5vdGF0aW9uTGF5ZXI6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcclxuICBuYW1lOiAnJyxcclxuICBhbm5vdGF0aW9uVHlwZTogREVGQVVMVF9BTk5PVEFUSU9OX1RZUEUsXHJcbiAgc291cmNlVHlwZTogJycsXHJcbiAgY29sb3I6IEFVVE9NQVRJQ19DT0xPUixcclxuICBvcGFjaXR5OiAnJyxcclxuICBzdHlsZTogJ3NvbGlkJyxcclxuICB3aWR0aDogMSxcclxuICBzaG93TWFya2VyczogZmFsc2UsXHJcbiAgaGlkZUxpbmU6IGZhbHNlLFxyXG4gIG92ZXJyaWRlczoge30sXHJcbiAgY29sb3JTY2hlbWU6ICdkM0NhdGVnb3J5MTAnLFxyXG4gIHNob3c6IHRydWUsXHJcbiAgc2hvd0xhYmVsOiBmYWxzZSxcclxuICB0aXRsZUNvbHVtbjogJycsXHJcbiAgZGVzY3JpcHRpb25Db2x1bW5zOiBbXSxcclxuICB0aW1lQ29sdW1uOiAnJyxcclxuICBpbnRlcnZhbEVuZENvbHVtbjogJycsXHJcblxyXG4gIGFkZEFubm90YXRpb25MYXllcjogKCkgPT4ge30sXHJcbiAgcmVtb3ZlQW5ub3RhdGlvbkxheWVyOiAoKSA9PiB7fSxcclxuICBjbG9zZTogKCkgPT4ge30sXHJcbn07XHJcblxyXG5jb25zdCBOb3RGb3VuZENvbnRlbnRXcmFwcGVyID0gc3R5bGVkLmRpdmBcclxuICAmJiA+IGRpdjpmaXJzdC1jaGlsZCB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDA7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAwO1xyXG4gIH1cclxuYDtcclxuXHJcbmNvbnN0IE5vdEZvdW5kQ29udGVudCA9ICgpID0+IChcclxuICA8Tm90Rm91bmRDb250ZW50V3JhcHBlcj5cclxuICAgIDxFbXB0eVN0YXRlU21hbGxcclxuICAgICAgdGl0bGU9e3QoJ05vIGFubm90YXRpb24gbGF5ZXJzJyl9XHJcbiAgICAgIGRlc2NyaXB0aW9uPXtcclxuICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgIHt0KCdBZGQgYW4gYW5ub3RhdGlvbiBsYXllcicpfXsnICd9XHJcbiAgICAgICAgICA8YVxyXG4gICAgICAgICAgICBocmVmPVwiL2Fubm90YXRpb25sYXllci9saXN0XCJcclxuICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt0KCdoZXJlJyl9XHJcbiAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAuXHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICB9XHJcbiAgICAgIGltYWdlPVwiZW1wdHkuc3ZnXCJcclxuICAgIC8+XHJcbiAgPC9Ob3RGb3VuZENvbnRlbnRXcmFwcGVyPlxyXG4pO1xyXG5cclxuY2xhc3MgQW5ub3RhdGlvbkxheWVyIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICBvcGFjaXR5LFxyXG4gICAgICBzdHlsZSxcclxuICAgICAgd2lkdGgsXHJcbiAgICAgIHNob3dNYXJrZXJzLFxyXG4gICAgICBoaWRlTGluZSxcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIG92ZXJyaWRlcyxcclxuICAgICAgc2hvdyxcclxuICAgICAgc2hvd0xhYmVsLFxyXG4gICAgICB0aXRsZUNvbHVtbixcclxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zLFxyXG4gICAgICB0aW1lQ29sdW1uLFxyXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcclxuICAgICAgdml6VHlwZSxcclxuICAgIH0gPSBwcm9wcztcclxuXHJcbiAgICAvLyBPbmx5IGFsbG93IG92ZXJyaWRlIHdob2xlIHRpbWVfcmFuZ2VcclxuICAgIGlmICgnc2luY2UnIGluIG92ZXJyaWRlcyB8fCAndW50aWwnIGluIG92ZXJyaWRlcykge1xyXG4gICAgICBvdmVycmlkZXMudGltZV9yYW5nZSA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXMuc2luY2U7XHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXMudW50aWw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgYW5ub3RhdGlvblR5cGUgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgY2hhcnRcclxuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHZpelR5cGUpO1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzID0gbWV0YWRhdGE/LnN1cHBvcnRlZEFubm90YXRpb25UeXBlcyB8fCBbXTtcclxuICAgIGNvbnN0IHZhbGlkQW5ub3RhdGlvblR5cGUgPSBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMuaW5jbHVkZXMoXHJcbiAgICAgIGFubm90YXRpb25UeXBlLFxyXG4gICAgKVxyXG4gICAgICA/IGFubm90YXRpb25UeXBlXHJcbiAgICAgIDogc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzWzBdO1xyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIC8vIGJhc2VcclxuICAgICAgbmFtZSxcclxuICAgICAgYW5ub3RhdGlvblR5cGU6IHZhbGlkQW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICBvdmVycmlkZXMsXHJcbiAgICAgIHNob3csXHJcbiAgICAgIHNob3dMYWJlbCxcclxuICAgICAgLy8gc2xpY2VcclxuICAgICAgdGl0bGVDb2x1bW4sXHJcbiAgICAgIGRlc2NyaXB0aW9uQ29sdW1ucyxcclxuICAgICAgdGltZUNvbHVtbixcclxuICAgICAgaW50ZXJ2YWxFbmRDb2x1bW4sXHJcbiAgICAgIC8vIGRpc3BsYXlcclxuICAgICAgY29sb3I6IGNvbG9yIHx8IEFVVE9NQVRJQ19DT0xPUixcclxuICAgICAgb3BhY2l0eSxcclxuICAgICAgc3R5bGUsXHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBzaG93TWFya2VycyxcclxuICAgICAgaGlkZUxpbmUsXHJcbiAgICAgIC8vIHJlZkRhdGFcclxuICAgICAgaXNOZXc6ICFuYW1lLFxyXG4gICAgICBzbGljZTogbnVsbCxcclxuICAgIH07XHJcbiAgICB0aGlzLnN1Ym1pdEFubm90YXRpb24gPSB0aGlzLnN1Ym1pdEFubm90YXRpb24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZGVsZXRlQW5ub3RhdGlvbiA9IHRoaXMuZGVsZXRlQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5hcHBseUFubm90YXRpb24gPSB0aGlzLmFwcGx5QW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5pc1ZhbGlkRm9ybSA9IHRoaXMuaXNWYWxpZEZvcm0uYmluZCh0aGlzKTtcclxuICAgIC8vIEhhbmRsZXJzXHJcbiAgICB0aGlzLmhhbmRsZUFubm90YXRpb25UeXBlID0gdGhpcy5oYW5kbGVBbm5vdGF0aW9uVHlwZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVBbm5vdGF0aW9uU291cmNlVHlwZSA9XHJcbiAgICAgIHRoaXMuaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlU2VsZWN0VmFsdWUgPSB0aGlzLmhhbmRsZVNlbGVjdFZhbHVlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZVRleHRWYWx1ZSA9IHRoaXMuaGFuZGxlVGV4dFZhbHVlLmJpbmQodGhpcyk7XHJcbiAgICAvLyBGZXRjaCByZWxhdGVkIGZ1bmN0aW9uc1xyXG4gICAgdGhpcy5mZXRjaE9wdGlvbnMgPSB0aGlzLmZldGNoT3B0aW9ucy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5mZXRjaENoYXJ0cyA9IHRoaXMuZmV0Y2hDaGFydHMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucyA9IHRoaXMuZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5mZXRjaEFwcGxpZWRBbm5vdGF0aW9uID0gdGhpcy5mZXRjaEFwcGxpZWRBbm5vdGF0aW9uLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmZldGNoU2xpY2VEYXRhID0gdGhpcy5mZXRjaFNsaWNlRGF0YS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zaG91bGRGZXRjaFNsaWNlRGF0YSA9IHRoaXMuc2hvdWxkRmV0Y2hTbGljZURhdGEuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZmV0Y2hBcHBsaWVkQ2hhcnQgPSB0aGlzLmZldGNoQXBwbGllZENoYXJ0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmZldGNoQXBwbGllZE5hdGl2ZUFubm90YXRpb24gPVxyXG4gICAgICB0aGlzLmZldGNoQXBwbGllZE5hdGl2ZUFubm90YXRpb24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2hvdWxkRmV0Y2hBcHBsaWVkQW5ub3RhdGlvbiA9XHJcbiAgICAgIHRoaXMuc2hvdWxkRmV0Y2hBcHBsaWVkQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBpZiAodGhpcy5zaG91bGRGZXRjaEFwcGxpZWRBbm5vdGF0aW9uKCkpIHtcclxuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgLyogVGhlIHZhbHVlIHByb3AgaXMgdGhlIGlkIG9mIHRoZSBjaGFydC9uYXRpdmUuIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXRcclxuICAgICAgdmFsdWUgaW4gc3RhdGUgdG8gYW4gb2JqZWN0IHdpdGggdGhlIGlkIGFzIHZhbHVlLnZhbHVlIHRvIGJlIHVzZWQgYnlcclxuICAgICAgQXN5bmNTZWxlY3QgKi9cclxuICAgICAgdGhpcy5mZXRjaEFwcGxpZWRBbm5vdGF0aW9uKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xyXG4gICAgaWYgKHRoaXMuc2hvdWxkRmV0Y2hTbGljZURhdGEocHJldlN0YXRlKSkge1xyXG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICB0aGlzLmZldGNoU2xpY2VEYXRhKHZhbHVlLnZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKSB7XHJcbiAgICAvLyBHZXQgdmlzIHR5cGVzIHRoYXQgY2FuIGJlIHNvdXJjZS5cclxuICAgIGNvbnN0IHNvdXJjZXMgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKVxyXG4gICAgICAuZW50cmllcygpXHJcbiAgICAgIC5maWx0ZXIoKHsgdmFsdWU6IGNoYXJ0TWV0YWRhdGEgfSkgPT5cclxuICAgICAgICBjaGFydE1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpLFxyXG4gICAgICApXHJcbiAgICAgIC5tYXAoKHsga2V5LCB2YWx1ZTogY2hhcnRNZXRhZGF0YSB9KSA9PiAoe1xyXG4gICAgICAgIHZhbHVlOiBrZXksXHJcbiAgICAgICAgbGFiZWw6IGNoYXJ0TWV0YWRhdGEubmFtZSxcclxuICAgICAgfSkpO1xyXG4gICAgLy8gUHJlcGVuZCBuYXRpdmUgc291cmNlIGlmIGFwcGxpY2FibGVcclxuICAgIGlmIChBTk5PVEFUSU9OX1RZUEVTX01FVEFEQVRBW2Fubm90YXRpb25UeXBlXT8uc3VwcG9ydE5hdGl2ZVNvdXJjZSkge1xyXG4gICAgICBzb3VyY2VzLnVuc2hpZnQoQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEuTkFUSVZFKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzb3VyY2VzO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkRmV0Y2hBcHBsaWVkQW5ub3RhdGlvbigpIHtcclxuICAgIGNvbnN0IHsgdmFsdWUsIHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gdmFsdWUgJiYgcmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKTtcclxuICB9XHJcblxyXG4gIHNob3VsZEZldGNoU2xpY2VEYXRhKHByZXZTdGF0ZSkge1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgc291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGlzQ2hhcnQgPVxyXG4gICAgICBzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUgJiZcclxuICAgICAgcmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKTtcclxuICAgIGNvbnN0IHZhbHVlSXNOZXcgPSB2YWx1ZSAmJiBwcmV2U3RhdGUudmFsdWUgIT09IHZhbHVlO1xyXG4gICAgcmV0dXJuIHZhbHVlSXNOZXcgJiYgaXNDaGFydDtcclxuICB9XHJcblxyXG4gIGlzVmFsaWRGb3JtdWxhQW5ub3RhdGlvbihleHByZXNzaW9uLCBhbm5vdGF0aW9uVHlwZSkge1xyXG4gICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLkZPUk1VTEEpIHtcclxuICAgICAgcmV0dXJuIGlzVmFsaWRFeHByZXNzaW9uKGV4cHJlc3Npb24pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBpc1ZhbGlkRm9ybSgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGUsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICB0aW1lQ29sdW1uLFxyXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcclxuICAgIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgZXJyb3JzID0gW1xyXG4gICAgICB2YWxpZGF0ZU5vbkVtcHR5KG5hbWUpLFxyXG4gICAgICB2YWxpZGF0ZU5vbkVtcHR5KGFubm90YXRpb25UeXBlKSxcclxuICAgICAgdmFsaWRhdGVOb25FbXB0eSh2YWx1ZSksXHJcbiAgICBdO1xyXG4gICAgaWYgKHNvdXJjZVR5cGUgIT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSkge1xyXG4gICAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRVZFTlQpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KHRpbWVDb2x1bW4pKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUwpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KHRpbWVDb2x1bW4pKTtcclxuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KGludGVydmFsRW5kQ29sdW1uKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVycm9ycy5wdXNoKCF0aGlzLmlzVmFsaWRGb3JtdWxhQW5ub3RhdGlvbih2YWx1ZSwgYW5ub3RhdGlvblR5cGUpKTtcclxuICAgIHJldHVybiAhZXJyb3JzLmZpbHRlcih4ID0+IHgpLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUFubm90YXRpb25UeXBlKGFubm90YXRpb25UeXBlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICAgIHNvdXJjZVR5cGU6IG51bGwsXHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICBzbGljZTogbnVsbCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGUoc291cmNlVHlwZSkge1xyXG4gICAgY29uc3QgeyBzb3VyY2VUeXBlOiBwcmV2U291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBpZiAocHJldlNvdXJjZVR5cGUgIT09IHNvdXJjZVR5cGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgc291cmNlVHlwZSxcclxuICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICBzbGljZTogbnVsbCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTZWxlY3RWYWx1ZShzZWxlY3RlZFZhbHVlT2JqZWN0KSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgdmFsdWU6IHNlbGVjdGVkVmFsdWVPYmplY3QsXHJcbiAgICAgIGRlc2NyaXB0aW9uQ29sdW1uczogW10sXHJcbiAgICAgIGludGVydmFsRW5kQ29sdW1uOiBudWxsLFxyXG4gICAgICB0aW1lQ29sdW1uOiBudWxsLFxyXG4gICAgICB0aXRsZUNvbHVtbjogbnVsbCxcclxuICAgICAgb3ZlcnJpZGVzOiB7IHRpbWVfcmFuZ2U6IG51bGwgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlVGV4dFZhbHVlKGlucHV0VmFsdWUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB2YWx1ZTogaW5wdXRWYWx1ZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZmV0Y2hOYXRpdmVBbm5vdGF0aW9ucyA9IGFzeW5jIChzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHJpc29uLmVuY29kZSh7XHJcbiAgICAgIGZpbHRlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb2w6ICduYW1lJyxcclxuICAgICAgICAgIG9wcjogJ2N0JyxcclxuICAgICAgICAgIHZhbHVlOiBzZWFyY2gsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgY29sdW1uczogWydpZCcsICduYW1lJ10sXHJcbiAgICAgIHBhZ2UsXHJcbiAgICAgIHBhZ2Vfc2l6ZTogcGFnZVNpemUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB7IGpzb24gfSA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LmdldCh7XHJcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9hbm5vdGF0aW9uX2xheWVyLz9xPSR7cXVlcnlQYXJhbXN9YCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0LCBjb3VudCB9ID0ganNvbjtcclxuXHJcbiAgICBjb25zdCBsYXllcnNBcnJheSA9IHJlc3VsdC5tYXAobGF5ZXIgPT4gKHtcclxuICAgICAgdmFsdWU6IGxheWVyLmlkLFxyXG4gICAgICBsYWJlbDogbGF5ZXIubmFtZSxcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiBsYXllcnNBcnJheSxcclxuICAgICAgdG90YWxDb3VudDogY291bnQsXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIGZldGNoQ2hhcnRzID0gYXN5bmMgKHNlYXJjaCwgcGFnZSwgcGFnZVNpemUpID0+IHtcclxuICAgIGNvbnN0IHsgYW5ub3RhdGlvblR5cGUgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSByaXNvbi5lbmNvZGUoe1xyXG4gICAgICBmaWx0ZXJzOiBbXHJcbiAgICAgICAgeyBjb2w6ICdzbGljZV9uYW1lJywgb3ByOiAnY2hhcnRfYWxsX3RleHQnLCB2YWx1ZTogc2VhcmNoIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29sOiAnaWQnLFxyXG4gICAgICAgICAgb3ByOiAnY2hhcnRfb3duZWRfY3JlYXRlZF9mYXZvcmVkX2J5X21lJyxcclxuICAgICAgICAgIHZhbHVlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIGNvbHVtbnM6IFsnaWQnLCAnc2xpY2VfbmFtZScsICd2aXpfdHlwZSddLFxyXG4gICAgICBvcmRlcl9jb2x1bW46ICdzbGljZV9uYW1lJyxcclxuICAgICAgb3JkZXJfZGlyZWN0aW9uOiAnYXNjJyxcclxuICAgICAgcGFnZSxcclxuICAgICAgcGFnZV9zaXplOiBwYWdlU2l6ZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgeyBqc29uIH0gPSBhd2FpdCBTdXBlcnNldENsaWVudC5nZXQoe1xyXG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvP3E9JHtxdWVyeVBhcmFtc31gLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgeyByZXN1bHQsIGNvdW50IH0gPSBqc29uO1xyXG4gICAgY29uc3QgcmVnaXN0cnkgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKTtcclxuXHJcbiAgICBjb25zdCBjaGFydHNBcnJheSA9IHJlc3VsdFxyXG4gICAgICAuZmlsdGVyKGNoYXJ0ID0+IHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHJlZ2lzdHJ5LmdldChjaGFydC52aXpfdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhICYmIG1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpO1xyXG4gICAgICB9KVxyXG4gICAgICAubWFwKGNoYXJ0ID0+ICh7XHJcbiAgICAgICAgdmFsdWU6IGNoYXJ0LmlkLFxyXG4gICAgICAgIGxhYmVsOiBjaGFydC5zbGljZV9uYW1lLFxyXG4gICAgICAgIHZpel90eXBlOiBjaGFydC52aXpfdHlwZSxcclxuICAgICAgfSkpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGE6IGNoYXJ0c0FycmF5LFxyXG4gICAgICB0b3RhbENvdW50OiBjb3VudCxcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgZmV0Y2hPcHRpb25zID0gKHNlYXJjaCwgcGFnZSwgcGFnZVNpemUpID0+IHtcclxuICAgIGNvbnN0IHsgc291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBpZiAoc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZldGNoTmF0aXZlQW5ub3RhdGlvbnMoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mZXRjaENoYXJ0cyhzZWFyY2gsIHBhZ2UsIHBhZ2VTaXplKTtcclxuICB9O1xyXG5cclxuICBmZXRjaFNsaWNlRGF0YSA9IGlkID0+IHtcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcmlzb24uZW5jb2RlKHtcclxuICAgICAgY29sdW1uczogWydxdWVyeV9jb250ZXh0J10sXHJcbiAgICB9KTtcclxuICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XHJcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke2lkfT9xPSR7cXVlcnlQYXJhbXN9YCxcclxuICAgIH0pLnRoZW4oKHsganNvbiB9KSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBqc29uO1xyXG4gICAgICBjb25zdCBxdWVyeUNvbnRleHQgPSByZXN1bHQucXVlcnlfY29udGV4dDtcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSBKU09OLnBhcnNlKHF1ZXJ5Q29udGV4dCkuZm9ybV9kYXRhO1xyXG4gICAgICBjb25zdCBkYXRhT2JqZWN0ID0ge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIC4uLmZvcm1EYXRhLFxyXG4gICAgICAgICAgZ3JvdXBieTogZm9ybURhdGEuZ3JvdXBieT8ubWFwKGNvbHVtbiA9PiBnZXRDb2x1bW5MYWJlbChjb2x1bW4pKSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzbGljZTogZGF0YU9iamVjdCxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBmZXRjaEFwcGxpZWRDaGFydChpZCkge1xyXG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCk7XHJcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHJpc29uLmVuY29kZSh7XHJcbiAgICAgIGNvbHVtbnM6IFsnc2xpY2VfbmFtZScsICdxdWVyeV9jb250ZXh0JywgJ3Zpel90eXBlJ10sXHJcbiAgICB9KTtcclxuICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XHJcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke2lkfT9xPSR7cXVlcnlQYXJhbXN9YCxcclxuICAgIH0pLnRoZW4oKHsganNvbiB9KSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBqc29uO1xyXG4gICAgICBjb25zdCBzbGljZU5hbWUgPSByZXN1bHQuc2xpY2VfbmFtZTtcclxuICAgICAgY29uc3QgcXVlcnlDb250ZXh0ID0gcmVzdWx0LnF1ZXJ5X2NvbnRleHQ7XHJcbiAgICAgIGNvbnN0IHZpelR5cGUgPSByZXN1bHQudml6X3R5cGU7XHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gSlNPTi5wYXJzZShxdWVyeUNvbnRleHQpLmZvcm1fZGF0YTtcclxuICAgICAgY29uc3QgbWV0YWRhdGEgPSByZWdpc3RyeS5nZXQodml6VHlwZSk7XHJcbiAgICAgIGNvbnN0IGNhbkJlQW5ub3RhdGlvblR5cGUgPVxyXG4gICAgICAgIG1ldGFkYXRhICYmIG1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpO1xyXG4gICAgICBpZiAoY2FuQmVBbm5vdGF0aW9uVHlwZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgdmFsdWU6IGlkLFxyXG4gICAgICAgICAgICBsYWJlbDogc2xpY2VOYW1lLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNsaWNlOiB7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAuLi5mb3JtRGF0YSxcclxuICAgICAgICAgICAgICBncm91cGJ5OiBmb3JtRGF0YS5ncm91cGJ5Py5tYXAoY29sdW1uID0+IGdldENvbHVtbkxhYmVsKGNvbHVtbikpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmZXRjaEFwcGxpZWROYXRpdmVBbm5vdGF0aW9uKGlkKSB7XHJcbiAgICBTdXBlcnNldENsaWVudC5nZXQoe1xyXG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvYW5ub3RhdGlvbl9sYXllci8ke2lkfWAsXHJcbiAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0ganNvbjtcclxuICAgICAgY29uc3QgbGF5ZXIgPSByZXN1bHQ7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICB2YWx1ZTogbGF5ZXIuaWQsXHJcbiAgICAgICAgICBsYWJlbDogbGF5ZXIubmFtZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZmV0Y2hBcHBsaWVkQW5ub3RhdGlvbihpZCkge1xyXG4gICAgY29uc3QgeyBzb3VyY2VUeXBlIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIGlmIChzb3VyY2VUeXBlID09PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hBcHBsaWVkTmF0aXZlQW5ub3RhdGlvbihpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5mZXRjaEFwcGxpZWRDaGFydChpZCk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVBbm5vdGF0aW9uKCkge1xyXG4gICAgdGhpcy5wcm9wcy5yZW1vdmVBbm5vdGF0aW9uTGF5ZXIoKTtcclxuICAgIHRoaXMucHJvcHMuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIGFwcGx5QW5ub3RhdGlvbigpIHtcclxuICAgIGNvbnN0IHsgdmFsdWUsIHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAodGhpcy5pc1ZhbGlkRm9ybSgpKSB7XHJcbiAgICAgIGNvbnN0IGFubm90YXRpb25GaWVsZHMgPSBbXHJcbiAgICAgICAgJ25hbWUnLFxyXG4gICAgICAgICdhbm5vdGF0aW9uVHlwZScsXHJcbiAgICAgICAgJ3NvdXJjZVR5cGUnLFxyXG4gICAgICAgICdjb2xvcicsXHJcbiAgICAgICAgJ29wYWNpdHknLFxyXG4gICAgICAgICdzdHlsZScsXHJcbiAgICAgICAgJ3dpZHRoJyxcclxuICAgICAgICAnc2hvd01hcmtlcnMnLFxyXG4gICAgICAgICdoaWRlTGluZScsXHJcbiAgICAgICAgJ292ZXJyaWRlcycsXHJcbiAgICAgICAgJ3Nob3cnLFxyXG4gICAgICAgICdzaG93TGFiZWwnLFxyXG4gICAgICAgICd0aXRsZUNvbHVtbicsXHJcbiAgICAgICAgJ2Rlc2NyaXB0aW9uQ29sdW1ucycsXHJcbiAgICAgICAgJ3RpbWVDb2x1bW4nLFxyXG4gICAgICAgICdpbnRlcnZhbEVuZENvbHVtbicsXHJcbiAgICAgIF07XHJcbiAgICAgIGNvbnN0IG5ld0Fubm90YXRpb24gPSB7fTtcclxuICAgICAgYW5ub3RhdGlvbkZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZVtmaWVsZF0gIT09IG51bGwpIHtcclxuICAgICAgICAgIG5ld0Fubm90YXRpb25bZmllbGRdID0gdGhpcy5zdGF0ZVtmaWVsZF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFByZXBhcmUgbmV3QW5ub3RhdGlvbi52YWx1ZSBmb3IgdXNlIGluIHJ1bkFubm90YXRpb25RdWVyeSgpXHJcbiAgICAgIGNvbnN0IGFwcGxpY2FibGVWYWx1ZSA9IHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSkgPyB2YWx1ZS52YWx1ZSA6IHZhbHVlO1xyXG4gICAgICBuZXdBbm5vdGF0aW9uLnZhbHVlID0gYXBwbGljYWJsZVZhbHVlO1xyXG5cclxuICAgICAgaWYgKG5ld0Fubm90YXRpb24uY29sb3IgPT09IEFVVE9NQVRJQ19DT0xPUikge1xyXG4gICAgICAgIG5ld0Fubm90YXRpb24uY29sb3IgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnByb3BzLmFkZEFubm90YXRpb25MYXllcihuZXdBbm5vdGF0aW9uKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTmV3OiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN1Ym1pdEFubm90YXRpb24oKSB7XHJcbiAgICB0aGlzLmFwcGx5QW5ub3RhdGlvbigpO1xyXG4gICAgdGhpcy5wcm9wcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2hhcnRIZWFkZXIobGFiZWwsIGRlc2NyaXB0aW9uLCB2YWx1ZSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPENvbnRyb2xIZWFkZXJcclxuICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgbGFiZWw9e2xhYmVsfVxyXG4gICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshdmFsdWUgPyBbJ01hbmRhdG9yeSddIDogW119XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVmFsdWVDb25maWd1cmF0aW9uKCkge1xyXG4gICAgY29uc3QgeyBhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgdmFsdWUgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBsZXQgbGFiZWwgPSAnJztcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xyXG4gICAgaWYgKHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSkpIHtcclxuICAgICAgaWYgKHNvdXJjZVR5cGUgPT09IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTLk5BVElWRSkge1xyXG4gICAgICAgIGxhYmVsID0gdCgnQW5ub3RhdGlvbiBsYXllcicpO1xyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gdCgnU2VsZWN0IHRoZSBBbm5vdGF0aW9uIExheWVyIHlvdSB3b3VsZCBsaWtlIHRvIHVzZS4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsYWJlbCA9IHQoJ0NoYXJ0Jyk7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSB0KFxyXG4gICAgICAgICAgYFVzZSBhbm90aGVyIGV4aXN0aW5nIGNoYXJ0IGFzIGEgc291cmNlIGZvciBhbm5vdGF0aW9ucyBhbmQgb3ZlcmxheXMuXHJcbiAgICAgICAgICBZb3VyIGNoYXJ0IG11c3QgYmUgb25lIG9mIHRoZXNlIHZpc3VhbGl6YXRpb24gdHlwZXM6IFslc11gLFxyXG4gICAgICAgICAgdGhpcy5nZXRTdXBwb3J0ZWRTb3VyY2VUeXBlcyhhbm5vdGF0aW9uVHlwZSlcclxuICAgICAgICAgICAgLm1hcCh4ID0+IHgubGFiZWwpXHJcbiAgICAgICAgICAgIC5qb2luKCcsICcpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xyXG4gICAgICBsYWJlbCA9IHQoJ0Zvcm11bGEnKTtcclxuICAgICAgZGVzY3JpcHRpb24gPSB0KGBFeHBlY3RzIGEgZm9ybXVsYSB3aXRoIGRlcGVuZGluZyB0aW1lIHBhcmFtZXRlciAneCdcclxuICAgICAgICBpbiBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2guIG1hdGhqcyBpcyB1c2VkIHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhcy5cclxuICAgICAgICBFeGFtcGxlOiAnMngrNSdgKTtcclxuICAgIH1cclxuICAgIGlmIChyZXF1aXJlc1F1ZXJ5KHNvdXJjZVR5cGUpKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPEFzeW5jU2VsZWN0XHJcbiAgICAgICAgICAvKiBrZXkgdG8gZm9yY2UgcmUtcmVuZGVyIG9uIHNvdXJjZVR5cGUgY2hhbmdlICovXHJcbiAgICAgICAgICBrZXk9e3NvdXJjZVR5cGV9XHJcbiAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgdmFsdWUnKX1cclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXZhbHVlXCJcclxuICAgICAgICAgIGhlYWRlcj17dGhpcy5yZW5kZXJDaGFydEhlYWRlcihsYWJlbCwgZGVzY3JpcHRpb24sIHZhbHVlKX1cclxuICAgICAgICAgIG9wdGlvbnM9e3RoaXMuZmV0Y2hPcHRpb25zfVxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlIHx8IG51bGx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVTZWxlY3RWYWx1ZX1cclxuICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17PE5vdEZvdW5kQ29udGVudCAvPn1cclxuICAgICAgICAvPlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLkZPUk1VTEEpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8VGV4dENvbnRyb2xcclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXZhbHVlXCJcclxuICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgIHNob3dIZWFkZXJcclxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIGxhYmVsPXtsYWJlbH1cclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRleHRWYWx1ZX1cclxuICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9e1xyXG4gICAgICAgICAgICAhdGhpcy5pc1ZhbGlkRm9ybXVsYUFubm90YXRpb24odmFsdWUsIGFubm90YXRpb25UeXBlKVxyXG4gICAgICAgICAgICAgID8gW3QoJ0JhZCBmb3JtdWxhLicpXVxyXG4gICAgICAgICAgICAgIDogW11cclxuICAgICAgICAgIH1cclxuICAgICAgICAvPlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2xpY2VDb25maWd1cmF0aW9uKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBhbm5vdGF0aW9uVHlwZSxcclxuICAgICAgc291cmNlVHlwZSxcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIHNsaWNlLFxyXG4gICAgICBvdmVycmlkZXMsXHJcbiAgICAgIHRpdGxlQ29sdW1uLFxyXG4gICAgICB0aW1lQ29sdW1uLFxyXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcclxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zLFxyXG4gICAgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYgKCFzbGljZSB8fCAhdmFsdWUpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUgJiYgc2xpY2UpIHtcclxuICAgICAgY29uc3QgY29sdW1ucyA9IChzbGljZS5kYXRhLmdyb3VwYnkgfHwgW10pXHJcbiAgICAgICAgLmNvbmNhdChzbGljZS5kYXRhLmFsbF9jb2x1bW5zIHx8IFtdKVxyXG4gICAgICAgIC5tYXAoeCA9PiAoeyB2YWx1ZTogeCwgbGFiZWw6IHggfSkpO1xyXG4gICAgICBjb25zdCB0aW1lQ29sdW1uT3B0aW9ucyA9IHNsaWNlLmRhdGEuaW5jbHVkZV90aW1lXHJcbiAgICAgICAgPyBbeyB2YWx1ZTogJ19fdGltZXN0YW1wJywgbGFiZWw6ICdfX3RpbWVzdGFtcCcgfV0uY29uY2F0KGNvbHVtbnMpXHJcbiAgICAgICAgOiBjb2x1bW5zO1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6ICcycmVtJyB9fT5cclxuICAgICAgICAgIDxQb3BvdmVyU2VjdGlvblxyXG4gICAgICAgICAgICBpc1NlbGVjdGVkXHJcbiAgICAgICAgICAgIHRpdGxlPXt0KCdBbm5vdGF0aW9uIFNsaWNlIENvbmZpZ3VyYXRpb24nKX1cclxuICAgICAgICAgICAgaW5mbz17dChgVGhpcyBzZWN0aW9uIGFsbG93cyB5b3UgdG8gY29uZmlndXJlIGhvdyB0byB1c2UgdGhlIHNsaWNlXHJcbiAgICAgICAgICAgICAgdG8gZ2VuZXJhdGUgYW5ub3RhdGlvbnMuYCl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHsoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRVZFTlQgfHxcclxuICAgICAgICAgICAgICBhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5JTlRFUlZBTCkgJiYgKFxyXG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXHJcbiAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgdGltZSBjb2x1bW4nKX1cclxuICAgICAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXRpbWUtY29sdW1uXCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPXtcclxuICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUxcclxuICAgICAgICAgICAgICAgICAgICA/IHQoJ0ludGVydmFsIHN0YXJ0IGNvbHVtbicpXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0KCdFdmVudCB0aW1lIGNvbHVtbicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcclxuICAgICAgICAgICAgICAgICAgJ1RoaXMgY29sdW1uIG11c3QgY29udGFpbiBkYXRlL3RpbWUgaW5mb3JtYXRpb24uJyxcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshdGltZUNvbHVtbiA/IFsnTWFuZGF0b3J5J10gOiBbXX1cclxuICAgICAgICAgICAgICAgIGNsZWFyYWJsZT17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXt0aW1lQ29sdW1uT3B0aW9uc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aW1lQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHRpbWVDb2x1bW46IHYgfSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMICYmIChcclxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIGludGVydmFsIGVuZCcpfVxyXG4gICAgICAgICAgICAgICAgaG92ZXJlZFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaW50ZXJ2YWxFbmRcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0ludGVydmFsIEVuZCBjb2x1bW4nKX1cclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxyXG4gICAgICAgICAgICAgICAgICAnVGhpcyBjb2x1bW4gbXVzdCBjb250YWluIGRhdGUvdGltZSBpbmZvcm1hdGlvbi4nLFxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyFpbnRlcnZhbEVuZENvbHVtbiA/IFsnTWFuZGF0b3J5J10gOiBbXX1cclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2NvbHVtbnN9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17aW50ZXJ2YWxFbmRDb2x1bW59XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IGludGVydmFsRW5kQ29sdW1uOiB2YWx1ZSB9KX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB0aXRsZSBjb2x1bW4nKX1cclxuICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdGl0bGVcIlxyXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdUaXRsZSBDb2x1bW4nKX1cclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnUGljayBhIHRpdGxlIGZvciB5b3UgYW5ub3RhdGlvbi4nKX1cclxuICAgICAgICAgICAgICBvcHRpb25zPXtbeyB2YWx1ZTogJycsIGxhYmVsOiB0KCdOb25lJykgfV0uY29uY2F0KGNvbHVtbnMpfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXt0aXRsZUNvbHVtbn1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IHRpdGxlQ29sdW1uOiB2YWx1ZSB9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAge2Fubm90YXRpb25UeXBlICE9PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcclxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIGRlc2NyaXB0aW9uIGNvbHVtbnMnKX1cclxuICAgICAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXRpdGxlXCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbiBDb2x1bW5zJyl9XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcclxuICAgICAgICAgICAgICAgICAgXCJQaWNrIG9uZSBvciBtb3JlIGNvbHVtbnMgdGhhdCBzaG91bGQgYmUgc2hvd24gaW4gdGhlIGFubm90YXRpb24uIElmIHlvdSBkb24ndCBzZWxlY3QgYSBjb2x1bW4gYWxsIG9mIHRoZW0gd2lsbCBiZSBzaG93bi5cIixcclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICBtdWx0aVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17Y29sdW1uc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbkNvbHVtbnN9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IGRlc2NyaXB0aW9uQ29sdW1uczogdmFsdWUgfSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6ICcxcmVtJyB9fT5cclxuICAgICAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1vdmVycmlkZS10aW1lX3JhbmdlXCJcclxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdPdmVycmlkZSB0aW1lIHJhbmdlJyl9XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChgVGhpcyBjb250cm9scyB3aGV0aGVyIHRoZSBcInRpbWVfcmFuZ2VcIiBmaWVsZCBmcm9tIHRoZSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICAgIHZpZXcgc2hvdWxkIGJlIHBhc3NlZCBkb3duIHRvIHRoZSBjaGFydCBjb250YWluaW5nIHRoZSBhbm5vdGF0aW9uIGRhdGEuYCl9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17J3RpbWVfcmFuZ2UnIGluIG92ZXJyaWRlc31cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlIG92ZXJyaWRlcy50aW1lX3JhbmdlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcywgdGltZV9yYW5nZTogbnVsbCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvdmVycmlkZXM6IHsgLi4ub3ZlcnJpZGVzIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1vdmVycmlkZS10aW1lZ3JhaW5cIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ092ZXJyaWRlIHRpbWUgZ3JhaW4nKX1cclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KGBUaGlzIGNvbnRyb2xzIHdoZXRoZXIgdGhlIHRpbWUgZ3JhaW4gZmllbGQgZnJvbSB0aGUgY3VycmVudFxyXG4gICAgICAgICAgICAgICAgICB2aWV3IHNob3VsZCBiZSBwYXNzZWQgZG93biB0byB0aGUgY2hhcnQgY29udGFpbmluZyB0aGUgYW5ub3RhdGlvbiBkYXRhLmApfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9eyd0aW1lX2dyYWluX3NxbGEnIGluIG92ZXJyaWRlc31cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlIG92ZXJyaWRlcy50aW1lX2dyYWluX3NxbGE7XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXMuZ3JhbnVsYXJpdHk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvdmVycmlkZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3ZlcnJpZGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lX2dyYWluX3NxbGE6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyYW51bGFyaXR5OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPFRleHRDb250cm9sXHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aW1lc2hpZnRcIlxyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1RpbWUgU2hpZnQnKX1cclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KGBUaW1lIGRlbHRhIGluIG5hdHVyYWwgbGFuZ3VhZ2VcclxuICAgICAgICAgICAgICAgICAgKGV4YW1wbGU6ICAyNCBob3VycywgNyBkYXlzLCA1NiB3ZWVrcywgMzY1IGRheXMpYCl9XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17b3ZlcnJpZGVzLnRpbWVfc2hpZnR9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcywgdGltZV9zaGlmdDogdiB9IH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L1BvcG92ZXJTZWN0aW9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyRGlzcGxheUNvbmZpZ3VyYXRpb24oKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICBvcGFjaXR5LFxyXG4gICAgICBzdHlsZSxcclxuICAgICAgd2lkdGgsXHJcbiAgICAgIHNob3dNYXJrZXJzLFxyXG4gICAgICBoaWRlTGluZSxcclxuICAgICAgYW5ub3RhdGlvblR5cGUsXHJcbiAgICB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGNvbG9yU2NoZW1lID0gZ2V0Q2F0ZWdvcmljYWxTY2hlbWVSZWdpc3RyeSgpXHJcbiAgICAgIC5nZXQodGhpcy5wcm9wcy5jb2xvclNjaGVtZSlcclxuICAgICAgLmNvbG9ycy5jb25jYXQoKTtcclxuICAgIGlmIChcclxuICAgICAgY29sb3IgJiZcclxuICAgICAgY29sb3IgIT09IEFVVE9NQVRJQ19DT0xPUiAmJlxyXG4gICAgICAhY29sb3JTY2hlbWUuZmluZCh4ID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gY29sb3IudG9Mb3dlckNhc2UoKSlcclxuICAgICkge1xyXG4gICAgICBjb2xvclNjaGVtZS5wdXNoKGNvbG9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxQb3BvdmVyU2VjdGlvblxyXG4gICAgICAgIGlzU2VsZWN0ZWRcclxuICAgICAgICB0aXRsZT17dCgnRGlzcGxheSBjb25maWd1cmF0aW9uJyl9XHJcbiAgICAgICAgaW5mbz17dCgnQ29uZmlndXJlIHlvdXIgaG93IHlvdSBvdmVybGF5IGlzIGRpc3BsYXllZCBoZXJlLicpfVxyXG4gICAgICA+XHJcbiAgICAgICAgPFNlbGVjdENvbnRyb2xcclxuICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciBzdHJva2UnKX1cclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXN0cm9rZVwiXHJcbiAgICAgICAgICBsYWJlbD17dCgnU3R5bGUnKX1cclxuICAgICAgICAgIC8vIHNlZSAnLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvbnZkM192aXMuY3NzJ1xyXG4gICAgICAgICAgb3B0aW9ucz17W1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnc29saWQnLCBsYWJlbDogdCgnU29saWQnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnZGFzaGVkJywgbGFiZWw6IHQoJ0Rhc2hlZCcpIH0sXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdsb25nRGFzaGVkJywgbGFiZWw6IHQoJ0xvbmcgZGFzaGVkJykgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ2RvdHRlZCcsIGxhYmVsOiB0KCdEb3R0ZWQnKSB9LFxyXG4gICAgICAgICAgXX1cclxuICAgICAgICAgIHZhbHVlPXtzdHlsZX1cclxuICAgICAgICAgIGNsZWFyYWJsZT17ZmFsc2V9XHJcbiAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc3R5bGU6IHYgfSl9XHJcbiAgICAgICAgLz5cclxuICAgICAgICA8U2VsZWN0Q29udHJvbFxyXG4gICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIG9wYWNpdHknKX1cclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLW9wYWNpdHlcIlxyXG4gICAgICAgICAgbGFiZWw9e3QoJ09wYWNpdHknKX1cclxuICAgICAgICAgIC8vIHNlZSAnLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvbnZkM192aXMuY3NzJ1xyXG4gICAgICAgICAgb3B0aW9ucz17W1xyXG4gICAgICAgICAgICB7IHZhbHVlOiAnJywgbGFiZWw6IHQoJ1NvbGlkJykgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlMb3cnLCBsYWJlbDogJzAuMicgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlNZWRpdW0nLCBsYWJlbDogJzAuNScgfSxcclxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlIaWdoJywgbGFiZWw6ICcwLjgnIH0sXHJcbiAgICAgICAgICBdfVxyXG4gICAgICAgICAgdmFsdWU9e29wYWNpdHl9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IG9wYWNpdHk6IHZhbHVlIH0pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxDb250cm9sSGVhZGVyIGxhYmVsPXt0KCdDb2xvcicpfSAvPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIH19PlxyXG4gICAgICAgICAgICA8Q29tcGFjdFBpY2tlclxyXG4gICAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cclxuICAgICAgICAgICAgICBjb2xvcnM9e2NvbG9yU2NoZW1lfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlQ29tcGxldGU9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IGNvbG9yOiB2LmhleCB9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblRvcDogJzAuNXJlbScsIG1hcmdpbkJvdHRvbTogJzAuNXJlbScgfX1cclxuICAgICAgICAgICAgICBidXR0b25TdHlsZT17Y29sb3IgPT09IEFVVE9NQVRJQ19DT0xPUiA/ICdzdWNjZXNzJyA6ICdkZWZhdWx0J31cclxuICAgICAgICAgICAgICBidXR0b25TaXplPVwieHNtYWxsXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgY29sb3I6IEFVVE9NQVRJQ19DT0xPUiB9KX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt0KCdBdXRvbWF0aWMgQ29sb3InKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8VGV4dENvbnRyb2xcclxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXN0cm9rZS13aWR0aFwiXHJcbiAgICAgICAgICBsYWJlbD17dCgnTGluZSB3aWR0aCcpfVxyXG4gICAgICAgICAgaXNJbnRcclxuICAgICAgICAgIHZhbHVlPXt3aWR0aH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyB3aWR0aDogdiB9KX1cclxuICAgICAgICAvPlxyXG4gICAgICAgIHthbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5USU1FX1NFUklFUyAmJiAoXHJcbiAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXHJcbiAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItc2hvdy1tYXJrZXJzXCJcclxuICAgICAgICAgICAgbGFiZWw9e3QoJ1Nob3cgTWFya2VycycpfVxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnU2hvd3Mgb3IgaGlkZXMgbWFya2VycyBmb3IgdGhlIHRpbWUgc2VyaWVzJyl9XHJcbiAgICAgICAgICAgIHZhbHVlPXtzaG93TWFya2Vyc31cclxuICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHNob3dNYXJrZXJzOiB2IH0pfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApfVxyXG4gICAgICAgIHthbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5USU1FX1NFUklFUyAmJiAoXHJcbiAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXHJcbiAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaGlkZS1saW5lXCJcclxuICAgICAgICAgICAgbGFiZWw9e3QoJ0hpZGUgTGluZScpfVxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnSGlkZXMgdGhlIExpbmUgZm9yIHRoZSB0aW1lIHNlcmllcycpfVxyXG4gICAgICAgICAgICB2YWx1ZT17aGlkZUxpbmV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBoaWRlTGluZTogdiB9KX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGlzTmV3LCBuYW1lLCBhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgc2hvdywgc2hvd0xhYmVsIH0gPVxyXG4gICAgICB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgaXNWYWxpZCA9IHRoaXMuaXNWYWxpZEZvcm0oKTtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHRoaXMucHJvcHMudml6VHlwZSk7XHJcbiAgICBjb25zdCBzdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMgPSBtZXRhZGF0YVxyXG4gICAgICA/IG1ldGFkYXRhLnN1cHBvcnRlZEFubm90YXRpb25UeXBlcy5tYXAoXHJcbiAgICAgICAgICB0eXBlID0+IEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEFbdHlwZV0sXHJcbiAgICAgICAgKVxyXG4gICAgICA6IFtdO1xyXG4gICAgY29uc3Qgc3VwcG9ydGVkU291cmNlVHlwZXMgPSB0aGlzLmdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmVycm9yICYmIChcclxuICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGNvbG9yOiB0aGlzLnByb3BzLnRoZW1lLmNvbG9ycy5lcnJvci5iYXNlIH19PlxyXG4gICAgICAgICAgICBFUlJPUjoge3RoaXMucHJvcHMuZXJyb3J9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKX1cclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ3JvdycgfX0+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMnJlbScgfX0+XHJcbiAgICAgICAgICAgIDxQb3BvdmVyU2VjdGlvblxyXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWRcclxuICAgICAgICAgICAgICB0aXRsZT17dCgnTGF5ZXIgY29uZmlndXJhdGlvbicpfVxyXG4gICAgICAgICAgICAgIGluZm89e3QoJ0NvbmZpZ3VyZSB0aGUgYmFzaWNzIG9mIHlvdXIgQW5ub3RhdGlvbiBMYXllci4nKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItbmFtZVwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnTmFtZScpfVxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgbmFtZTogdiB9KX1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyFuYW1lID8gW3QoJ01hbmRhdG9yeScpXSA6IFtdfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaGlkZVwiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnSGlkZSBsYXllcicpfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9eyFzaG93fVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHNob3c6ICF2IH0pfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGFiZWwtc2hvd1wiXHJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnU2hvdyBsYWJlbCcpfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e3Nob3dMYWJlbH1cclxuICAgICAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdXaGV0aGVyIHRvIGFsd2F5cyBzaG93IHRoZSBhbm5vdGF0aW9uIGxhYmVsJyl9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc2hvd0xhYmVsOiB2IH0pfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcclxuICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB0eXBlJyl9XHJcbiAgICAgICAgICAgICAgICBob3ZlcmVkXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnQ2hvb3NlIHRoZSBhbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cclxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cclxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXR5cGVcIlxyXG4gICAgICAgICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e3N1cHBvcnRlZEFubm90YXRpb25UeXBlc31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXthbm5vdGF0aW9uVHlwZX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUFubm90YXRpb25UeXBlfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAge3N1cHBvcnRlZFNvdXJjZVR5cGVzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIHNvdXJjZSB0eXBlJyl9XHJcbiAgICAgICAgICAgICAgICAgIGhvdmVyZWRcclxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ0Nob29zZSB0aGUgc291cmNlIG9mIHlvdXIgYW5ub3RhdGlvbnMnKX1cclxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Fubm90YXRpb24gc291cmNlJyl9XHJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLXNvdXJjZS10eXBlXCJcclxuICAgICAgICAgICAgICAgICAgb3B0aW9ucz17c3VwcG9ydGVkU291cmNlVHlwZXN9XHJcbiAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17PE5vdEZvdW5kQ29udGVudCAvPn1cclxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3NvdXJjZVR5cGV9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUFubm90YXRpb25Tb3VyY2VUeXBlfVxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshc291cmNlVHlwZSA/IFt0KCdNYW5kYXRvcnknKV0gOiBbXX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJWYWx1ZUNvbmZpZ3VyYXRpb24oKX1cclxuICAgICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAge3RoaXMucmVuZGVyU2xpY2VDb25maWd1cmF0aW9uKCl9XHJcbiAgICAgICAgICB7dGhpcy5yZW5kZXJEaXNwbGF5Q29uZmlndXJhdGlvbigpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nIH19PlxyXG4gICAgICAgICAge2lzTmV3ID8gKFxyXG4gICAgICAgICAgICA8QnV0dG9uIGJ1dHRvblNpemU9XCJzbWFsbFwiIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuY2xvc2UoKX0+XHJcbiAgICAgICAgICAgICAge3QoJ0NhbmNlbCcpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDxCdXR0b24gYnV0dG9uU2l6ZT1cInNtYWxsXCIgb25DbGljaz17dGhpcy5kZWxldGVBbm5vdGF0aW9ufT5cclxuICAgICAgICAgICAgICB7dCgnUmVtb3ZlJyl9XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNWYWxpZH1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFwcGx5QW5ub3RhdGlvbn1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt0KCdBcHBseScpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxyXG4gICAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc1ZhbGlkfVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3VibWl0QW5ub3RhdGlvbn1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt0KCdPSycpfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8Lz5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5Bbm5vdGF0aW9uTGF5ZXIucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xyXG5Bbm5vdGF0aW9uTGF5ZXIuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKEFubm90YXRpb25MYXllcik7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\n");

/***/ }),

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js":
/*!***********************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js ***!
  \***********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANNOTATION_SOURCE_TYPES: () => (/* binding */ ANNOTATION_SOURCE_TYPES),\n/* harmony export */   ANNOTATION_SOURCE_TYPES_METADATA: () => (/* binding */ ANNOTATION_SOURCE_TYPES_METADATA),\n/* harmony export */   ANNOTATION_TYPES: () => (/* binding */ ANNOTATION_TYPES),\n/* harmony export */   ANNOTATION_TYPES_METADATA: () => (/* binding */ ANNOTATION_TYPES_METADATA),\n/* harmony export */   DEFAULT_ANNOTATION_TYPE: () => (/* binding */ DEFAULT_ANNOTATION_TYPE),\n/* harmony export */   requiresQuery: () => (/* binding */ requiresQuery)\n/* harmony export */ });\n/* unused harmony export applyNativeColumns */\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n\n\nfunction extractTypes(metadata) {\n  return Object.keys(metadata).reduce((prev, key) => {\n    const result = prev;\n    result[key] = key;\n    return result;\n  }, {});\n}\n\nconst ANNOTATION_TYPES_METADATA = {\n  FORMULA: {\n    value: 'FORMULA',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Formula')\n  },\n  EVENT: {\n    value: 'EVENT',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Event'),\n    supportNativeSource: true\n  },\n  INTERVAL: {\n    value: 'INTERVAL',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Interval'),\n    supportNativeSource: true\n  },\n  TIME_SERIES: {\n    value: 'TIME_SERIES',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Time series')\n  }\n};\n\nconst ANNOTATION_TYPES = extractTypes(ANNOTATION_TYPES_METADATA);\n\nconst DEFAULT_ANNOTATION_TYPE = ANNOTATION_TYPES.FORMULA;\n\nconst ANNOTATION_SOURCE_TYPES_METADATA = {\n  NATIVE: {\n    value: 'NATIVE',\n    label: 'Superset annotation'\n  }\n};\n\nconst ANNOTATION_SOURCE_TYPES = extractTypes(\n  ANNOTATION_SOURCE_TYPES_METADATA\n);\n\nfunction requiresQuery(annotationSourceType) {\n  return !!annotationSourceType;\n}\n\nconst NATIVE_COLUMN_NAMES = {\n  timeColumn: 'start_dttm',\n  intervalEndColumn: 'end_dttm',\n  titleColumn: 'short_descr',\n  descriptionColumns: ['long_descr']\n};\n\nfunction applyNativeColumns(annotation) {\n  if (annotation.sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\n    return { ...annotation, ...NATIVE_COLUMN_NAMES };\n  }\n  return annotation;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extractTypes, \"extractTypes\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES_METADATA, \"ANNOTATION_TYPES_METADATA\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES, \"ANNOTATION_TYPES\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(DEFAULT_ANNOTATION_TYPE, \"DEFAULT_ANNOTATION_TYPE\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES_METADATA, \"ANNOTATION_SOURCE_TYPES_METADATA\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES, \"ANNOTATION_SOURCE_TYPES\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(requiresQuery, \"requiresQuery\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(NATIVE_COLUMN_NAMES, \"NATIVE_COLUMN_NAMES\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");reactHotLoader.register(applyNativeColumns, \"applyNativeColumns\", \"D:\\\\CodeKata\\\\superset\\\\superset-frontend\\\\src\\\\explore\\\\components\\\\controls\\\\AnnotationLayerControl\\\\AnnotationTypes.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzP2IzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RUeXBlcyhtZXRhZGF0YSkge1xyXG4gIHJldHVybiBPYmplY3Qua2V5cyhtZXRhZGF0YSkucmVkdWNlKChwcmV2LCBrZXkpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHByZXY7XHJcbiAgICByZXN1bHRba2V5XSA9IGtleTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSwge30pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQU5OT1RBVElPTl9UWVBFU19NRVRBREFUQSA9IHtcclxuICBGT1JNVUxBOiB7XHJcbiAgICB2YWx1ZTogJ0ZPUk1VTEEnLFxyXG4gICAgbGFiZWw6IHQoJ0Zvcm11bGEnKSxcclxuICB9LFxyXG4gIEVWRU5UOiB7XHJcbiAgICB2YWx1ZTogJ0VWRU5UJyxcclxuICAgIGxhYmVsOiB0KCdFdmVudCcpLFxyXG4gICAgc3VwcG9ydE5hdGl2ZVNvdXJjZTogdHJ1ZSxcclxuICB9LFxyXG4gIElOVEVSVkFMOiB7XHJcbiAgICB2YWx1ZTogJ0lOVEVSVkFMJyxcclxuICAgIGxhYmVsOiB0KCdJbnRlcnZhbCcpLFxyXG4gICAgc3VwcG9ydE5hdGl2ZVNvdXJjZTogdHJ1ZSxcclxuICB9LFxyXG4gIFRJTUVfU0VSSUVTOiB7XHJcbiAgICB2YWx1ZTogJ1RJTUVfU0VSSUVTJyxcclxuICAgIGxhYmVsOiB0KCdUaW1lIHNlcmllcycpLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgQU5OT1RBVElPTl9UWVBFUyA9IGV4dHJhY3RUeXBlcyhBTk5PVEFUSU9OX1RZUEVTX01FVEFEQVRBKTtcclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0FOTk9UQVRJT05fVFlQRSA9IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQTtcclxuXHJcbmV4cG9ydCBjb25zdCBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFU19NRVRBREFUQSA9IHtcclxuICBOQVRJVkU6IHtcclxuICAgIHZhbHVlOiAnTkFUSVZFJyxcclxuICAgIGxhYmVsOiAnU3VwZXJzZXQgYW5ub3RhdGlvbicsXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUyA9IGV4dHJhY3RUeXBlcyhcclxuICBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFU19NRVRBREFUQSxcclxuKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc1F1ZXJ5KGFubm90YXRpb25Tb3VyY2VUeXBlKSB7XHJcbiAgcmV0dXJuICEhYW5ub3RhdGlvblNvdXJjZVR5cGU7XHJcbn1cclxuXHJcbmNvbnN0IE5BVElWRV9DT0xVTU5fTkFNRVMgPSB7XHJcbiAgdGltZUNvbHVtbjogJ3N0YXJ0X2R0dG0nLFxyXG4gIGludGVydmFsRW5kQ29sdW1uOiAnZW5kX2R0dG0nLFxyXG4gIHRpdGxlQ29sdW1uOiAnc2hvcnRfZGVzY3InLFxyXG4gIGRlc2NyaXB0aW9uQ29sdW1uczogWydsb25nX2Rlc2NyJ10sXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlOYXRpdmVDb2x1bW5zKGFubm90YXRpb24pIHtcclxuICBpZiAoYW5ub3RhdGlvbi5zb3VyY2VUeXBlID09PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcclxuICAgIHJldHVybiB7IC4uLmFubm90YXRpb24sIC4uLk5BVElWRV9DT0xVTU5fTkFNRVMgfTtcclxuICB9XHJcbiAgcmV0dXJuIGFubm90YXRpb247XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\n");

/***/ })

}]);